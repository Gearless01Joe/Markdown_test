{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u6587\u6863\u9996\u9875Python \u6280\u672f\u6587\u6863\u5e93","text":"<p>Medpeer \u00b7 \u6570\u636e\u5efa\u8bbe\u7ec4</p> <p>     \u56f4\u7ed5\u722c\u866b\u3001\u6570\u636e\u6e05\u6d17\u4e0e\u8fd0\u7ef4\u90e8\u7f72\u6253\u9020\u7684\u4e00\u7ad9\u5f0f\u77e5\u8bc6\u5e93\uff0c\u6db5\u76d6\u5de5\u7a0b\u67b6\u6784\u3001API \u53c2\u8003\u3001\u81ea\u52a8\u5316\u811a\u672c\u4e0e\u56e2\u961f\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u6210\u5458\u5728\u6570\u5206\u949f\u5185\u5b9a\u4f4d\u9700\u8981\u7684\u4fe1\u606f\u3002   </p>      [\u8fdb\u5165\u9879\u76ee\u5e93](projects/index.md){ .md-button .md-button--primary }     [\u67e5\u9605\u5f00\u53d1\u6307\u5357](guide/index.md){ .md-button }     [\u67e5\u770b API \u7d22\u5f15](api.md){ .md-button }    2 \u5927\u91cd\u70b9\u9879\u76ee 9 \u7bc7\u9879\u76ee\u7ae0\u8282 \u00d7 2 \u5957 mkdocstrings + Mermaid \u52a8\u6001\u6e32\u67d3"},{"location":"#_2","title":"\u63a8\u8350\u5165\u53e3","text":"RCSB PDB \u67b6\u6784\u8bbe\u8ba1 <p>\u5206\u5c42\u722c\u866b + Pipeline + Redis \u7684\u5168\u94fe\u8def\u63cf\u8ff0\uff0c\u542b\u90e8\u7f72\u4e0e\u6269\u5c55\u5efa\u8bae\u3002</p> <ul> <li>\u91c7\u96c6\u3001\u88c1\u526a\u3001\u5b58\u50a8\u3001\u72b6\u6001\u5c42\u7684\u534f\u540c\u65b9\u5f0f</li> <li>Scrapy / FieldFilter / Pipeline \u4e4b\u95f4\u7684\u6570\u636e\u4f20\u9012</li> <li>Playwright \u4e2d\u95f4\u4ef6\u4e0e\u65e5\u5fd7\u3001\u7f13\u5b58\u7b56\u7565</li> </ul> NTRT \u67b6\u6784\u8bbe\u8ba1 <p>\u6570\u636e\u6e05\u6d17\u6d41\u6c34\u7ebf\u3001\u4efb\u52a1\u8ba1\u5212\u548c ORM \u5c01\u88c5\u7684\u6574\u4f53\u89c6\u56fe\u3002</p> <ul> <li>DataCleaner \u4e3b\u6d41\u7a0b\u4e0e cleaning_plan</li> <li>BaseCRUD / session_dict \u62bd\u8c61\uff0c\u652f\u6301\u591a\u5e93\u5207\u6362</li> <li>\u6279\u91cf\u5904\u7406\u3001\u4efb\u52a1\u62c6\u5206\u4e0e\u8c03\u5ea6\u96c6\u6210\u5efa\u8bae</li> </ul> \u53c2\u8003\u6587\u6863 \u00b7 \u66f4\u65b0\u65e5\u5fd7 <p>\u96c6\u4e2d\u67e5\u770b\u5168\u7ad9\u66f4\u65b0\u8bb0\u5f55\u3001\u901a\u7528\u672f\u8bed\u53ca\u652f\u6491\u5de5\u5177\u8bf4\u660e\u3002</p> <ul> <li>\u6587\u6863\u7248\u672c\u5386\u53f2\u3001\u53d1\u5e03\u8282\u594f</li> <li>\u65b0\u589e\u6a21\u5757\u4e0e\u6539\u52a8\u6982\u89c8</li> <li>\u53c2\u8003\u8d44\u6599\u4e0e\u516c\u5171\u8d44\u6e90\u6307\u5f15</li> </ul>"},{"location":"#_3","title":"\u6700\u8fd1\u66f4\u65b0","text":"2025-01 \u00b7 \u6587\u6863\u4f53\u7cfb\u5347\u7ea7 <ul> <li>NTRT \u9879\u76ee\u91cd\u65b0\u7f16\u5199 9 \u7bc7\u7ae0\u8282\uff0c\u7edf\u4e00 mkdocstrings API \u5f15\u7528\u3002</li> <li>\u65b0\u589e\u5bfc\u822a\u5206\u5c42\u6837\u5f0f\u3001\u9996\u9875 Hero\u3001\u6982\u89c8\u5361\u7247\u4e0e\u6307\u6807\u89c6\u56fe\u3002</li> <li>\u96c6\u6210 Mermaid\u3001pymdownx \u7cfb\u5217\u6269\u5c55\uff0c\u63d0\u4f9b\u56fe\u8868\u4e0e\u9ad8\u7ea7\u6392\u7248\u80fd\u529b\u3002</li> </ul> 2024-12 \u00b7 \u4ee3\u7801\u6e05\u6d17\u4e3b\u7ebf\u6210\u578b <ul> <li><code>DataCleaner</code> \u4e3b\u6d41\u7a0b\u3001<code>CleaningModelMixin</code>\u3001<code>BaseCRUD</code> \u5c01\u88c5\u843d\u5730\u3002</li> <li>\u63d0\u4f9b JSON \u793a\u4f8b\u3001\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u8bf4\u660e\u4e66\uff0c\u652f\u6301\u591a\u6570\u636e\u5e93\u5207\u6362\u3002</li> </ul>"},{"location":"#_4","title":"\u56fe\u5f62\u4e0e\u6f14\u793a","text":"<p>\u53ef\u76f4\u63a5\u5728 Markdown \u4e2d\u7f16\u5199 Mermaid \u4ee5\u5c55\u793a\u67b6\u6784\u3001\u6d41\u7a0b\u6216\u65f6\u5e8f\u56fe\uff1a</p> <pre><code>flowchart LR\n    A[\u722c\u866b\u5c42] --&gt; B[\u5b57\u6bb5\u8fc7\u6ee4 FieldFilter]\n    B --&gt; C[Pipeline\\n\u6587\u4ef6/Mongo]\n    C --&gt; D[\u7f13\u5b58\u5c42 Redis]\n    B --&gt;|\u89c4\u5219| E[\u6570\u636e\u6e05\u6d17]\n    E --&gt; F[\u62a5\u544a &amp; Dashboard]\n</code></pre>"},{"location":"#_5","title":"\u64cd\u4f5c\u6307\u5357","text":"<ol> <li>\u5728 <code>MkDocs_doc</code> \u76ee\u5f55\u8fd0\u884c <code>mkdocs serve</code> \u9884\u89c8\u7ad9\u70b9\u3002</li> <li>\u6587\u6863\u4f4d\u4e8e <code>docs/</code> \u76ee\u5f55\uff0c\u5fc5\u8981\u65f6\u540c\u6b65 <code>mkdocs.yml</code> \u5bfc\u822a\u6216 <code>extra_*</code> \u914d\u7f6e\u3002</li> <li>\u4f7f\u7528 <code>mkdocs build</code> \u751f\u6210\u9759\u6001\u8d44\u6e90\uff0c\u53ef\u90e8\u7f72\u81f3 GitHub Pages\u3001Cloudflare Pages\u3001Vercel\u3001\u963f\u91cc\u4e91 OSS \u7b49\u4efb\u610f\u9759\u6001\u6258\u7ba1\u73af\u5883\u3002</li> <li>\u82e5\u65b0\u589e\u9879\u76ee\uff0c\u8bf7\u5728\u9996\u9875\u300c\u9879\u76ee\u8d44\u4ea7\u300d\u5361\u7247\u8865\u5145\u63cf\u8ff0\uff0c\u4fdd\u6301\u4f53\u9a8c\u4e00\u81f4\u3002</li> </ol> <p>\u82e5\u9700\u8981\u66f4\u591a\u4ea4\u4e92\u7ec4\u4ef6\uff0c\u53ef\u53c2\u8003 <code>mkdocs.yml</code> \u4e2d\u542f\u7528\u7684 <code>pymdownx.*</code> \u6269\u5c55\uff0c\u6216\u5728 <code>stylesheets/theme-overrides.css</code> \u5185\u8ffd\u52a0\u5b9a\u5236\u6837\u5f0f\u3002</p>"},{"location":"api/","title":"\u603b\u89c8","text":""},{"location":"api/#NTRT.data_cleaner","title":"<code>NTRT.data_cleaner</code>","text":""},{"location":"api/#NTRT.data_cleaner--time-20251110-1341","title":"@Time    : 2025/11/10 13:41","text":""},{"location":"api/#NTRT.data_cleaner--user","title":"@User  : \u5218\u5b50\u90fd","text":""},{"location":"api/#NTRT.data_cleaner--descriotion","title":"@Descriotion  : \u56fd\u81ea\u7136\u79d1\u5b66\u57fa\u91d1\u9879\u76ee\u63a8\u8350\u6570\u636e\u6e05\u6d17\u6a21\u5757","text":"<pre><code>              \u5b9e\u73b0breadth_search\u548ccited_articles\u5b57\u6bb5\u7684\u6570\u636e\u6e05\u6d17\u548c\u6807\u51c6\u5316\u5904\u7406\n</code></pre>"},{"location":"api/#NTRT.data_cleaner.DataCleaner","title":"<code>DataCleaner()</code>","text":"<p>\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b</p> <p>\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668\u3002</p> <p>:author: LZD :date: 2025/11/10</p> Source code in <code>NTRT\\data_cleaner.py</code> <pre><code>def __init__(self):\n    \"\"\"\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668\u3002\n\n    :author: LZD\n    :date: 2025/11/10\n    \"\"\"\n    self.db_key = DEFAULT_DB_KEY\n    self.batch_size = BATCH_SIZE\n    try:\n        self._task_list_model = NsfcTopicRcmdTaskListModel()\n        self._topic_list_model = NsfcTopicRcmdTaskTopicListModel()\n        self._app_info_model = NsfcTopicRcmdTaskAppInfoModel()\n    except Exception as exc:\n        raise RuntimeError(f\"\u521d\u59cb\u5316\u6570\u636e\u6a21\u578b\u5931\u8d25: {exc}\") from exc\n</code></pre>"},{"location":"api/#NTRT.data_cleaner.DataCleaner.run","title":"<code>run()</code>","text":"<p>\u6267\u884c\u6240\u6709\u6e05\u6d17\u4efb\u52a1\u3002</p> <p>:author: LZD :date: 2025/11/10</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\data_cleaner.py</code> <pre><code>def run(self):\n    \"\"\"\u6267\u884c\u6240\u6709\u6e05\u6d17\u4efb\u52a1\u3002\n\n    :author: LZD\n    :date: 2025/11/10\n    \"\"\"\n    session = self._open_session()\n    try:\n        print(\"=\" * 60)\n        print(\"\u5f00\u59cb\u6267\u884c\u6570\u636e\u6e05\u6d17\u4efb\u52a1\")\n        print(f\"\u6570\u636e\u5e93: {self.db_key}\")\n        print(\"=\" * 60)\n        print()\n\n        cleaning_plan = [\n            {\n                'model_class': NsfcTopicRcmdTaskListModel,\n                'field_name': 'breadth_search',\n                'extra_filters': [\n                    or_(\n                        func.json_contains_path(\n                            NsfcTopicRcmdTaskListModel.model.breadth_search,\n                            'one',\n                            '$.article_addition'\n                        ) == 1,\n                        func.json_contains_path(\n                            NsfcTopicRcmdTaskListModel.model.breadth_search,\n                            'one',\n                            '$.project_addition'\n                        ) == 1\n                    )\n                ],\n                'processor': self._process_breadth_search,\n                'display_name': 'breadth_search \u5b57\u6bb5',\n            },\n            {\n                'model_class': NsfcTopicRcmdTaskTopicListModel,\n                'field_name': 'cited_articles',\n                'extra_filters': [\n                    func.json_type(\n                        NsfcTopicRcmdTaskTopicListModel.model.cited_articles\n                    ) == 'ARRAY'\n                ],\n                'processor': self._process_cited_articles,\n                'display_name': '\u4e3b\u9898\u5217\u8868\u8868\u7684 cited_articles \u5b57\u6bb5',\n            },\n            {\n                'model_class': NsfcTopicRcmdTaskAppInfoModel,\n                'field_name': 'cited_articles',\n                'extra_filters': [\n                    func.json_type(\n                        NsfcTopicRcmdTaskAppInfoModel.model.cited_articles\n                    ) == 'ARRAY'\n                ],\n                'processor': self._process_cited_articles,\n                'display_name': '\u5e94\u7528\u4fe1\u606f\u8868\u7684 cited_articles \u5b57\u6bb5',\n            },\n        ]\n\n        for task in cleaning_plan:\n            self._clean_dataset(\n                session=session,\n                model_class=task['model_class'],\n                field_name=task['field_name'],\n                extra_filters=task['extra_filters'],\n                processor=task['processor'],\n                display_name=task['display_name'],\n            )\n\n        print(\"=\" * 60)\n        print(\"\u6240\u6709\u6570\u636e\u6e05\u6d17\u4efb\u52a1\u5b8c\u6210\uff01\")\n        print(\"=\" * 60)\n    finally:\n        session.close()\n</code></pre>"},{"location":"api/#NTRT.base_mysql","title":"<code>NTRT.base_mysql</code>","text":""},{"location":"api/#NTRT.base_mysql--time-2023811-955","title":"@Time    : 2023/8/11 9:55","text":""},{"location":"api/#NTRT.base_mysql--user-mabin","title":"@User  : Mabin","text":""},{"location":"api/#NTRT.base_mysql--descriotion-mysql","title":"@Descriotion  :MySQL\u6570\u636e\u5e93\u8fde\u63a5\u5de5\u5177","text":""},{"location":"api/#NTRT.base_mysql.BaseCRUD","title":"<code>BaseCRUD</code>","text":""},{"location":"api/#NTRT.base_mysql.BaseCRUD.batch_create_info","title":"<code>batch_create_info(db, create_list, **extra_param)</code>","text":"<p>\u6279\u91cf\u521b\u65b0\u6570\u636e\u4e0d\u5224\u91cd :param db: :param list create_list:\u5f85\u63d2\u5165\u7684\u6570\u636e :param extra_param: :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def batch_create_info(self, db, create_list, **extra_param):\n    \"\"\"\n    \u6279\u91cf\u521b\u65b0\u6570\u636e\u4e0d\u5224\u91cd\n    :param db:\n    :param list create_list:\u5f85\u63d2\u5165\u7684\u6570\u636e\n    :param extra_param:\n    :return:\n    \"\"\"\n    if not create_list:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u63d2\u5165\u6570\u636e\n    db.bulk_insert_mappings(self.model, create_list)\n    db.commit()\n\n    return {\"result\": True, \"msg\": \"ok\uff01\"}\n</code></pre>"},{"location":"api/#NTRT.base_mysql.BaseCRUD.create_single","title":"<code>create_single(db, create_data, **extra_param)</code>","text":"<p>\u5355\u6761\u521b\u5efa\u4fe1\u606f\u4e0d\u5224\u91cd :param db: :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5     auto_field=&gt;\"\u8fd4\u56de\u7684\u81ea\u589eID\u5b57\u6bb5\" :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def create_single(self, db, create_data, **extra_param):\n    \"\"\"\n    \u5355\u6761\u521b\u5efa\u4fe1\u606f\u4e0d\u5224\u91cd\n    :param db:\n    :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n        auto_field=&gt;\"\u8fd4\u56de\u7684\u81ea\u589eID\u5b57\u6bb5\"\n    :return:\n    \"\"\"\n    if not create_data:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u83b7\u53d6\u989d\u5916\u5b57\u6bb5\n    auto_field = extra_param.get(\"auto_field\", None)\n\n    create_res = self.model(**create_data)\n    db.add(create_res)\n    db.commit()\n    db.refresh(create_res)\n\n    # \u83b7\u53d6\u81ea\u589eID\n    auto_field_val = None\n    if auto_field:\n        auto_field_val = getattr(create_res, auto_field)\n\n    return {\"result\": True, \"msg\": \"ok\uff01\", \"data\": auto_field_val}\n</code></pre>"},{"location":"api/#NTRT.base_mysql.BaseCRUD.create_single_info","title":"<code>create_single_info(db, create_data, create_cond, **extra_param)</code>","text":"<p>\u5355\u6761\u521b\u5efa\u4fe1\u606f :param db: :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e :param list create_cond:\u6570\u636e\u67e5\u8be2\u6761\u4ef6 :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5 :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def create_single_info(self, db, create_data, create_cond, **extra_param):\n    \"\"\"\n    \u5355\u6761\u521b\u5efa\u4fe1\u606f\n    :param db:\n    :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e\n    :param list create_cond:\u6570\u636e\u67e5\u8be2\u6761\u4ef6\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n    :return:\n    \"\"\"\n    if not all([create_data, create_cond]):\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    existing_record = db.query(self.model).filter(*create_cond).first()\n    if existing_record:\n        return {\"result\": False, \"msg\": \"\u6570\u636e\u5df2\u7ecf\u5b58\u5728\uff01\"}\n\n    # \u4e0d\u5b58\u5728\uff0c\u5219\u6267\u884c\u521b\u5efa\n    create_res = self.model(**create_data)\n    db.add(create_res)\n\n    # \u5224\u65ad\u662f\u5426\u63d0\u4ea4\n    if extra_param.get(\"is_commit\", True):\n        db.commit()\n        db.refresh(create_res)\n\n    return {\"result\": True, \"msg\": \"ok\uff01\"}\n</code></pre>"},{"location":"api/#NTRT.base_mysql.BaseCRUD.get_count_info","title":"<code>get_count_info(db, where=None)</code>","text":"<p>\u83b7\u53d6\u6570\u636e\u5e93\u67e5\u8be2\u6570\u91cf :author Mabin :param db: :param where: :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def get_count_info(self, db, where=None):\n    \"\"\"\n    \u83b7\u53d6\u6570\u636e\u5e93\u67e5\u8be2\u6570\u91cf\n    :author Mabin\n    :param db:\n    :param where:\n    :return:\n    \"\"\"\n    if where:\n        # \u7ec4\u7ec7\u67e5\u8be2\u6761\u4ef6\n        query_count = db.query(self.model).filter(*where).count()\n    else:\n        query_count = db.query(self.model).count()\n\n    # \u8fd4\u56de\u67e5\u8be2\u7ed3\u679c\n    return query_count\n</code></pre>"},{"location":"api/#NTRT.base_mysql.BaseCRUD.get_list_info","title":"<code>get_list_info(db, field, where=None, first_row=None, list_rows=None, order=None, **extra_param)</code>","text":"<p>\u83b7\u53d6\u5217\u8868\u4fe1\u606f :author: Hjl :param db: :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column] :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10] :param int|None first_row:\u8d77\u59cb\u884c\u6570 :param int|None list_rows:\u6bcf\u9875\u663e\u793a\u884c\u6570 :param tuple order:\u6392\u5e8f\u5b57\u6bb5 :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5     q_list=&gt;Q\u67e5\u8be2\u5217\u8868\uff08\u8be5\u67e5\u8be2\u7528\u4e8e\u5b9e\u73b0or\u3001and\uff09</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def get_list_info(self, db, field, where=None, first_row=None, list_rows=None, order=None, **extra_param):\n    \"\"\"\n    \u83b7\u53d6\u5217\u8868\u4fe1\u606f\n    :author: Hjl\n    :param db:\n    :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column]\n    :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10]\n    :param int|None first_row:\u8d77\u59cb\u884c\u6570\n    :param int|None list_rows:\u6bcf\u9875\u663e\u793a\u884c\u6570\n    :param tuple order:\u6392\u5e8f\u5b57\u6bb5\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n        q_list=&gt;Q\u67e5\u8be2\u5217\u8868\uff08\u8be5\u67e5\u8be2\u7528\u4e8e\u5b9e\u73b0or\u3001and\uff09\n    \"\"\"\n    if not field:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    query = db.query(self.model).with_entities(*field)\n\n    if where:\n        query = query.filter(*where)\n\n    # \u52a0\u5165\u6392\u5e8f\u6761\u4ef6\n    if order:\n        query = query.order_by(*order)\n\n    # \u52a0\u5165\u5206\u9875\u4fe1\u606f\n    if first_row:\n        query = query.offset(first_row)\n    if list_rows:\n        query = query.limit(list_rows)\n\n    # \u5224\u65ad\u6570\u636e\u662f\u5426\u5b58\u5728\n    query_res = query.all()\n    if not query_res:\n        return {\"result\": True, \"msg\": \"\u76f8\u5173\u6570\u636e\u4e0d\u5b58\u5728\uff01\", \"data\": []}\n\n    # \u7ec4\u7ec7\u8fd4\u56de\u6570\u636e\n    buf = []\n    for query_item in query_res:\n        buf.append(query_item._mapping)\n\n    return {\"result\": True, \"msg\": \"ok\uff01\", \"data\": buf}\n</code></pre>"},{"location":"api/#NTRT.base_mysql.BaseCRUD.get_single_info","title":"<code>get_single_info(db, field, where=None, **extra_param)</code>","text":"<p>\u5355\u6761\u67e5\u8be2\u4fe1\u606f :author Hjl :param db: :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column] :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10] :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5     order=&gt;\u67e5\u8be2\u6761\u4ef6 :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def get_single_info(self, db, field, where=None, **extra_param):\n    \"\"\"\n    \u5355\u6761\u67e5\u8be2\u4fe1\u606f\n    :author Hjl\n    :param db:\n    :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column]\n    :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10]\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n        order=&gt;\u67e5\u8be2\u6761\u4ef6\n    :return:\n    \"\"\"\n    if not field:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u83b7\u53d6\u989d\u5916\u53c2\u6570\n    order = extra_param.get(\"order\")  # \u6392\u5e8f\u6761\u4ef6\n\n    query = db.query(self.model).with_entities(*field)\n\n    if where:\n        query = query.filter(*where)\n\n    # \u52a0\u5165\u6392\u5e8f\u6761\u4ef6\n    if order:\n        query = query.order_by(*order)\n\n    # \u5224\u65ad\u6570\u636e\u662f\u5426\u5b58\u5728\n    query_res = query.first()\n    if not query_res:\n        return {\"result\": False, \"msg\": \"\u76f8\u5173\u6570\u636e\u4e0d\u5b58\u5728\uff01\", \"data\": {}}\n\n    return {\"result\": True, \"msg\": \"\u67e5\u8be2\u6210\u529f\uff01\", \"data\": query_res._mapping}\n</code></pre>"},{"location":"api/#NTRT.base_mysql.BaseCRUD.update_data_info","title":"<code>update_data_info(db, update_data, update_cond, **extra_param)</code>","text":"<p>\u4fee\u6539\u76ee\u6807\u6570\u636e :author:HJL :param db : :param dict update_data:\u5f85\u4fee\u6539\u6570\u636e :param list update_cond:\u4fee\u6539\u6761\u4ef6 :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5 :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def update_data_info(self, db, update_data, update_cond, **extra_param):\n    \"\"\"\n    \u4fee\u6539\u76ee\u6807\u6570\u636e\n    :author:HJL\n    :param db :\n    :param dict update_data:\u5f85\u4fee\u6539\u6570\u636e\n    :param list update_cond:\u4fee\u6539\u6761\u4ef6\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n    :return:\n    \"\"\"\n    if not all([update_data, update_cond]):\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u68c0\u67e5\u6570\u636e\u662f\u5426\u5b58\u5728\n    exist = db.query(self.model).filter(*update_cond).first()\n    if not exist:\n        return {\"result\": False, \"msg\": \"\u5f85\u4fee\u6539\u7684\u6570\u636e\u4e0d\u5b58\u5728\uff01\"}\n\n    # \u83b7\u53d6\u5386\u53f2\u4fe1\u606f\n    history_dict = self._get_model_dict(exist)\n\n    # \u66f4\u65b0\u6570\u636e\n    for key, value in update_data.items():\n        setattr(exist, key, value)\n        flag_modified(exist, key)\n\n    # \u5224\u65ad\u662f\u5426\u63d0\u4ea4\n    if extra_param.get(\"is_commit\", True):\n        db.commit()\n\n    return {\"result\": True, \"msg\": \"\u6570\u636e\u4fee\u6539\u6210\u529f\uff01\", \"history\": history_dict}\n</code></pre>"},{"location":"update/","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u5f53\u4f60\u5728\u672c\u5730\u66f4\u65b0\u4e86\u6587\u6863\uff08\u4f8b\u5982\u65b0\u589e <code>about.md</code> \u6216\u4fee\u6539 <code>.md</code>\u3001<code>mkdocs.yml</code>\uff09\uff0c\u6309\u7167\u4e0b\u9762\u6d41\u7a0b\u5c31\u80fd\u540c\u6b65\u5230 GitHub Pages\u3002\u5efa\u8bae\u987a\u5e8f\u6267\u884c\uff0c\u6bcf\u6b65\u90fd\u786e\u8ba4\u5b8c\u6210\u3002</p>"},{"location":"update/#1","title":"1. \u672c\u5730\u9884\u89c8\uff08\u53ef\u9009\uff09","text":"<p><pre><code>cd MkDocs_doc\nmkdocs serve\n</code></pre> \u5728\u6d4f\u89c8\u5668\u6253\u5f00 <code>http://127.0.0.1:8000/</code>\uff0c\u786e\u8ba4\u6587\u6863\u663e\u793a\u6b63\u5e38\u3002\u8c03\u8bd5\u5b8c\u6309 <code>Ctrl+C</code> \u505c\u6b62\u670d\u52a1\u3002</p>"},{"location":"update/#2","title":"2. \u6784\u5efa\u4e00\u6b21\u5e76\u786e\u4fdd\u6210\u529f","text":"<p><pre><code>mkdocs build\n</code></pre> \u8981\u6c42\u6ca1\u6709\u81f4\u547d\u9519\u8bef\uff0c<code>docs/</code> \u4e2d\u65b0\u589e\u7684\u6587\u4ef6\uff08\u5982 <code>about.md</code>\uff09\u90fd\u5199\u8fdb <code>mkdocs.yml</code> \u7684 <code>nav</code>\uff0c\u4ee5\u514d\u51fa\u73b0\u9057\u6f0f\u8b66\u544a\u3002</p>"},{"location":"update/#3-test","title":"3. \u63d0\u4ea4\u4ee3\u7801\uff08<code>test</code> \u5206\u652f\uff09","text":"<p><pre><code>cd ..\ngit add .\ngit commit -m \"Add about page\"\ngit push markdown test\n</code></pre> \u56de\u5230\u4ed3\u5e93\u6839\u76ee\u5f55\uff08cd ..\uff09\uff0c\u4fdd\u6301\u4ee3\u7801\u7248\u672c\u5e93\u548c\u6587\u6863\u6e90\u540c\u6b65\u3002</p>"},{"location":"update/#4-github-pages","title":"4. \u90e8\u7f72\u5230 GitHub Pages","text":"<p>\u786e\u8ba4\u4ecd\u5728\u865a\u62df\u73af\u5883\u91cc\uff1a <pre><code>cd MkDocs_doc\nmkdocs gh-deploy --clean --remote-name markdown\n</code></pre> \u770b\u5230 \u201cCopying \u2026 to \u2018gh-pages\u2019 branch and pushing to GitHub.\u201d \u4e14\u6ca1\u6709\u62a5\u9519\uff0c\u8bf4\u660e\u53d1\u5e03\u6210\u529f\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u51fa\u73b0\u4e86 <pre><code>Failed to connect to github.com\n</code></pre> \u6267\u884c\uff1agit push markdown test\uff0c\u53ef\u4ee5\u6210\u529f\u8fde\u63a5\u7684\u65f6\u5019\uff0c\u518d\u6267\u884c\u90e8\u7f72\u7684\u547d\u4ee4\u3002</p>"},{"location":"update/#5-github","title":"5. GitHub \u9875\u9762\u7684\u66f4\u65b0","text":"<p>\u4fdd\u6301 GitHub \u4ed3\u5e93 Pages \u8bbe\u7f6e\uff08Branch: <code>gh-pages</code> / root\uff09\u4e0d\u52a8\u3002\u51e0\u5206\u949f\u540e\u8bbf\u95ee <code>https://gearless01joe.github.io/Markdown_test/</code>\uff0c\u65b0\u9875\u9762\u5c31\u4f1a\u51fa\u73b0\u3002\u82e5\u6d4f\u89c8\u5668\u7f13\u5b58\u5bfc\u81f4\u65e7\u5185\u5bb9\u672a\u5237\u65b0\uff0c\u53ef\u4ee5 <code>Ctrl+F5</code> \u6216\u6362\u6d4f\u89c8\u5668\u8bd5\u4e00\u4e0b\u3002</p> <p>\u53ea\u8981\u6309\u7167\u8fd9\u4e94\u6b65\uff08\u9884\u89c8 \u2192 \u6784\u5efa \u2192 \u63d0\u4ea4 \u2192 \u90e8\u7f72 \u2192 \u68c0\u67e5\uff09\u5c31\u80fd\u628a\u672a\u6765\u7684\u6587\u6863\u66f4\u65b0\u81ea\u52a8\u53d1\u5e03\u5230\u7ebf\u4e0a\u7684 GitHub Pages \u7ad9\u70b9\u3002</p>"},{"location":"guide/","title":"\u5f00\u53d1\u6307\u5357","text":"<p>\u6b22\u8fce\u6765\u5230\u5f00\u53d1\u6307\u5357\uff01\u8fd9\u91cc\u5305\u542b\u4e86\u5f00\u53d1\u76f8\u5173\u7684\u6240\u6709\u6587\u6863\u3002</p>"},{"location":"guide/#_2","title":"\u6307\u5357\u5217\u8868","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb - \u5feb\u901f\u4e0a\u624b\u5f00\u53d1</li> <li>\u6700\u4f73\u5b9e\u8df5 - \u5f00\u53d1\u6700\u4f73\u5b9e\u8df5</li> <li>\u9ad8\u7ea7\u4e3b\u9898 - \u9ad8\u7ea7\u5f00\u53d1\u6280\u5de7</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/","title":"\u9879\u76ee\u7ed3\u6784\u8bf4\u660e","text":""},{"location":"guide/PROJECT_STRUCTURE/#_2","title":"\ud83d\udcc1 \u6574\u4f53\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>Markdown/                          # \u9879\u76ee\u6839\u76ee\u5f55\n\u251c\u2500\u2500 code_liu/                      # \u6e90\u4ee3\u7801\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 NTRT/                      # NTRT \u9879\u76ee\uff08\u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350\u6570\u636e\u6e05\u6d17\uff09\n\u2502   \u2502   \u251c\u2500\u2500 data_cleaner.py        # \u6570\u636e\u6e05\u6d17\u4e3b\u7c7b\n\u2502   \u2502   \u251c\u2500\u2500 base_mysql.py          # \u6570\u636e\u5e93\u57fa\u7840\u64cd\u4f5c\n\u2502   \u2502   \u251c\u2500\u2500 application/           # \u5e94\u7528\u6a21\u5757\n\u2502   \u2502   \u2514\u2500\u2500 *.md                   # \u9879\u76ee\u76f8\u5173\u6587\u6863\n\u2502   \u2514\u2500\u2500 RCSB_PDB/                  # RCSB PDB \u9879\u76ee\uff08\u86cb\u767d\u8d28\u6570\u636e\u5e93\u722c\u866b\uff09\n\u2502       \u251c\u2500\u2500 src/\n\u2502       \u2502   \u251c\u2500\u2500 spider/            # \u722c\u866b\u6a21\u5757\n\u2502       \u2502   \u251c\u2500\u2500 items/             # \u6570\u636e\u9879\u5b9a\u4e49\n\u2502       \u2502   \u2514\u2500\u2500 pipelines/         # \u6570\u636e\u5904\u7406\u7ba1\u9053\n\u2502       \u2514\u2500\u2500 *.md                   # \u9879\u76ee\u76f8\u5173\u6587\u6863\n\u2502\n\u251c\u2500\u2500 MkDocs_doc/                    # MkDocs \u6587\u6863\u9879\u76ee\n\u2502   \u251c\u2500\u2500 docs/                      # \u6587\u6863\u6e90\u6587\u4ef6\u76ee\u5f55\n\u2502   \u2502   \u251c\u2500\u2500 index.md               # \u9996\u9875\n\u2502   \u2502   \u251c\u2500\u2500 api.md                 # API \u603b\u89c8\n\u2502   \u2502   \u251c\u2500\u2500 projects/              # \u9879\u76ee\u6587\u6863\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 index.md          # \u9879\u76ee\u6587\u6863\u9996\u9875\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 ntrt/             # NTRT \u9879\u76ee\u6587\u6863\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 index.md      # \u9879\u76ee\u6982\u8ff0\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 api.md        # API \u53c2\u8003\uff08\u81ea\u52a8\u751f\u6210\uff09\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 guide.md      # \u4f7f\u7528\u6307\u5357\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 update.md     # \u66f4\u65b0\u65e5\u5fd7\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 rcsb_pdb/         # RCSB PDB \u9879\u76ee\u6587\u6863\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 index.md\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 api.md\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 guide.md\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 update.md\n\u2502   \u2502   \u251c\u2500\u2500 guide/                 # \u5f00\u53d1\u6307\u5357\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 index.md\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 getting-started.md\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 best-practices.md\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 mkdocstrings-workflow.md    # mkdocstrings \u5de5\u4f5c\u6d41\u7a0b\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 mkdocstrings-syntax.md      # mkdocstrings \u8bed\u6cd5\u53c2\u8003\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 mkdocstrings-comments.md    # mkdocstrings \u4e0e\u6ce8\u91ca\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 advanced/          # \u9ad8\u7ea7\u4e3b\u9898\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 index.md\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 performance.md\n\u2502   \u2502   \u2514\u2500\u2500 reference/             # \u53c2\u8003\u6587\u6863\n\u2502   \u2502       \u251c\u2500\u2500 index.md\n\u2502   \u2502       \u2514\u2500\u2500 glossary.md\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 scripts/                   # \u81ea\u52a8\u5316\u811a\u672c\n\u2502   \u2502   \u251c\u2500\u2500 generate_mkdocstrings_md.py  # \u81ea\u52a8\u751f\u6210\u5305\u542b mkdocstrings \u8bed\u6cd5\u7684 .md \u6587\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 code_to_markdown.py         # \u5c06 Python \u4ee3\u7801\u8f6c\u6362\u4e3a Markdown\n\u2502   \u2502   \u251c\u2500\u2500 README_auto_generate.md     # \u81ea\u52a8\u751f\u6210\u811a\u672c\u8bf4\u660e\n\u2502   \u2502   \u2514\u2500\u2500 README_code_to_markdown.md  # \u4ee3\u7801\u8f6c Markdown \u8bf4\u660e\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 mkdocs.yml                 # MkDocs \u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 requirements.txt           # Python \u4f9d\u8d56\n\u2502   \u2514\u2500\u2500 site/                      # \u6784\u5efa\u8f93\u51fa\u76ee\u5f55\uff08\u81ea\u52a8\u751f\u6210\uff09\n\u2502\n\u2514\u2500\u2500 .github/\n    \u2514\u2500\u2500 workflows/\n        \u2514\u2500\u2500 mkdocs-deploy.yml      # GitHub Actions \u81ea\u52a8\u90e8\u7f72\u914d\u7f6e\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#_3","title":"\ud83c\udfaf \u6838\u5fc3\u7ec4\u4ef6\u8bf4\u660e","text":""},{"location":"guide/PROJECT_STRUCTURE/#1-code_liu","title":"1. \u6e90\u4ee3\u7801\u76ee\u5f55 (<code>code_liu/</code>)","text":"<p>\u4f5c\u7528\uff1a\u5b58\u653e\u9879\u76ee\u7684 Python \u6e90\u4ee3\u7801</p> <p>\u7ed3\u6784\uff1a - <code>NTRT/</code> - \u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350\u6570\u636e\u6e05\u6d17\u9879\u76ee - <code>RCSB_PDB/</code> - RCSB PDB \u722c\u866b\u9879\u76ee</p> <p>\u7528\u9014\uff1a - mkdocstrings \u4ece\u8fd9\u91cc\u8bfb\u53d6\u4ee3\u7801 - \u81ea\u52a8\u751f\u6210 API \u6587\u6863</p>"},{"location":"guide/PROJECT_STRUCTURE/#2-mkdocs_docdocs","title":"2. \u6587\u6863\u6e90\u6587\u4ef6 (<code>MkDocs_doc/docs/</code>)","text":"<p>\u4f5c\u7528\uff1a\u5b58\u653e\u6240\u6709 Markdown \u6587\u6863\u6e90\u6587\u4ef6</p> <p>\u4e3b\u8981\u76ee\u5f55\uff1a - <code>projects/</code> - \u9879\u76ee\u6587\u6863\uff08\u6bcf\u4e2a\u9879\u76ee\u4e00\u4e2a\u5b50\u76ee\u5f55\uff09 - <code>guide/</code> - \u5f00\u53d1\u6307\u5357\u548c\u4f7f\u7528\u8bf4\u660e - <code>reference/</code> - \u53c2\u8003\u6587\u6863</p>"},{"location":"guide/PROJECT_STRUCTURE/#3-mkdocs_docscripts","title":"3. \u81ea\u52a8\u5316\u811a\u672c (<code>MkDocs_doc/scripts/</code>)","text":""},{"location":"guide/PROJECT_STRUCTURE/#generate_mkdocstrings_mdpy","title":"<code>generate_mkdocstrings_md.py</code>","text":"<p>\u529f\u80fd\uff1a\u81ea\u52a8\u751f\u6210\u5305\u542b mkdocstrings \u8bed\u6cd5\u7684 .md \u6587\u4ef6</p> <p>\u4f7f\u7528\uff1a <pre><code>python MkDocs_doc/scripts/generate_mkdocstrings_md.py\n</code></pre></p> <p>\u4f5c\u7528\uff1a - \u626b\u63cf\u4ee3\u7801\u76ee\u5f55 - \u81ea\u52a8\u53d1\u73b0\u6240\u6709\u7c7b\u548c\u51fd\u6570 - \u751f\u6210\u5305\u542b <code>::: \u6a21\u5757\u8def\u5f84</code> \u8bed\u6cd5\u7684 .md \u6587\u4ef6</p>"},{"location":"guide/PROJECT_STRUCTURE/#code_to_markdownpy","title":"<code>code_to_markdown.py</code>","text":"<p>\u529f\u80fd\uff1a\u5c06 Python \u4ee3\u7801\u76f4\u63a5\u8f6c\u6362\u4e3a Markdown \u6587\u6863</p> <p>\u4f7f\u7528\uff1a <pre><code>python MkDocs_doc/scripts/code_to_markdown.py &lt;\u8f93\u5165\u8def\u5f84&gt; -o &lt;\u8f93\u51fa\u8def\u5f84&gt;\n</code></pre></p> <p>\u4f5c\u7528\uff1a - \u89e3\u6790 Python \u4ee3\u7801 - \u63d0\u53d6 docstring\u3001\u7c7b\u3001\u51fd\u6570\u7b49\u4fe1\u606f - \u751f\u6210\u5b8c\u6574\u7684 Markdown \u6587\u6863</p>"},{"location":"guide/PROJECT_STRUCTURE/#4-mkdocsyml","title":"4. \u914d\u7f6e\u6587\u4ef6 (<code>mkdocs.yml</code>)","text":"<p>\u4e3b\u8981\u914d\u7f6e\uff1a</p>"},{"location":"guide/PROJECT_STRUCTURE/#nav","title":"\u5bfc\u822a\u914d\u7f6e (<code>nav</code>)","text":"<pre><code>nav:\n  - \u9996\u9875: index.md\n  - \u9879\u76ee\u6587\u6863:\n    - \u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350\u6570\u636e\u6e05\u6d17:\n      - \u6587\u6863\u6982\u8ff0: projects/ntrt/index.md\n      - \u7cfb\u7edf\u5168\u666f: projects/ntrt/api.md\n      - \u6838\u5fc3\u6a21\u5757: projects/ntrt/guide.md\n      - \u66f4\u65b0\u65e5\u5fd7: projects/ntrt/update.md\n  - \u5f00\u53d1\u6307\u5357: ...\n  - \u53c2\u8003\u6587\u6863: ...\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#plugins","title":"\u63d2\u4ef6\u914d\u7f6e (<code>plugins</code>)","text":"<pre><code>plugins:\n  - search:                    # \u641c\u7d22\u529f\u80fd\n  - autorefs:                  # \u81ea\u52a8\u5f15\u7528\n  - mkdocstrings:              # \u4ece\u4ee3\u7801\u63d0\u53d6\u6587\u6863\n    handlers:\n      python:\n        paths: \n          - ../code_liu        # \u4ee3\u7801\u8def\u5f84\n          - ../src\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#theme","title":"\u4e3b\u9898\u914d\u7f6e (<code>theme</code>)","text":"<pre><code>theme:\n  name: material               # Material \u4e3b\u9898\n  language: zh                # \u4e2d\u6587\n  features:                   # \u529f\u80fd\u7279\u6027\n    - navigation.tabs\n    - search.suggest\n    - content.code.copy\n    ...\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#_4","title":"\ud83d\udd04 \u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"guide/PROJECT_STRUCTURE/#_5","title":"\u6587\u6863\u751f\u6210\u6d41\u7a0b","text":"<pre><code>1. \u7f16\u5199/\u66f4\u65b0 Python \u4ee3\u7801\n   \u2193\n2. \u8fd0\u884c\u81ea\u52a8\u751f\u6210\u811a\u672c\n   python scripts/generate_mkdocstrings_md.py\n   \u2193\n3. \u751f\u6210\u5305\u542b mkdocstrings \u8bed\u6cd5\u7684 .md \u6587\u4ef6\n   docs/projects/ntrt/api.md\n   \u2193\n4. \u8fd0\u884c mkdocs build/serve\n   mkdocs serve\n   \u2193\n5. mkdocstrings \u4ece\u4ee3\u7801\u8bfb\u53d6\u6587\u6863\n   \u89e3\u6790 docstring\u3001\u7c7b\u3001\u51fd\u6570\u7b49\n   \u2193\n6. \u751f\u6210 HTML \u6587\u6863\n   site/ \u76ee\u5f55\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#_6","title":"\u81ea\u52a8\u90e8\u7f72\u6d41\u7a0b","text":"<pre><code>1. \u672c\u5730\u4fee\u6539\u4ee3\u7801/\u6587\u6863\n   \u2193\n2. Git \u63d0\u4ea4\u5e76\u63a8\u9001\n   git push markdown test\n   \u2193\n3. GitHub Actions \u81ea\u52a8\u89e6\u53d1\n   .github/workflows/mkdocs-deploy.yml\n   \u2193\n4. \u81ea\u52a8\u8fd0\u884c\u811a\u672c\u751f\u6210\u6587\u6863\n   python scripts/generate_mkdocstrings_md.py\n   \u2193\n5. \u6784\u5efa\u5e76\u90e8\u7f72\u5230 GitHub Pages\n   mkdocs gh-deploy\n   \u2193\n6. \u6587\u6863\u81ea\u52a8\u66f4\u65b0\n   https://Gearless01Joe.github.io/Markdown_test/\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#_7","title":"\ud83d\udccb \u6587\u6863\u7ec4\u7ec7","text":""},{"location":"guide/PROJECT_STRUCTURE/#_8","title":"\u9879\u76ee\u6587\u6863\u7ed3\u6784","text":"<p>\u6bcf\u4e2a\u9879\u76ee\u5305\u542b 4 \u4e2a\u6587\u6863\uff1a</p> <ol> <li>index.md - \u9879\u76ee\u6982\u8ff0</li> <li>\u9879\u76ee\u4ecb\u7ecd</li> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u9879\u76ee\u7ed3\u6784</li> <li> <p>\u6587\u6863\u5bfc\u822a</p> </li> <li> <p>api.md - API \u53c2\u8003\uff08\u81ea\u52a8\u751f\u6210\uff09</p> </li> <li>\u4f7f\u7528 <code>generate_mkdocstrings_md.py</code> \u751f\u6210</li> <li>\u5305\u542b <code>::: \u6a21\u5757\u8def\u5f84</code> \u8bed\u6cd5</li> <li> <p>mkdocstrings \u81ea\u52a8\u4ece\u4ee3\u7801\u63d0\u53d6\u6587\u6863</p> </li> <li> <p>guide.md - \u4f7f\u7528\u6307\u5357</p> </li> <li>\u6838\u5fc3\u6a21\u5757\u8bf4\u660e</li> <li>\u4f7f\u7528\u793a\u4f8b</li> <li>\u6700\u4f73\u5b9e\u8df5</li> <li> <p>\u5e38\u89c1\u95ee\u9898</p> </li> <li> <p>update.md - \u66f4\u65b0\u65e5\u5fd7</p> </li> <li>\u7248\u672c\u5386\u53f2</li> <li>\u66f4\u65b0\u8bb0\u5f55</li> </ol>"},{"location":"guide/PROJECT_STRUCTURE/#_9","title":"\u5f00\u53d1\u6307\u5357\u7ed3\u6784","text":"<ul> <li>index.md - \u6307\u5357\u9996\u9875</li> <li>getting-started.md - \u5feb\u901f\u5f00\u59cb</li> <li>best-practices.md - \u6700\u4f73\u5b9e\u8df5</li> <li>mkdocstrings-workflow.md - mkdocstrings \u5de5\u4f5c\u6d41\u7a0b</li> <li>mkdocstrings-syntax.md - mkdocstrings \u8bed\u6cd5\u53c2\u8003</li> <li>mkdocstrings-comments.md - mkdocstrings \u4e0e\u6ce8\u91ca</li> <li>advanced/ - \u9ad8\u7ea7\u4e3b\u9898</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#_10","title":"\ud83d\udee0\ufe0f \u5de5\u5177\u548c\u811a\u672c","text":""},{"location":"guide/PROJECT_STRUCTURE/#_11","title":"\u4e3b\u8981\u5de5\u5177","text":"<ol> <li>MkDocs - \u6587\u6863\u751f\u6210\u6846\u67b6</li> <li>Material for MkDocs - \u4e3b\u9898</li> <li>mkdocstrings - \u4ece\u4ee3\u7801\u63d0\u53d6\u6587\u6863</li> <li>GitHub Actions - \u81ea\u52a8\u90e8\u7f72</li> </ol>"},{"location":"guide/PROJECT_STRUCTURE/#_12","title":"\u81ea\u52a8\u5316\u811a\u672c","text":"<ol> <li>generate_mkdocstrings_md.py</li> <li>\u81ea\u52a8\u751f\u6210\u5305\u542b mkdocstrings \u8bed\u6cd5\u7684 .md \u6587\u4ef6</li> <li>\u626b\u63cf\u4ee3\u7801\uff0c\u53d1\u73b0\u7c7b\u548c\u51fd\u6570</li> <li> <p>\u751f\u6210\u6b63\u786e\u7684\u6a21\u5757\u8def\u5f84</p> </li> <li> <p>code_to_markdown.py</p> </li> <li>\u5c06 Python \u4ee3\u7801\u8f6c\u6362\u4e3a Markdown</li> <li>\u63d0\u53d6 docstring\u3001\u7c7b\u3001\u51fd\u6570\u7b49\u4fe1\u606f</li> <li>\u751f\u6210\u5b8c\u6574\u7684\u6587\u6863\u5185\u5bb9</li> </ol>"},{"location":"guide/PROJECT_STRUCTURE/#_13","title":"\ud83d\udcdd \u5173\u952e\u6587\u4ef6\u8bf4\u660e","text":""},{"location":"guide/PROJECT_STRUCTURE/#mkdocsyml","title":"<code>mkdocs.yml</code>","text":"<ul> <li>MkDocs \u4e3b\u914d\u7f6e\u6587\u4ef6</li> <li>\u5b9a\u4e49\u5bfc\u822a\u7ed3\u6784</li> <li>\u914d\u7f6e\u63d2\u4ef6\u548c\u4e3b\u9898</li> <li>\u8bbe\u7f6e\u4ee3\u7801\u8def\u5f84</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#requirementstxt","title":"<code>requirements.txt</code>","text":"<ul> <li>Python \u4f9d\u8d56\u5305</li> <li>mkdocs\u3001mkdocs-material\u3001mkdocstrings \u7b49</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#githubworkflowsmkdocs-deployyml","title":"<code>.github/workflows/mkdocs-deploy.yml</code>","text":"<ul> <li>GitHub Actions \u5de5\u4f5c\u6d41</li> <li>\u81ea\u52a8\u6784\u5efa\u548c\u90e8\u7f72\u6587\u6863</li> <li>\u96c6\u6210\u81ea\u52a8\u751f\u6210\u811a\u672c</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#_14","title":"\ud83c\udfa8 \u6587\u6863\u7279\u6027","text":""},{"location":"guide/PROJECT_STRUCTURE/#material","title":"Material \u4e3b\u9898\u529f\u80fd","text":"<ul> <li>\u2705 \u591a\u5c42\u7ea7\u5bfc\u822a</li> <li>\u2705 \u5168\u6587\u641c\u7d22</li> <li>\u2705 \u4ee3\u7801\u9ad8\u4eae</li> <li>\u2705 \u4ee3\u7801\u590d\u5236\u6309\u94ae</li> <li>\u2705 \u54cd\u5e94\u5f0f\u8bbe\u8ba1</li> <li>\u2705 \u6697\u8272\u6a21\u5f0f\u652f\u6301</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#mkdocstrings","title":"mkdocstrings \u529f\u80fd","text":"<ul> <li>\u2705 \u81ea\u52a8\u4ece\u4ee3\u7801\u63d0\u53d6\u6587\u6863</li> <li>\u2705 \u89e3\u6790 docstring</li> <li>\u2705 \u663e\u793a\u7c7b\u578b\u6ce8\u89e3</li> <li>\u2705 \u663e\u793a\u6e90\u4ee3\u7801</li> <li>\u2705 \u652f\u6301 Google/Sphinx/NumPy \u98ce\u683c</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#_15","title":"\ud83d\udcca \u9879\u76ee\u7edf\u8ba1","text":""},{"location":"guide/PROJECT_STRUCTURE/#_16","title":"\u5f53\u524d\u9879\u76ee","text":"<ul> <li>NTRT \u9879\u76ee\uff1a11 \u4e2a\u7c7b/\u51fd\u6570</li> <li>RCSB PDB \u9879\u76ee\uff1a4 \u4e2a\u7c7b/\u51fd\u6570</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#_17","title":"\u6587\u6863\u9875\u9762","text":"<ul> <li>\u9879\u76ee\u6587\u6863\uff1a2 \u4e2a\u9879\u76ee \u00d7 4 \u4e2a\u9875\u9762 = 8 \u9875</li> <li>\u5f00\u53d1\u6307\u5357\uff1a7 \u4e2a\u9875\u9762</li> <li>\u53c2\u8003\u6587\u6863\uff1a3 \u4e2a\u9875\u9762</li> <li>\u603b\u8ba1\uff1a\u7ea6 18 \u4e2a\u9875\u9762</li> </ul>"},{"location":"guide/PROJECT_STRUCTURE/#_18","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"guide/PROJECT_STRUCTURE/#1","title":"1. \u672c\u5730\u5f00\u53d1","text":"<pre><code># \u5b89\u88c5\u4f9d\u8d56\ncd MkDocs_doc\npip install -r requirements.txt\n\n# \u751f\u6210 API \u6587\u6863\npython scripts/generate_mkdocstrings_md.py\n\n# \u672c\u5730\u9884\u89c8\nmkdocs serve\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#2","title":"2. \u66f4\u65b0\u6587\u6863","text":"<pre><code># \u4ee3\u7801\u66f4\u65b0\u540e\uff0c\u91cd\u65b0\u751f\u6210\u6587\u6863\npython scripts/generate_mkdocstrings_md.py\n\n# \u67e5\u770b\u6548\u679c\nmkdocs serve\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#3","title":"3. \u90e8\u7f72","text":"<pre><code># \u63a8\u9001\u5230 GitHub\uff0c\u81ea\u52a8\u90e8\u7f72\ngit add .\ngit commit -m \"Update docs\"\ngit push markdown test\n</code></pre>"},{"location":"guide/PROJECT_STRUCTURE/#_19","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>mkdocstrings \u5de5\u4f5c\u6d41\u7a0b</li> <li>mkdocstrings \u8bed\u6cd5\u53c2\u8003</li> <li>mkdocstrings \u4e0e\u6ce8\u91ca</li> <li>\u81ea\u52a8\u751f\u6210\u811a\u672c\u8bf4\u660e\uff1a<code>MkDocs_doc/scripts/README_auto_generate.md</code></li> </ul>"},{"location":"guide/best-practices/","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"guide/best-practices/#_2","title":"\u4ee3\u7801\u89c4\u8303","text":"<ul> <li>\u4f7f\u7528 Google \u98ce\u683c\u7684 docstring</li> <li>\u9075\u5faa PEP 8 \u4ee3\u7801\u98ce\u683c</li> </ul>"},{"location":"guide/best-practices/#_3","title":"\u6587\u6863\u89c4\u8303","text":"<ul> <li>\u4e3a\u6240\u6709\u516c\u5171 API \u7f16\u5199\u6587\u6863</li> <li>\u63d0\u4f9b\u4f7f\u7528\u793a\u4f8b</li> </ul>"},{"location":"guide/getting-started/","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"guide/getting-started/#_2","title":"\u73af\u5883\u51c6\u5907","text":"<ol> <li>\u5b89\u88c5 Python 3.8+</li> <li>\u5b89\u88c5\u4f9d\u8d56\uff1a<code>pip install -r requirements.txt</code></li> </ol>"},{"location":"guide/getting-started/#_3","title":"\u7b2c\u4e00\u4e2a\u9879\u76ee","text":"<p>\u5f00\u59cb\u4f60\u7684\u7b2c\u4e00\u4e2a\u9879\u76ee\u5427\uff01</p>"},{"location":"guide/mkdocstrings-comments/","title":"mkdocstrings \u4e0e\u4ee3\u7801\u6ce8\u91ca","text":""},{"location":"guide/mkdocstrings-comments/#_1","title":"\u91cd\u8981\u8bf4\u660e","text":"<p>mkdocstrings \u4e3b\u8981\u89e3\u6790 docstring\uff08\u4e09\u5f15\u53f7\u5b57\u7b26\u4e32\uff09\uff0c\u4e0d\u662f\u666e\u901a\u7684 <code># \u6ce8\u91ca</code></p> <p>\u4f46\u662f\uff0c\u901a\u8fc7 <code>show_source: true</code> \u9009\u9879\uff0c\u53ef\u4ee5\u663e\u793a\u6e90\u4ee3\u7801\uff0c\u6e90\u4ee3\u7801\u4e2d\u4f1a\u5305\u542b\u6240\u6709\u6ce8\u91ca\u3002</p>"},{"location":"guide/mkdocstrings-comments/#_2","title":"\u4e24\u79cd\u6ce8\u91ca\u7c7b\u578b","text":""},{"location":"guide/mkdocstrings-comments/#1-docstring","title":"1. Docstring\uff08\u4f1a\u88ab\u89e3\u6790\uff09","text":"<p>\u683c\u5f0f\uff1a\u4f7f\u7528\u4e09\u5f15\u53f7 <code>\"\"\"</code> \u6216 <code>'''</code></p> <pre><code>class DataCleaner:\n    \"\"\"\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\n\n    \u8fd9\u4e2a\u7c7b\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u529f\u80fd\uff1a\n    - \u6e05\u6d17 breadth_search \u5b57\u6bb5\n    - \u6e05\u6d17 cited_articles \u5b57\u6bb5\n    - \u6279\u91cf\u5904\u7406\u6570\u636e\u5e93\u8bb0\u5f55\n    \"\"\"\n\n    def __init__(self):\n        \"\"\"\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668\u3002\n\n        :author: LZD\n        :date: 2025/11/10\n        \"\"\"\n        pass\n</code></pre> <p>mkdocstrings \u4f1a\u89e3\u6790\uff1a - \u2705 \u7c7b\u7684 docstring - \u2705 \u65b9\u6cd5\u7684 docstring - \u2705 \u51fd\u6570\u7684 docstring - \u2705 \u6a21\u5757\u7684 docstring</p>"},{"location":"guide/mkdocstrings-comments/#2","title":"2. \u666e\u901a\u6ce8\u91ca\uff08\u4e0d\u4f1a\u76f4\u63a5\u89e3\u6790\uff0c\u4f46\u53ef\u4ee5\u663e\u793a\uff09","text":"<p>\u683c\u5f0f\uff1a\u4f7f\u7528 <code>#</code> \u5f00\u5934</p> <pre><code>class DataCleaner:\n    # \u8fd9\u662f\u666e\u901a\u6ce8\u91ca\uff0cmkdocstrings \u4e0d\u4f1a\u89e3\u6790\n    # \u4f46\u53ef\u4ee5\u901a\u8fc7 show_source \u663e\u793a\u6e90\u4ee3\u7801\u65f6\u770b\u5230\n\n    def __init__(self):\n        self.db_key = DEFAULT_DB_KEY  # \u6570\u636e\u5e93\u952e\u540d\n        self.batch_size = BATCH_SIZE  # \u6279\u5904\u7406\u5927\u5c0f\n</code></pre> <p>mkdocstrings \u4e0d\u4f1a\u89e3\u6790\uff1a - \u274c \u666e\u901a <code>#</code> \u6ce8\u91ca - \u274c \u884c\u5185\u6ce8\u91ca</p> <p>\u4f46\u53ef\u4ee5\u901a\u8fc7 <code>show_source: true</code> \u663e\u793a\u6e90\u4ee3\u7801\uff0c\u6e90\u4ee3\u7801\u4e2d\u4f1a\u5305\u542b\u6240\u6709\u6ce8\u91ca\u3002</p>"},{"location":"guide/mkdocstrings-comments/#_3","title":"\u5b9e\u9645\u793a\u4f8b","text":""},{"location":"guide/mkdocstrings-comments/#1-docstring_1","title":"\u793a\u4f8b 1\uff1a\u89e3\u6790 Docstring","text":"<p>\u4ee3\u7801\uff1a <pre><code>class DataCleaner:\n    \"\"\"\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\n\n    \u8fd9\u4e2a\u7c7b\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u529f\u80fd\uff1a\n    - \u6e05\u6d17 breadth_search \u5b57\u6bb5\n    - \u6e05\u6d17 cited_articles \u5b57\u6bb5\n    \"\"\"\n\n    def run(self):\n        \"\"\"\u6267\u884c\u6240\u6709\u6e05\u6d17\u4efb\u52a1\u3002\n\n        :author: LZD\n        :date: 2025/11/10\n        \"\"\"\n        pass\n</code></pre></p> <p>\u5728 .md \u6587\u4ef6\u4e2d\u4f7f\u7528\uff1a <pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n</code></pre></p> <p>mkdocstrings \u4f1a\u663e\u793a\uff1a - \u2705 \u7c7b\u7684 docstring\uff1a\"\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c...\" - \u2705 \u65b9\u6cd5\u7684 docstring\uff1a\"\u6267\u884c\u6240\u6709\u6e05\u6d17\u4efb\u52a1...\" - \u2705 \u53c2\u6570\u8bf4\u660e\uff08\u5982\u679c\u6709\uff09 - \u2705 \u8fd4\u56de\u503c\u8bf4\u660e\uff08\u5982\u679c\u6709\uff09</p>"},{"location":"guide/mkdocstrings-comments/#2_1","title":"\u793a\u4f8b 2\uff1a\u663e\u793a\u6e90\u4ee3\u7801\uff08\u5305\u542b\u6ce8\u91ca\uff09","text":"<p>\u4ee3\u7801\uff1a <pre><code>class DataCleaner:\n    \"\"\"\u6570\u636e\u6e05\u6d17\u7c7b\"\"\"\n\n    def __init__(self):\n        \"\"\"\u521d\u59cb\u5316\"\"\"\n        # \u8bbe\u7f6e\u6570\u636e\u5e93\u952e\u540d\n        self.db_key = DEFAULT_DB_KEY\n        # \u8bbe\u7f6e\u6279\u5904\u7406\u5927\u5c0f\n        self.batch_size = BATCH_SIZE\n</code></pre></p> <p>\u5728 .md \u6587\u4ef6\u4e2d\u4f7f\u7528\uff1a <pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true  # \u663e\u793a\u6e90\u4ee3\u7801\n</code></pre></p> <p>mkdocstrings \u4f1a\u663e\u793a\uff1a - \u2705 \u7c7b\u7684 docstring - \u2705 \u6e90\u4ee3\u7801\uff08\u5305\u542b\u6240\u6709 <code>#</code> \u6ce8\u91ca\uff09</p>"},{"location":"guide/mkdocstrings-comments/#3","title":"\u793a\u4f8b 3\uff1a\u5b8c\u6574\u793a\u4f8b","text":"<p>\u8ba9\u6211\u4eec\u770b\u770b\u5b9e\u9645\u4ee3\u7801\u4e2d\u7684\u4f8b\u5b50\uff1a</p> <p>\u5b9e\u9645\u4ee3\u7801\uff08<code>code_liu/NTRT/data_cleaner.py</code>\uff09\uff1a</p> <pre><code>class DataCleaner:\n    \"\"\"\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\"\"\"\n\n    def __init__(self):\n        \"\"\"\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668\u3002\n\n        :author: LZD\n        :date: 2025/11/10\n        \"\"\"\n        self.db_key = DEFAULT_DB_KEY\n        self.batch_size = BATCH_SIZE\n        try:\n            self._task_list_model = NsfcTopicRcmdTaskListModel()\n            self._topic_list_model = NsfcTopicRcmdTaskTopicListModel()\n            self._app_info_model = NsfcTopicRcmdTaskAppInfoModel()\n        except Exception as exc:\n            raise RuntimeError(f\"\u521d\u59cb\u5316\u6570\u636e\u6a21\u578b\u5931\u8d25: {exc}\") from exc\n\n    def _process_records(self, records, field_name, processor_func):\n        \"\"\"\u5bf9\u67e5\u8be2\u7ed3\u679c\u8fdb\u884c\u5904\u7406\u5e76\u751f\u6210\u66f4\u65b0\u5185\u5bb9\u3002\n\n        :param records: \u539f\u59cb\u8bb0\u5f55\u5217\u8868\n        :param field_name: \u9700\u8981\u5904\u7406\u7684\u5b57\u6bb5\u540d\n        :param processor_func: \u6570\u636e\u5904\u7406\u51fd\u6570\n        :return: (updates, processed_count, skipped_count)\n        \"\"\"\n        # ORM \u4f1a\u81ea\u52a8\u5c06 JSON \u5b57\u6bb5\u53cd\u5e8f\u5217\u5316\u4e3a Python \u5bf9\u8c61\uff08dict/list\uff09\n        # \u5982\u679c\u5df2\u7ecf\u662f dict \u6216 list\uff0c\u76f4\u63a5\u4f7f\u7528\uff1b\u5982\u679c\u662f\u5b57\u7b26\u4e32\uff0c\u5219\u89e3\u6790 JSON\n        updates = []\n        processed_count = 0\n        skipped_count = 0\n\n        for record in records:\n            # \u5904\u7406\u6bcf\u6761\u8bb0\u5f55...\n            pass\n</code></pre> <p>\u5728 .md \u6587\u4ef6\u4e2d\u4f7f\u7528\uff1a</p> <pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n      show_signature_annotations: true\n</code></pre> <p>mkdocstrings \u4f1a\u663e\u793a\uff1a</p> <ol> <li>\u7c7b\u7684 docstring\uff1a\"\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c...\"</li> <li>\u65b9\u6cd5\u7684 docstring\uff1a</li> <li><code>__init__</code>: \"\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668...\"</li> <li><code>_process_records</code>: \"\u5bf9\u67e5\u8be2\u7ed3\u679c\u8fdb\u884c\u5904\u7406...\"</li> <li>\u53c2\u6570\u8bf4\u660e\uff08\u4ece docstring \u4e2d\u89e3\u6790\uff09\uff1a</li> <li><code>records</code>: \u539f\u59cb\u8bb0\u5f55\u5217\u8868</li> <li><code>field_name</code>: \u9700\u8981\u5904\u7406\u7684\u5b57\u6bb5\u540d</li> <li><code>processor_func</code>: \u6570\u636e\u5904\u7406\u51fd\u6570</li> <li>\u8fd4\u56de\u503c\u8bf4\u660e\uff1a<code>(updates, processed_count, skipped_count)</code></li> <li>\u6e90\u4ee3\u7801\uff08\u5982\u679c <code>show_source: true</code>\uff09\uff1a</li> <li>\u5305\u542b\u6240\u6709 <code>#</code> \u6ce8\u91ca</li> <li>\u5305\u542b\u5b8c\u6574\u7684\u4ee3\u7801\u5b9e\u73b0</li> </ol>"},{"location":"guide/mkdocstrings-comments/#_4","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"guide/mkdocstrings-comments/#1-docstring_2","title":"1. \u4f7f\u7528 Docstring \u800c\u4e0d\u662f\u666e\u901a\u6ce8\u91ca","text":"<p>\u63a8\u8350\uff1a <pre><code>def process_data(data):\n    \"\"\"\u5904\u7406\u6570\u636e\u3002\n\n    \u8fd9\u4e2a\u51fd\u6570\u4f1a\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c\u6e05\u6d17\u548c\u6807\u51c6\u5316\u5904\u7406\u3002\n\n    Args:\n        data: \u539f\u59cb\u6570\u636e\u5b57\u5178\n\n    Returns:\n        \u5904\u7406\u540e\u7684\u6570\u636e\u5b57\u5178\n    \"\"\"\n    # \u5b9e\u73b0\u4ee3\u7801...\n</code></pre></p> <p>\u4e0d\u63a8\u8350\uff08\u53ea\u4f7f\u7528\u6ce8\u91ca\uff09\uff1a <pre><code>def process_data(data):\n    # \u5904\u7406\u6570\u636e\n    # \u8fd9\u4e2a\u51fd\u6570\u4f1a\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c\u6e05\u6d17\u548c\u6807\u51c6\u5316\u5904\u7406\n    # \u53c2\u6570\uff1adata - \u539f\u59cb\u6570\u636e\u5b57\u5178\n    # \u8fd4\u56de\uff1a\u5904\u7406\u540e\u7684\u6570\u636e\u5b57\u5178\n    pass\n</code></pre></p>"},{"location":"guide/mkdocstrings-comments/#2-docstring","title":"2. \u7ed3\u5408\u4f7f\u7528 Docstring \u548c\u6e90\u4ee3\u7801\u663e\u793a","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true  # \u663e\u793a\u6e90\u4ee3\u7801\uff08\u5305\u542b\u6ce8\u91ca\uff09\n</code></pre> <p>\u8fd9\u6837\u65e2\u80fd\u770b\u5230\uff1a - \u2705 \u7ed3\u6784\u5316\u7684\u6587\u6863\uff08\u4ece docstring \u89e3\u6790\uff09 - \u2705 \u5b8c\u6574\u7684\u6e90\u4ee3\u7801\uff08\u5305\u542b\u6240\u6709\u6ce8\u91ca\uff09</p>"},{"location":"guide/mkdocstrings-comments/#3-docstring","title":"3. \u5728 Docstring \u4e2d\u6dfb\u52a0\u8be6\u7ec6\u8bf4\u660e","text":"<pre><code>def complex_function(param1, param2):\n    \"\"\"\u590d\u6742\u51fd\u6570\u8bf4\u660e\u3002\n\n    \u8fd9\u4e2a\u51fd\u6570\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u529f\u80fd\uff1a\n    1. \u6570\u636e\u9a8c\u8bc1\n    2. \u6570\u636e\u8f6c\u6362\n    3. \u6570\u636e\u5b58\u50a8\n\n    Args:\n        param1: \u53c2\u65701\u8bf4\u660e\n            - \u7c7b\u578b\uff1adict\n            - \u5fc5\u9700\u5b57\u6bb5\uff1a['id', 'name']\n        param2: \u53c2\u65702\u8bf4\u660e\n\n    Returns:\n        \u5904\u7406\u7ed3\u679c\u5b57\u5178\uff0c\u5305\u542b\uff1a\n        - success: \u662f\u5426\u6210\u529f\n        - data: \u5904\u7406\u540e\u7684\u6570\u636e\n        - errors: \u9519\u8bef\u5217\u8868\n\n    Raises:\n        ValueError: \u5f53\u53c2\u6570\u683c\u5f0f\u4e0d\u6b63\u786e\u65f6\n        RuntimeError: \u5f53\u5904\u7406\u5931\u8d25\u65f6\n\n    Example:\n        &gt;&gt;&gt; result = complex_function({'id': 1, 'name': 'test'}, 'option')\n        &gt;&gt;&gt; print(result['success'])\n        True\n\n    Note:\n        \u8fd9\u4e2a\u51fd\u6570\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002\n\n    Warning:\n        \u5927\u91cf\u6570\u636e\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u95ee\u9898\u3002\n    \"\"\"\n    pass\n</code></pre>"},{"location":"guide/mkdocstrings-comments/#_5","title":"\u67e5\u770b\u5b9e\u9645\u6548\u679c","text":""},{"location":"guide/mkdocstrings-comments/#1","title":"\u65b9\u6cd5 1\uff1a\u67e5\u770b\u751f\u6210\u7684\u6587\u6863","text":"<p>\u8fd0\u884c\uff1a <pre><code>cd MkDocs_doc\nmkdocs serve\n</code></pre></p> <p>\u8bbf\u95ee\uff1a - <code>http://127.0.0.1:8000/projects/ntrt/api/</code> - \u67e5\u770b <code>DataCleaner</code> \u7c7b\u7684\u6587\u6863</p>"},{"location":"guide/mkdocstrings-comments/#2_2","title":"\u65b9\u6cd5 2\uff1a\u67e5\u770b\u6e90\u4ee3\u7801","text":"<p>\u5728\u6587\u6863\u9875\u9762\u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86 <code>show_source: true</code>\uff0c\u4f1a\u663e\u793a\uff1a - \u5b8c\u6574\u7684\u6e90\u4ee3\u7801 - \u6240\u6709 <code>#</code> \u6ce8\u91ca - \u4ee3\u7801\u7ed3\u6784</p>"},{"location":"guide/mkdocstrings-comments/#_6","title":"\u603b\u7ed3","text":"\u6ce8\u91ca\u7c7b\u578b mkdocstrings \u662f\u5426\u89e3\u6790 \u5982\u4f55\u663e\u793a Docstring (<code>\"\"\"</code>) \u2705 \u662f \u81ea\u52a8\u89e3\u6790\u5e76\u7ed3\u6784\u5316\u663e\u793a \u666e\u901a\u6ce8\u91ca (<code>#</code>) \u274c \u5426 \u901a\u8fc7 <code>show_source: true</code> \u663e\u793a\u6e90\u4ee3\u7801\u65f6\u53ef\u89c1 <p>\u5efa\u8bae\uff1a - \u2705 \u4f7f\u7528 Docstring \u7f16\u5199\u4e3b\u8981\u6587\u6863 - \u2705 \u4f7f\u7528 <code>#</code> \u6ce8\u91ca\u89e3\u91ca\u4ee3\u7801\u903b\u8f91 - \u2705 \u8bbe\u7f6e <code>show_source: true</code> \u663e\u793a\u5b8c\u6574\u6e90\u4ee3\u7801</p> <p>\u8fd9\u6837\u65e2\u80fd\u83b7\u5f97\u7ed3\u6784\u5316\u7684\u6587\u6863\uff0c\u53c8\u80fd\u770b\u5230\u5b8c\u6574\u7684\u4ee3\u7801\u5b9e\u73b0\u548c\u6ce8\u91ca\u3002</p>"},{"location":"guide/mkdocstrings-file-types/","title":"mkdocstrings \u9002\u5408\u751f\u6210\u54ea\u4e9b\u6587\u6863\uff1f","text":""},{"location":"guide/mkdocstrings-file-types/#_1","title":"\u5bfc\u822a\u7ed3\u6784\u5206\u6790","text":"<p>\u6839\u636e <code>mkdocs.yml</code> \u4e2d\u7684\u914d\u7f6e\uff0c\u6bcf\u4e2a\u9879\u76ee\u5305\u542b 4 \u4e2a\u6587\u6863\uff1a</p> <pre><code>- \u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350\u6570\u636e\u6e05\u6d17:\n  - \u6587\u6863\u6982\u8ff0: projects/ntrt/index.md      # 1\n  - \u7cfb\u7edf\u5168\u666f: projects/ntrt/api.md        # 2 \u2b50\n  - \u6838\u5fc3\u6a21\u5757: projects/ntrt/guide.md      # 3\n  - \u66f4\u65b0\u65e5\u5fd7: projects/ntrt/update.md     # 4\n</code></pre>"},{"location":"guide/mkdocstrings-file-types/#_2","title":"\u5404\u6587\u4ef6\u7528\u9014\u5206\u6790","text":""},{"location":"guide/mkdocstrings-file-types/#1-indexmd","title":"1. \u6587\u6863\u6982\u8ff0 (index.md)","text":"<p>\u5185\u5bb9\uff1a - \u9879\u76ee\u4ecb\u7ecd - \u5feb\u901f\u5f00\u59cb - \u9879\u76ee\u7ed3\u6784 - \u6587\u6863\u5bfc\u822a</p> <p>\u662f\u5426\u9700\u8981 mkdocstrings\uff1a\u274c \u4e0d\u9700\u8981</p> <p>\u539f\u56e0\uff1a - \u4e3b\u8981\u662f\u8bf4\u660e\u6027\u6587\u5b57 - \u4e0d\u6d89\u53ca\u5177\u4f53\u7684 API \u6587\u6863 - \u624b\u52a8\u7f16\u5199\u66f4\u7075\u6d3b</p> <p>\u793a\u4f8b\u5185\u5bb9\uff1a <pre><code># \u9879\u76ee\u6982\u8ff0\n\n## \u5feb\u901f\u5f00\u59cb\n\n```python\nfrom NTRT.data_cleaner import DataCleaner\ncleaner = DataCleaner()\ncleaner.run()\n</code></pre> <pre><code>---\n\n### 2. \u7cfb\u7edf\u5168\u666f (api.md) \u2b50\n\n**\u5185\u5bb9**\uff1a\n- \u6240\u6709\u7c7b\u548c\u51fd\u6570\u7684 API \u6587\u6863\n- \u65b9\u6cd5\u7b7e\u540d\u3001\u53c2\u6570\u3001\u8fd4\u56de\u503c\n- \u7c7b\u578b\u6ce8\u89e3\n- \u6e90\u4ee3\u7801\n\n**\u662f\u5426\u9700\u8981 mkdocstrings**\uff1a\u2705 **\u6700\u9002\u5408\uff01**\n\n**\u539f\u56e0**\uff1a\n- \u9700\u8981\u5c55\u793a\u6240\u6709 API\n- \u9700\u8981\u4ece\u4ee3\u7801\u81ea\u52a8\u63d0\u53d6\u6587\u6863\n- \u4ee3\u7801\u66f4\u65b0\u65f6\u6587\u6863\u81ea\u52a8\u66f4\u65b0\n- \u7ed3\u6784\u5316\u5c55\u793a\u7c7b\u3001\u65b9\u6cd5\u3001\u53c2\u6570\u7b49\n\n**\u5f53\u524d\u4f7f\u7528\u60c5\u51b5**\uff1a\n```markdown\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n      show_signature_annotations: true\n</code></pre></p> <p>\u63a8\u8350\uff1a\u2705 \u4f7f\u7528 <code>generate_mkdocstrings_md.py</code> \u81ea\u52a8\u751f\u6210</p>"},{"location":"guide/mkdocstrings-file-types/#3-guidemd","title":"3. \u6838\u5fc3\u6a21\u5757 (guide.md)","text":"<p>\u5185\u5bb9\uff1a - \u67b6\u6784\u8bf4\u660e - \u4f7f\u7528\u793a\u4f8b - \u6700\u4f73\u5b9e\u8df5 - \u5e38\u89c1\u95ee\u9898</p> <p>\u662f\u5426\u9700\u8981 mkdocstrings\uff1a\u26a0\ufe0f \u53ef\u9009</p> <p>\u539f\u56e0\uff1a - \u4e3b\u8981\u662f\u8bf4\u660e\u6027\u6587\u6863 - \u53ef\u4ee5\u5f15\u7528 API\uff0c\u4f46\u4e0d\u9700\u8981\u5b8c\u6574\u5c55\u793a - \u53ef\u4ee5\u624b\u52a8\u7f16\u5199\uff0c\u66f4\u7075\u6d3b</p> <p>\u4f7f\u7528\u573a\u666f\uff1a - \u53ef\u4ee5\u5728 guide.md \u4e2d\u5c11\u91cf\u4f7f\u7528 mkdocstrings \u5f15\u7528\u5173\u952e\u7c7b - \u4f46\u4e0d\u9700\u8981\u50cf api.md \u90a3\u6837\u5b8c\u6574\u5c55\u793a\u6240\u6709 API</p> <p>\u793a\u4f8b\uff1a <pre><code>## DataCleaner \u7c7b\n\n\u6570\u636e\u6e05\u6d17\u7684\u6838\u5fc3\u7c7b\u3002\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      members:\n        - run_all\n        - clean_breadth_search\n</code></pre></p>"},{"location":"guide/mkdocstrings-file-types/#4-updatemd","title":"4. \u66f4\u65b0\u65e5\u5fd7 (update.md)","text":"<p>\u5185\u5bb9\uff1a - \u7248\u672c\u5386\u53f2 - \u66f4\u65b0\u8bb0\u5f55 - \u53d8\u66f4\u8bf4\u660e</p> <p>\u662f\u5426\u9700\u8981 mkdocstrings\uff1a\u274c \u4e0d\u9700\u8981</p> <p>\u539f\u56e0\uff1a - \u7eaf\u6587\u672c\u5185\u5bb9 - \u624b\u52a8\u7ef4\u62a4\u66f4\u5408\u9002 - \u4e0d\u6d89\u53ca\u4ee3\u7801\u6587\u6863</p>"},{"location":"guide/mkdocstrings-file-types/#_3","title":"\u603b\u7ed3\u5bf9\u6bd4","text":"\u6587\u4ef6 \u7528\u9014 mkdocstrings \u81ea\u52a8\u751f\u6210 \u8bf4\u660e index.md \u9879\u76ee\u6982\u8ff0 \u274c \u4e0d\u9700\u8981 \u274c \u8bf4\u660e\u6027\u6587\u6863 api.md API \u53c2\u8003 \u2705 \u6700\u9002\u5408 \u2705 \u63a8\u8350 \u5b8c\u6574 API \u6587\u6863 guide.md \u4f7f\u7528\u6307\u5357 \u26a0\ufe0f \u53ef\u9009 \u274c \u5c11\u91cf\u5f15\u7528\u5373\u53ef update.md \u66f4\u65b0\u65e5\u5fd7 \u274c \u4e0d\u9700\u8981 \u274c \u624b\u52a8\u7ef4\u62a4"},{"location":"guide/mkdocstrings-file-types/#_4","title":"\u63a8\u8350\u65b9\u6848","text":""},{"location":"guide/mkdocstrings-file-types/#1","title":"\u65b9\u6848 1\uff1a\u5b8c\u5168\u81ea\u52a8\u5316\uff08\u63a8\u8350\uff09","text":"<p>api.md \u4f7f\u7528\u811a\u672c\u81ea\u52a8\u751f\u6210\uff1a</p> <pre><code># \u8fd0\u884c\u811a\u672c\u81ea\u52a8\u751f\u6210\npython MkDocs_doc/scripts/generate_mkdocstrings_md.py\n</code></pre> <p>\u4f18\u70b9\uff1a - \u2705 \u81ea\u52a8\u53d1\u73b0\u6240\u6709\u7c7b\u548c\u51fd\u6570 - \u2705 \u81ea\u52a8\u751f\u6210\u6b63\u786e\u7684\u6a21\u5757\u8def\u5f84 - \u2705 \u4ee3\u7801\u66f4\u65b0\u540e\u91cd\u65b0\u8fd0\u884c\u5373\u53ef</p>"},{"location":"guide/mkdocstrings-file-types/#2","title":"\u65b9\u6848 2\uff1a\u624b\u52a8\u7f16\u5199\uff08\u7075\u6d3b\uff09","text":"<p>api.md \u624b\u52a8\u7f16\u5199\uff0c\u4f46\u4f7f\u7528 mkdocstrings \u8bed\u6cd5\uff1a</p> <pre><code># API \u53c2\u8003\n\n## \u6838\u5fc3\u7c7b\n\n### DataCleaner\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n</code></pre> <p>\u4f18\u70b9\uff1a - \u2705 \u5b8c\u5168\u63a7\u5236\u6587\u6863\u7ed3\u6784 - \u2705 \u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8bf4\u660e - \u2705 \u53ef\u4ee5\u9009\u62e9\u6027\u5c55\u793a</p> <p>\u7f3a\u70b9\uff1a - \u274c \u9700\u8981\u624b\u52a8\u7ef4\u62a4 - \u274c \u5bb9\u6613\u9057\u6f0f\u65b0\u7684\u7c7b/\u51fd\u6570</p>"},{"location":"guide/mkdocstrings-file-types/#3","title":"\u65b9\u6848 3\uff1a\u6df7\u5408\u65b9\u6848\uff08\u6700\u4f73\u5b9e\u8df5\uff09","text":"<ol> <li>api.md - \u4f7f\u7528\u811a\u672c\u81ea\u52a8\u751f\u6210\u57fa\u7840\u7ed3\u6784</li> <li>\u624b\u52a8\u7f16\u8f91 - \u6dfb\u52a0\u63cf\u8ff0\u548c\u8bf4\u660e</li> <li>\u4ee3\u7801\u66f4\u65b0\u540e - \u91cd\u65b0\u8fd0\u884c\u811a\u672c\u66f4\u65b0</li> </ol> <p>\u5de5\u4f5c\u6d41\u7a0b\uff1a <pre><code># 1. \u81ea\u52a8\u751f\u6210\u57fa\u7840\u7ed3\u6784\npython scripts/generate_mkdocstrings_md.py\n\n# 2. \u624b\u52a8\u7f16\u8f91\uff0c\u6dfb\u52a0\u63cf\u8ff0\n# \u7f16\u8f91 docs/projects/ntrt/api.md\n\n# 3. \u4ee3\u7801\u66f4\u65b0\u540e\uff0c\u91cd\u65b0\u751f\u6210\npython scripts/generate_mkdocstrings_md.py\n</code></pre></p>"},{"location":"guide/mkdocstrings-file-types/#_5","title":"\u5b9e\u9645\u4f7f\u7528\u5efa\u8bae","text":""},{"location":"guide/mkdocstrings-file-types/#apimd","title":"\u5bf9\u4e8e api.md\uff08\u7cfb\u7edf\u5168\u666f\uff09","text":"<p>\u2705 \u5f3a\u70c8\u63a8\u8350\u4f7f\u7528 mkdocstrings</p> <p>\u539f\u56e0\uff1a 1. \u9700\u8981\u5c55\u793a\u5b8c\u6574\u7684 API 2. \u4ee3\u7801\u66f4\u65b0\u65f6\u6587\u6863\u81ea\u52a8\u66f4\u65b0 3. \u7ed3\u6784\u5316\u5c55\u793a\u66f4\u6e05\u6670 4. \u51cf\u5c11\u7ef4\u62a4\u6210\u672c</p> <p>\u5f53\u524d\u5b9e\u73b0\uff1a - \u2705 \u5df2\u4f7f\u7528 <code>generate_mkdocstrings_md.py</code> \u81ea\u52a8\u751f\u6210 - \u2705 \u5305\u542b\u6240\u6709\u7c7b\u548c\u51fd\u6570\u7684 mkdocstrings \u8bed\u6cd5 - \u2705 \u4ee3\u7801\u66f4\u65b0\u540e\u91cd\u65b0\u8fd0\u884c\u811a\u672c\u5373\u53ef</p>"},{"location":"guide/mkdocstrings-file-types/#_6","title":"\u5bf9\u4e8e\u5176\u4ed6\u6587\u4ef6","text":"<ul> <li>index.md\uff1a\u624b\u52a8\u7f16\u5199\uff0c\u4e0d\u9700\u8981 mkdocstrings</li> <li>guide.md\uff1a\u624b\u52a8\u7f16\u5199\uff0c\u53ef\u5c11\u91cf\u5f15\u7528\u5173\u952e API</li> <li>update.md\uff1a\u624b\u52a8\u7ef4\u62a4\uff0c\u4e0d\u9700\u8981 mkdocstrings</li> </ul>"},{"location":"guide/mkdocstrings-file-types/#_7","title":"\u7ed3\u8bba","text":"<p>mkdocstrings \u6700\u9002\u5408\u751f\u6210\uff1a<code>api.md</code>\uff08\u7cfb\u7edf\u5168\u666f\uff09</p> <p>\u8fd9\u662f\u552f\u4e00\u9700\u8981\u5b8c\u6574\u5c55\u793a\u6240\u6709 API \u7684\u6587\u6863\uff0c\u4f7f\u7528 mkdocstrings \u53ef\u4ee5\uff1a - \u2705 \u81ea\u52a8\u4ece\u4ee3\u7801\u63d0\u53d6\u6587\u6863 - \u2705 \u4fdd\u6301\u6587\u6863\u4e0e\u4ee3\u7801\u540c\u6b65 - \u2705 \u7ed3\u6784\u5316\u5c55\u793a\u6240\u6709 API - \u2705 \u51cf\u5c11\u7ef4\u62a4\u6210\u672c</p> <p>\u5176\u4ed6\u6587\u4ef6\uff08index.md\u3001guide.md\u3001update.md\uff09\u4e3b\u8981\u662f\u8bf4\u660e\u6027\u6587\u6863\uff0c\u624b\u52a8\u7f16\u5199\u66f4\u5408\u9002\u3002</p>"},{"location":"guide/mkdocstrings-syntax/","title":"mkdocstrings \u5b8c\u6574\u8bed\u6cd5\u6307\u5357","text":""},{"location":"guide/mkdocstrings-syntax/#_1","title":"\u57fa\u672c\u8bed\u6cd5","text":""},{"location":"guide/mkdocstrings-syntax/#_2","title":"\u6700\u7b80\u5355\u7684\u7528\u6cd5","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84\n</code></pre> <p>\u793a\u4f8b\uff1a <pre><code>::: NTRT.data_cleaner\n</code></pre></p> <p>\u8fd9\u4f1a\u663e\u793a\u6574\u4e2a\u6a21\u5757\u7684\u5185\u5bb9\u3002</p>"},{"location":"guide/mkdocstrings-syntax/#_3","title":"\u5f15\u7528\u7c7b","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84.\u7c7b\u540d\n</code></pre> <p>\u793a\u4f8b\uff1a <pre><code>::: NTRT.data_cleaner.DataCleaner\n</code></pre></p>"},{"location":"guide/mkdocstrings-syntax/#_4","title":"\u5f15\u7528\u51fd\u6570","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84.\u51fd\u6570\u540d\n</code></pre> <p>\u793a\u4f8b\uff1a <pre><code>::: NTRT.data_cleaner.some_function\n</code></pre></p>"},{"location":"guide/mkdocstrings-syntax/#_5","title":"\u5b8c\u6574\u8bed\u6cd5\u683c\u5f0f","text":""},{"location":"guide/mkdocstrings-syntax/#_6","title":"\u6807\u51c6\u683c\u5f0f","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84\n    handler: python\n    options:\n      \u9009\u9879\u540d: \u503c\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_7","title":"\u6240\u6709\u53ef\u7528\u9009\u9879","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84\n    handler: python\n    options:\n      # \u663e\u793a\u9009\u9879\n      show_root_heading: true          # \u663e\u793a\u6839\u6807\u9898\n      show_root_toc_entry: true        # \u5728\u76ee\u5f55\u4e2d\u663e\u793a\u6839\u6761\u76ee\n      show_root_full_path: false       # \u663e\u793a\u5b8c\u6574\u8def\u5f84\n      show_root_members_full_path: false  # \u663e\u793a\u6210\u5458\u5b8c\u6574\u8def\u5f84\n\n      # \u6e90\u4ee3\u7801\u9009\u9879\n      show_source: true                # \u663e\u793a\u6e90\u4ee3\u7801\n      show_signature: true             # \u663e\u793a\u51fd\u6570\u7b7e\u540d\n      show_signature_annotations: true # \u663e\u793a\u7c7b\u578b\u6ce8\u89e3\n      separate_signature: false        # \u5355\u72ec\u663e\u793a\u7b7e\u540d\n\n      # \u5185\u5bb9\u9009\u9879\n      show_if_no_docstring: false      # \u6ca1\u6709 docstring \u4e5f\u663e\u793a\n      show_submodules: true            # \u663e\u793a\u5b50\u6a21\u5757\n      show_object_full_path: false     # \u663e\u793a\u5bf9\u8c61\u5b8c\u6574\u8def\u5f84\n\n      # \u6210\u5458\u9009\u9879\n      members:                         # \u53ea\u663e\u793a\u6307\u5b9a\u7684\u6210\u5458\n        - method1\n        - method2\n      members_order: alphabetical      # \u6210\u5458\u6392\u5e8f\uff1aalphabetical, source\n      filters: []                      # \u8fc7\u6ee4\u89c4\u5219\n\n      # \u7c7b\u9009\u9879\n      merge_init_into_class: true      # \u5c06 __init__ \u5408\u5e76\u5230\u7c7b\u6587\u6863\n      show_bases: true                 # \u663e\u793a\u57fa\u7c7b\n      show_inheritance: false          # \u663e\u793a\u7ee7\u627f\u5173\u7cfb\n\n      # \u6587\u6863\u5b57\u7b26\u4e32\u9009\u9879\n      docstring_style: google          # \u98ce\u683c\uff1agoogle, numpy, sphinx\n      docstring_options: {}            # docstring \u89e3\u6790\u9009\u9879\n\n      # \u5176\u4ed6\u9009\u9879\n      heading_level: 1                 # \u6807\u9898\u7ea7\u522b\n      line_length: 79                  # \u4ee3\u7801\u884c\u957f\u5ea6\n      paths: []                        # \u989d\u5916\u641c\u7d22\u8def\u5f84\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_8","title":"\u5e38\u7528\u914d\u7f6e\u793a\u4f8b","text":""},{"location":"guide/mkdocstrings-syntax/#1","title":"\u793a\u4f8b 1\uff1a\u663e\u793a\u7c7b\u53ca\u5176\u6240\u6709\u65b9\u6cd5","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n      show_signature_annotations: true\n      merge_init_into_class: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#2","title":"\u793a\u4f8b 2\uff1a\u53ea\u663e\u793a\u7279\u5b9a\u65b9\u6cd5","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      members:\n        - run_all\n        - clean_breadth_search\n        - clean_cited_articles_topic\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#3","title":"\u793a\u4f8b 3\uff1a\u663e\u793a\u6a21\u5757\u53ca\u5176\u6240\u6709\u7c7b\u548c\u51fd\u6570","text":"<pre><code>::: NTRT.data_cleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_submodules: true\n      show_source: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#4-docstring","title":"\u793a\u4f8b 4\uff1a\u4e0d\u663e\u793a\u6ca1\u6709 docstring \u7684\u65b9\u6cd5","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_if_no_docstring: false  # \u6ca1\u6709 docstring \u5c31\u4e0d\u663e\u793a\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#5","title":"\u793a\u4f8b 5\uff1a\u663e\u793a\u7ee7\u627f\u5173\u7cfb","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_bases: true\n      show_inheritance: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_9","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"guide/mkdocstrings-syntax/#_10","title":"\u7ec4\u5408\u591a\u4e2a\u5f15\u7528","text":"<pre><code># \u6570\u636e\u6e05\u6d17\u6a21\u5757\n\n## DataCleaner \u7c7b\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n\n## \u76f8\u5173\u6a21\u578b\n\n::: NTRT.application.NsfcTopicRcmdModels\n    handler: python\n    options:\n      show_root_heading: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_11","title":"\u4f7f\u7528\u522b\u540d","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      heading_level: 2\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_12","title":"\u8fc7\u6ee4\u79c1\u6709\u6210\u5458","text":"<pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      filters:\n        - \"!^_\"  # \u6392\u9664\u4ee5 _ \u5f00\u5934\u7684\u6210\u5458\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_13","title":"\u6a21\u5757\u8def\u5f84\u89c4\u5219","text":""},{"location":"guide/mkdocstrings-syntax/#_14","title":"\u8def\u5f84\u8ba1\u7b97","text":"<p>\u6839\u636e <code>mkdocs.yml</code> \u4e2d\u7684 <code>paths</code> \u914d\u7f6e\uff1a</p> <pre><code>paths: \n  - ../code_liu\n  - ../src\n</code></pre> <p>\u89c4\u5219\uff1a 1. \u4ece <code>paths</code> \u914d\u7f6e\u7684\u76ee\u5f55\u5f00\u59cb\u8ba1\u7b97 2. \u6587\u4ef6\u8def\u5f84\u4e2d\u7684 <code>/</code> \u6216 <code>\\</code> \u66ff\u6362\u4e3a <code>.</code> 3. \u53bb\u6389 <code>.py</code> \u6269\u5c55\u540d</p>"},{"location":"guide/mkdocstrings-syntax/#_15","title":"\u793a\u4f8b","text":"\u6587\u4ef6\u8def\u5f84 \u6a21\u5757\u8def\u5f84 <code>code_liu/NTRT/data_cleaner.py</code> <code>NTRT.data_cleaner</code> <code>code_liu/NTRT/data_cleaner.py</code> \u4e2d\u7684 <code>DataCleaner</code> \u7c7b <code>NTRT.data_cleaner.DataCleaner</code> <code>code_liu/NTRT/application/NsfcTopicRcmdModels.py</code> <code>NTRT.application.NsfcTopicRcmdModels</code> <code>src/spiders/base_spider.py</code> <code>spiders.base_spider</code> <code>src/spiders/base_spider.py</code> \u4e2d\u7684 <code>BaseSpider</code> \u7c7b <code>spiders.base_spider.BaseSpider</code>"},{"location":"guide/mkdocstrings-syntax/#_16","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"guide/mkdocstrings-syntax/#q","title":"Q: \u5982\u4f55\u5f15\u7528\u5d4c\u5957\u7c7b\uff1f","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84.\u5916\u90e8\u7c7b.\u5185\u90e8\u7c7b\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#q_1","title":"Q: \u5982\u4f55\u5f15\u7528\u7c7b\u65b9\u6cd5\uff1f","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84.\u7c7b\u540d.\u65b9\u6cd5\u540d\n</code></pre> <p>\u6ce8\u610f\uff1a\u901a\u5e38\u4e0d\u9700\u8981\u5355\u72ec\u5f15\u7528\u65b9\u6cd5\uff0c\u5f15\u7528\u7c7b\u4f1a\u81ea\u52a8\u663e\u793a\u6240\u6709\u65b9\u6cd5\u3002</p>"},{"location":"guide/mkdocstrings-syntax/#q_2","title":"Q: \u5982\u4f55\u5f15\u7528\u6a21\u5757\u7ea7\u522b\u7684\u51fd\u6570\uff1f","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84.\u51fd\u6570\u540d\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#q_3","title":"Q: \u5982\u4f55\u5f15\u7528\u5b50\u6a21\u5757\uff1f","text":"<pre><code>::: \u6a21\u5757\u8def\u5f84.\u5b50\u6a21\u5757\u540d\n    handler: python\n    options:\n      show_submodules: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#q_4","title":"Q: \u6a21\u5757\u8def\u5f84\u9519\u8bef\u600e\u4e48\u529e\uff1f","text":"<p>\u9519\u8bef\uff1a<code>Could not find 'xxx' in the following paths</code></p> <p>\u89e3\u51b3\uff1a 1. \u68c0\u67e5 <code>mkdocs.yml</code> \u4e2d\u7684 <code>paths</code> \u914d\u7f6e 2. \u786e\u8ba4\u6587\u4ef6\u8def\u5f84\u662f\u5426\u6b63\u786e 3. \u68c0\u67e5\u6a21\u5757\u8def\u5f84\u8ba1\u7b97\u662f\u5426\u6b63\u786e\uff08\u4ece <code>paths</code> \u76ee\u5f55\u5f00\u59cb\uff09</p>"},{"location":"guide/mkdocstrings-syntax/#_17","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"guide/mkdocstrings-syntax/#1_1","title":"1. \u7ec4\u7ec7\u6587\u6863\u7ed3\u6784","text":"<pre><code># \u9879\u76ee API \u53c2\u8003\n\n## \u6838\u5fc3\u7c7b\n\n### DataCleaner\n\n\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u3002\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n      show_signature_annotations: true\n\n## \u8f85\u52a9\u6a21\u5757\n\n### \u6570\u636e\u5e93\u64cd\u4f5c\n\n::: NTRT.base_mysql\n    handler: python\n    options:\n      show_root_heading: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#2_1","title":"2. \u6dfb\u52a0\u63cf\u8ff0","text":"<p>\u5728 <code>::: \u6a21\u5757\u8def\u5f84</code> \u4e4b\u524d\u6dfb\u52a0\u63cf\u8ff0\u6587\u5b57\uff0c\u8ba9\u6587\u6863\u66f4\u6613\u8bfb\uff1a</p> <pre><code>### DataCleaner \u7c7b\n\n\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u3002\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#3_1","title":"3. \u4f7f\u7528\u5408\u9002\u7684\u9009\u9879","text":"<ul> <li>\u516c\u5171 API\uff1a\u663e\u793a\u6240\u6709\u5185\u5bb9\uff0c\u5305\u62ec\u6e90\u4ee3\u7801</li> <li>\u5185\u90e8\u6a21\u5757\uff1a\u53ea\u663e\u793a\u6709 docstring \u7684\u5185\u5bb9</li> <li>\u5927\u578b\u7c7b\uff1a\u53ea\u663e\u793a\u7279\u5b9a\u6210\u5458</li> </ul>"},{"location":"guide/mkdocstrings-syntax/#4","title":"4. \u4fdd\u6301\u4e00\u81f4\u6027","text":"<p>\u5728\u540c\u4e00\u4e2a\u6587\u6863\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u9009\u9879\u914d\u7f6e\uff0c\u4fdd\u6301\u98ce\u683c\u4e00\u81f4\u3002</p>"},{"location":"guide/mkdocstrings-syntax/#_18","title":"\u5b8c\u6574\u793a\u4f8b","text":"<pre><code># NTRT \u9879\u76ee - API \u53c2\u8003\n\n## \u6570\u636e\u6e05\u6d17\u6a21\u5757\n\n### DataCleaner \u7c7b\n\n\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u3002\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n      show_signature_annotations: true\n      merge_init_into_class: true\n      show_if_no_docstring: false\n\n## \u5e94\u7528\u6a21\u5757\n\n### NsfcTopicRcmdModels\n\n\u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350\u76f8\u5173\u6a21\u578b\u6a21\u5757\u3002\n\n::: NTRT.application.NsfcTopicRcmdModels\n    handler: python\n    options:\n      show_root_heading: true\n      show_submodules: true\n\n#### \u4e3b\u8981\u6a21\u578b\u7c7b\n\n- `NsfcTopicRcmdTaskListModel`: \u4efb\u52a1\u5217\u8868\u6a21\u578b\n- `NsfcTopicRcmdTaskTopicListModel`: \u4e3b\u9898\u5217\u8868\u6a21\u578b\n\n::: NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskListModel\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n</code></pre>"},{"location":"guide/mkdocstrings-syntax/#_19","title":"\u53c2\u8003\u8d44\u6e90","text":"<ul> <li>mkdocstrings \u5b98\u65b9\u6587\u6863</li> <li>Python Handler \u9009\u9879</li> <li>\u5de5\u4f5c\u6d41\u7a0b\u8bf4\u660e</li> </ul>"},{"location":"guide/mkdocstrings-workflow/","title":"mkdocstrings \u5de5\u4f5c\u6d41\u7a0b\u8bf4\u660e","text":""},{"location":"guide/mkdocstrings-workflow/#_1","title":"\u5de5\u4f5c\u539f\u7406","text":""},{"location":"guide/mkdocstrings-workflow/#1-mkdocsyml","title":"1. \u914d\u7f6e\u8def\u5f84\uff08mkdocs.yml\uff09","text":"<pre><code>plugins:\n  - mkdocstrings:\n      handlers:\n        python:\n          paths: \n            - ../code_liu  # \u4ee3\u7801\u6839\u76ee\u5f55\n</code></pre> <p>\u4f5c\u7528\uff1a\u544a\u8bc9 mkdocstrings \u5728\u54ea\u91cc\u67e5\u627e Python \u4ee3\u7801\u3002</p>"},{"location":"guide/mkdocstrings-workflow/#2","title":"2. \u6a21\u5757\u8def\u5f84\u8ba1\u7b97\u89c4\u5219","text":"<p>\u89c4\u5219\uff1a\u4ece <code>paths</code> \u914d\u7f6e\u7684\u76ee\u5f55\u5f00\u59cb\uff0c\u6309\u7167 Python \u5305\u7ed3\u6784\u8ba1\u7b97\u6a21\u5757\u8def\u5f84\u3002</p> <p>\u793a\u4f8b\uff1a</p> \u6587\u4ef6\u8def\u5f84 \u6a21\u5757\u8def\u5f84 <code>code_liu/NTRT/data_cleaner.py</code> <code>NTRT.data_cleaner</code> <code>code_liu/NTRT/application/NsfcTopicRcmdModels.py</code> <code>NTRT.application.NsfcTopicRcmdModels</code> <code>code_liu/RCSB_PDB/src/spider/rcsb_pdb/rcsb_pdb_spider.py</code> <code>RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider</code> <p>\u6ce8\u610f\uff1a - \u8def\u5f84\u4e2d\u7684 <code>/</code> \u6216 <code>\\</code> \u66ff\u6362\u4e3a <code>.</code> - \u53bb\u6389 <code>.py</code> \u6269\u5c55\u540d - \u4ece <code>paths</code> \u914d\u7f6e\u7684\u76ee\u5f55\u5f00\u59cb\u8ba1\u7b97</p>"},{"location":"guide/mkdocstrings-workflow/#3-md","title":"3. \u5728 .md \u6587\u4ef6\u4e2d\u5f15\u7528","text":"<p>\u4f7f\u7528 <code>::: \u6a21\u5757\u8def\u5f84</code> \u8bed\u6cd5\uff1a</p> <pre><code>::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n</code></pre>"},{"location":"guide/mkdocstrings-workflow/#4","title":"4. \u6784\u5efa\u65f6\u81ea\u52a8\u751f\u6210","text":"<p>\u8fd0\u884c <code>mkdocs build</code> \u65f6\uff1a 1. mkdocstrings \u8bfb\u53d6 <code>.md</code> \u6587\u4ef6\u4e2d\u7684 <code>::: \u6a21\u5757\u8def\u5f84</code> 2. \u6839\u636e <code>paths</code> \u914d\u7f6e\u627e\u5230\u5bf9\u5e94\u7684 Python \u6587\u4ef6 3. \u89e3\u6790\u4ee3\u7801\uff0c\u63d0\u53d6 docstring\u3001\u7c7b\u3001\u51fd\u6570\u7b49\u4fe1\u606f 4. \u6e32\u67d3\u6210 HTML \u6587\u6863</p>"},{"location":"guide/mkdocstrings-workflow/#_2","title":"\u5b8c\u6574\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"guide/mkdocstrings-workflow/#1","title":"\u6b65\u9aa4 1\uff1a\u914d\u7f6e\u8def\u5f84\uff08\u5df2\u5b8c\u6210\uff09","text":"<p>\u2705 \u5df2\u5728 <code>mkdocs.yml</code> \u4e2d\u914d\u7f6e\uff1a <pre><code>paths: \n  - ../code_liu\n</code></pre></p>"},{"location":"guide/mkdocstrings-workflow/#2-md","title":"\u6b65\u9aa4 2\uff1a\u521b\u5efa .md \u6587\u6863\u6587\u4ef6\uff08\u5df2\u5b8c\u6210\uff09","text":"<p>\u2705 \u5df2\u521b\u5efa\uff1a - <code>docs/projects/ntrt/api.md</code> - <code>docs/projects/rcsb_pdb/api.md</code></p>"},{"location":"guide/mkdocstrings-workflow/#3","title":"\u6b65\u9aa4 3\uff1a\u8fd0\u884c\u6784\u5efa","text":"<pre><code># \u8fdb\u5165 MkDocs \u76ee\u5f55\ncd MkDocs_doc\n\n# \u672c\u5730\u9884\u89c8\uff08\u63a8\u8350\u5148\u6d4b\u8bd5\uff09\nmkdocs serve\n\n# \u6216\u76f4\u63a5\u6784\u5efa\nmkdocs build\n</code></pre>"},{"location":"guide/mkdocstrings-workflow/#4_1","title":"\u6b65\u9aa4 4\uff1a\u67e5\u770b\u7ed3\u679c","text":"<ul> <li>\u672c\u5730\u9884\u89c8\uff1a\u8bbf\u95ee <code>http://127.0.0.1:8000</code></li> <li>\u6784\u5efa\u8f93\u51fa\uff1a\u67e5\u770b <code>MkDocs_doc/site/</code> \u76ee\u5f55</li> </ul>"},{"location":"guide/mkdocstrings-workflow/#_3","title":"\u6a21\u5757\u8def\u5f84\u793a\u4f8b","text":""},{"location":"guide/mkdocstrings-workflow/#ntrt","title":"NTRT \u9879\u76ee","text":"\u6587\u4ef6 \u6a21\u5757\u8def\u5f84 \u5f15\u7528\u8bed\u6cd5 <code>code_liu/NTRT/data_cleaner.py</code> <code>NTRT.data_cleaner</code> <code>::: NTRT.data_cleaner</code> <code>code_liu/NTRT/data_cleaner.py</code> \u4e2d\u7684 <code>DataCleaner</code> \u7c7b <code>NTRT.data_cleaner.DataCleaner</code> <code>::: NTRT.data_cleaner.DataCleaner</code> <code>code_liu/NTRT/application/NsfcTopicRcmdModels.py</code> <code>NTRT.application.NsfcTopicRcmdModels</code> <code>::: NTRT.application.NsfcTopicRcmdModels</code> <code>code_liu/NTRT/base_mysql.py</code> <code>NTRT.base_mysql</code> <code>::: NTRT.base_mysql</code>"},{"location":"guide/mkdocstrings-workflow/#rcsb_pdb","title":"RCSB_PDB \u9879\u76ee","text":"\u6587\u4ef6 \u6a21\u5757\u8def\u5f84 \u5f15\u7528\u8bed\u6cd5 <code>code_liu/RCSB_PDB/src/spider/rcsb_pdb/rcsb_pdb_spider.py</code> <code>RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider</code> <code>::: RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider</code> <code>RcsbAllApiSpider</code> \u7c7b <code>RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider</code> <code>::: RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider</code> <code>code_liu/RCSB_PDB/src/spider/rcsb_pdb/field_filter.py</code> <code>RCSB_PDB.src.spider.rcsb_pdb.field_filter</code> <code>::: RCSB_PDB.src.spider.rcsb_pdb.field_filter</code>"},{"location":"guide/mkdocstrings-workflow/#_4","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"guide/mkdocstrings-workflow/#1_1","title":"\u95ee\u9898 1\uff1a\u627e\u4e0d\u5230\u6a21\u5757","text":"<p>\u9519\u8bef\uff1a<code>Could not find 'NTRT.data_cleaner' in the following paths</code></p> <p>\u89e3\u51b3\uff1a 1. \u68c0\u67e5 <code>paths</code> \u914d\u7f6e\u662f\u5426\u6b63\u786e 2. \u786e\u8ba4\u6587\u4ef6\u8def\u5f84\uff1a<code>code_liu/NTRT/data_cleaner.py</code> \u662f\u5426\u5b58\u5728 3. \u68c0\u67e5\u6a21\u5757\u8def\u5f84\u662f\u5426\u6b63\u786e\uff08\u6ce8\u610f\u5927\u5c0f\u5199\uff09</p>"},{"location":"guide/mkdocstrings-workflow/#2_1","title":"\u95ee\u9898 2\uff1a\u6a21\u5757\u8def\u5f84\u9519\u8bef","text":"<p>\u9519\u8bef\uff1a<code>ModuleNotFoundError</code></p> <p>\u89e3\u51b3\uff1a - \u786e\u4fdd\u4ece <code>paths</code> \u914d\u7f6e\u7684\u76ee\u5f55\u5f00\u59cb\u8ba1\u7b97 - \u68c0\u67e5\u76ee\u5f55\u540d\u662f\u5426\u6b63\u786e\uff08<code>NTRT</code> vs <code>ntrt</code>\uff09 - \u786e\u4fdd Python \u6587\u4ef6\u5728\u6b63\u786e\u7684\u76ee\u5f55\u7ed3\u6784\u4e2d</p>"},{"location":"guide/mkdocstrings-workflow/#3_1","title":"\u95ee\u9898 3\uff1a\u6ca1\u6709\u663e\u793a\u5185\u5bb9","text":"<p>\u53ef\u80fd\u539f\u56e0\uff1a 1. \u7c7b/\u51fd\u6570\u6ca1\u6709 docstring 2. <code>show_if_no_docstring: false</code> \u4e14\u6ca1\u6709 docstring 3. \u6a21\u5757\u8def\u5f84\u9519\u8bef</p> <p>\u89e3\u51b3\uff1a - \u6dfb\u52a0 docstring - \u8bbe\u7f6e <code>show_if_no_docstring: true</code> - \u68c0\u67e5\u6a21\u5757\u8def\u5f84</p>"},{"location":"guide/mkdocstrings-workflow/#_5","title":"\u5feb\u901f\u6d4b\u8bd5","text":""},{"location":"guide/mkdocstrings-workflow/#_6","title":"\u6d4b\u8bd5\u5355\u4e2a\u6a21\u5757","text":"<ol> <li> <p>\u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6 <code>docs/test.md</code>\uff1a <pre><code># \u6d4b\u8bd5\n\n::: NTRT.data_cleaner.DataCleaner\n    handler: python\n    options:\n      show_root_heading: true\n      show_source: true\n</code></pre></p> </li> <li> <p>\u8fd0\u884c\u9884\u89c8\uff1a <pre><code>cd MkDocs_doc\nmkdocs serve\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee <code>http://127.0.0.1:8000/test/</code> \u67e5\u770b\u7ed3\u679c</p> </li> </ol>"},{"location":"guide/mkdocstrings-workflow/#_7","title":"\u9a8c\u8bc1\u6a21\u5757\u8def\u5f84","text":"<p>\u5982\u679c\u4e0d\u786e\u5b9a\u6a21\u5757\u8def\u5f84\uff0c\u53ef\u4ee5\uff1a</p> <ol> <li> <p>\u67e5\u770b\u6587\u4ef6\u7ed3\u6784\uff1a <pre><code># Windows\ntree /F code_liu\n\n# \u6216\u4f7f\u7528 Python\npython -c \"from pathlib import Path; [print(p) for p in Path('code_liu').rglob('*.py')]\"\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5\u5bfc\u5165\uff1a <pre><code># \u5728 Python \u4e2d\u6d4b\u8bd5\nimport sys\nsys.path.insert(0, 'code_liu')\nfrom NTRT.data_cleaner import DataCleaner  # \u5982\u679c\u80fd\u5bfc\u5165\uff0c\u8bf4\u660e\u8def\u5f84\u6b63\u786e\n</code></pre></p> </li> </ol>"},{"location":"guide/mkdocstrings-workflow/#_8","title":"\u4e0b\u4e00\u6b65","text":"<ol> <li>\u2705 \u914d\u7f6e\u8def\u5f84\uff08\u5df2\u5b8c\u6210\uff09</li> <li>\u2705 \u521b\u5efa\u6587\u6863\u6587\u4ef6\uff08\u5df2\u5b8c\u6210\uff09</li> <li>\u23ed\ufe0f \u8fd0\u884c <code>mkdocs serve</code> \u6d4b\u8bd5</li> <li>\u23ed\ufe0f \u6839\u636e\u9700\u8981\u8c03\u6574\u6a21\u5757\u8def\u5f84</li> <li>\u23ed\ufe0f \u63a8\u9001\u5230 GitHub\uff0c\u81ea\u52a8\u90e8\u7f72</li> </ol>"},{"location":"guide/simple-html-tools/","title":"\u7b80\u5355\u7684 HTML \u6587\u6863\u751f\u6210\u5de5\u5177","text":"<p>\u5982\u679c\u4f60\u89c9\u5f97 MkDocs \u7684\u81ea\u52a8\u5316\u592a\u5dee\uff0c\u5199\u7b14\u8bb0\u672c\u8eab\u90fd\u8981\u8d76\u4e0a\u505a\u9879\u76ee\u4e86\uff0c\u8fd9\u91cc\u63a8\u8350\u51e0\u4e2a\u66f4\u7b80\u5355\u3001\u66f4\u81ea\u52a8\u5316\u7684\u5de5\u5177\u3002</p>"},{"location":"guide/simple-html-tools/#_1","title":"\ud83d\ude80 \u63a8\u8350\u5de5\u5177\u5bf9\u6bd4","text":"\u5de5\u5177 \u81ea\u52a8\u5316\u7a0b\u5ea6 \u914d\u7f6e\u590d\u6742\u5ea6 \u6837\u5f0f\u7f8e\u89c2\u5ea6 \u63a8\u8350\u5ea6 pdoc3 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 pdoc \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 pydoc \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50 \u2b50\u2b50 MkDocs \u2b50\u2b50 \u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50"},{"location":"guide/simple-html-tools/#1-pdoc3","title":"1. pdoc3\uff08\u6700\u63a8\u8350\uff09","text":""},{"location":"guide/simple-html-tools/#_2","title":"\u7279\u70b9","text":"<ul> <li>\u2705 \u96f6\u914d\u7f6e\uff1a\u5b89\u88c5\u540e\u76f4\u63a5\u4f7f\u7528</li> <li>\u2705 \u81ea\u52a8\u751f\u6210\uff1a\u76f4\u63a5\u4ece\u4ee3\u7801\u751f\u6210 HTML</li> <li>\u2705 \u6837\u5f0f\u7f8e\u89c2\uff1a\u73b0\u4ee3\u5316\u7684\u754c\u9762</li> <li>\u2705 \u652f\u6301\u591a\u79cd docstring \u98ce\u683c\uff1aGoogle\u3001Sphinx\u3001NumPy</li> <li>\u2705 \u4e00\u952e\u751f\u6210\uff1a\u4e00\u6761\u547d\u4ee4\u641e\u5b9a</li> </ul>"},{"location":"guide/simple-html-tools/#_3","title":"\u5b89\u88c5","text":"<pre><code>pip install pdoc3\n</code></pre>"},{"location":"guide/simple-html-tools/#_4","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"guide/simple-html-tools/#1","title":"\u65b9\u6cd5 1\uff1a\u547d\u4ee4\u884c\uff08\u6700\u7b80\u5355\uff09","text":"<pre><code># \u751f\u6210\u5355\u4e2a\u6a21\u5757\npdoc3 --html --output-dir docs/html NTRT.data_cleaner\n\n# \u751f\u6210\u6574\u4e2a\u5305\npdoc3 --html --output-dir docs/html NTRT\n\n# \u542f\u52a8\u672c\u5730\u670d\u52a1\u5668\uff08\u5b9e\u65f6\u9884\u89c8\uff09\npdoc3 --http :8080 NTRT\n</code></pre>"},{"location":"guide/simple-html-tools/#2python","title":"\u65b9\u6cd5 2\uff1aPython \u811a\u672c\uff08\u5df2\u5728\u9879\u76ee\u4e2d\u521b\u5efa\uff09","text":"<p>\u8fd0\u884c <code>MkDocs_doc/scripts/generate_html_docs.py</code>\uff1a</p> <pre><code># \u4fee\u6539\u914d\u7f6e\nMODULE_PATH = \"NTRT.data_cleaner\"\nOUTPUT_DIR = Path(\"docs/html_docs\")\nUSE_PDOC3 = True\n\n# \u8fd0\u884c\u5373\u53ef\n</code></pre>"},{"location":"guide/simple-html-tools/#3","title":"\u65b9\u6cd5 3\uff1a\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528","text":"<pre><code>import pdoc\n\n# \u751f\u6210 HTML \u5b57\u7b26\u4e32\nhtml = pdoc.html(\"NTRT.data_cleaner\")\n\n# \u6216\u751f\u6210\u5230\u6587\u4ef6\npdoc.pdoc(\"NTRT.data_cleaner\", output_directory=\"docs/html\")\n</code></pre>"},{"location":"guide/simple-html-tools/#_5","title":"\u8f93\u51fa\u793a\u4f8b","text":"<p>\u751f\u6210\u7684 HTML \u5305\u542b\uff1a - \u2705 \u81ea\u52a8\u751f\u6210\u7684\u5bfc\u822a - \u2705 \u7c7b\u548c\u65b9\u6cd5\u5217\u8868 - \u2705 \u5b8c\u6574\u7684 docstring - \u2705 \u6e90\u4ee3\u7801\u94fe\u63a5 - \u2705 \u641c\u7d22\u529f\u80fd</p>"},{"location":"guide/simple-html-tools/#_6","title":"\u4f18\u70b9","text":"<ul> <li>\u5b8c\u5168\u81ea\u52a8\u5316\uff1a\u4e0d\u9700\u8981\u5199\u4efb\u4f55 Markdown</li> <li>\u96f6\u914d\u7f6e\uff1a\u5b89\u88c5\u5373\u7528</li> <li>\u4ee3\u7801\u66f4\u65b0\u81ea\u52a8\u540c\u6b65\uff1a\u91cd\u65b0\u8fd0\u884c\u5373\u53ef</li> <li>\u6837\u5f0f\u73b0\u4ee3\uff1a\u6bd4 pydoc \u597d\u770b\u5f88\u591a</li> </ul>"},{"location":"guide/simple-html-tools/#_7","title":"\u7f3a\u70b9","text":"<ul> <li>\u6837\u5f0f\u4e0d\u5982 MkDocs Material \u4e3b\u9898\u7cbe\u7f8e</li> <li>\u81ea\u5b9a\u4e49\u80fd\u529b\u6709\u9650</li> </ul>"},{"location":"guide/simple-html-tools/#2-pdoc","title":"2. pdoc\uff08\u8f7b\u91cf\u7ea7\uff09","text":""},{"location":"guide/simple-html-tools/#_8","title":"\u7279\u70b9","text":"<ul> <li>\u2705 \u66f4\u8f7b\u91cf</li> <li>\u2705 \u96f6\u914d\u7f6e</li> <li>\u2705 \u7b80\u5355\u6613\u7528</li> </ul>"},{"location":"guide/simple-html-tools/#_9","title":"\u5b89\u88c5","text":"<pre><code>pip install pdoc\n</code></pre>"},{"location":"guide/simple-html-tools/#_10","title":"\u4f7f\u7528","text":"<pre><code>pdoc --html --output-dir docs/html NTRT.data_cleaner\n</code></pre>"},{"location":"guide/simple-html-tools/#3-pydocpython","title":"3. pydoc\uff08Python \u5185\u7f6e\uff09","text":""},{"location":"guide/simple-html-tools/#_11","title":"\u7279\u70b9","text":"<ul> <li>\u2705 \u65e0\u9700\u5b89\u88c5\uff1aPython \u81ea\u5e26</li> <li>\u2705 \u96f6\u914d\u7f6e</li> <li>\u2705 \u6837\u5f0f\u8f83\u57fa\u7840</li> </ul>"},{"location":"guide/simple-html-tools/#_12","title":"\u4f7f\u7528","text":"<pre><code># \u751f\u6210 HTML\npython -m pydoc -w NTRT.data_cleaner\n\n# \u542f\u52a8\u670d\u52a1\u5668\npython -m pydoc -p 8080\n</code></pre>"},{"location":"guide/simple-html-tools/#4","title":"4. \u5feb\u901f\u5bf9\u6bd4","text":""},{"location":"guide/simple-html-tools/#mkdocs","title":"MkDocs\uff08\u5f53\u524d\u65b9\u6848\uff09","text":"<p>\u4f18\u70b9\uff1a - \u6837\u5f0f\u6700\u7cbe\u7f8e - \u529f\u80fd\u6700\u5f3a\u5927 - \u652f\u6301\u641c\u7d22\u3001\u5bfc\u822a\u7b49</p> <p>\u7f3a\u70b9\uff1a - \u274c \u9700\u8981\u5199 Markdown \u6587\u4ef6 - \u274c \u9700\u8981\u914d\u7f6e mkdocs.yml - \u274c \u9700\u8981\u4e86\u89e3 mkdocstrings \u8bed\u6cd5 - \u274c \u81ea\u52a8\u5316\u7a0b\u5ea6\u4f4e</p>"},{"location":"guide/simple-html-tools/#pdoc3","title":"pdoc3\uff08\u63a8\u8350\u66ff\u4ee3\u65b9\u6848\uff09","text":"<p>\u4f18\u70b9\uff1a - \u2705 \u5b8c\u5168\u81ea\u52a8\u5316\uff1a\u4e00\u6761\u547d\u4ee4\u751f\u6210 - \u2705 \u96f6\u914d\u7f6e\uff1a\u65e0\u9700\u914d\u7f6e\u6587\u4ef6 - \u2705 \u4ee3\u7801\u5373\u6587\u6863\uff1a\u4ee3\u7801\u66f4\u65b0\uff0c\u6587\u6863\u81ea\u52a8\u66f4\u65b0 - \u2705 \u7b80\u5355\u6613\u7528\uff1a\u4e0d\u9700\u8981\u5199 Markdown</p> <p>\u7f3a\u70b9\uff1a - \u6837\u5f0f\u4e0d\u5982 MkDocs Material - \u81ea\u5b9a\u4e49\u80fd\u529b\u6709\u9650</p>"},{"location":"guide/simple-html-tools/#_13","title":"\ud83c\udfaf \u63a8\u8350\u65b9\u6848","text":""},{"location":"guide/simple-html-tools/#_14","title":"\u5982\u679c\u4f60\u60f3\u8981\uff1a","text":"<ol> <li> <p>\u6700\u7b80\u5355\u7684\u65b9\u6848 \u2192 \u4f7f\u7528 pdoc3 <pre><code>pip install pdoc3\npdoc3 --html --output-dir docs/html NTRT\n</code></pre></p> </li> <li> <p>\u6700\u7cbe\u7f8e\u7684\u65b9\u6848 \u2192 \u7ee7\u7eed\u4f7f\u7528 MkDocs\uff08\u4f46\u9700\u8981\u66f4\u591a\u914d\u7f6e\uff09</p> </li> <li> <p>\u6298\u4e2d\u65b9\u6848 \u2192 \u4f7f\u7528 pdoc3 \u751f\u6210 HTML + \u624b\u52a8\u6574\u7406\u91cd\u8981\u6587\u6863</p> </li> </ol>"},{"location":"guide/simple-html-tools/#_15","title":"\ud83d\udcdd \u5b9e\u9645\u4f7f\u7528\u793a\u4f8b","text":""},{"location":"guide/simple-html-tools/#pdoc3_1","title":"\u4f7f\u7528 pdoc3 \u751f\u6210\u6587\u6863","text":"<pre><code># 1. \u5b89\u88c5\npip install pdoc3\n\n# 2. \u751f\u6210\u6587\u6863\uff08\u4e00\u6761\u547d\u4ee4\uff09\npdoc3 --html --output-dir docs/html NTRT\n\n# 3. \u67e5\u770b\u7ed3\u679c\n# \u6253\u5f00 docs/html/NTRT/index.html\n</code></pre>"},{"location":"guide/simple-html-tools/#_16","title":"\u4f7f\u7528\u9879\u76ee\u4e2d\u7684\u811a\u672c","text":"<ol> <li>\u6253\u5f00 <code>MkDocs_doc/scripts/generate_html_docs.py</code></li> <li>\u4fee\u6539\u914d\u7f6e\uff1a    <pre><code>MODULE_PATH = \"NTRT.data_cleaner\"\nOUTPUT_DIR = Path(\"docs/html_docs\")\n</code></pre></li> <li>\u5728 PyCharm \u4e2d\u8fd0\u884c</li> </ol>"},{"location":"guide/simple-html-tools/#_17","title":"\ud83d\udd04 \u5de5\u4f5c\u6d41\u7a0b\u5bf9\u6bd4","text":""},{"location":"guide/simple-html-tools/#mkdocs_1","title":"MkDocs \u5de5\u4f5c\u6d41\u7a0b","text":"<pre><code>\u5199\u4ee3\u7801 \u2192 \u5199 Markdown \u2192 \u914d\u7f6e mkdocs.yml \u2192 \n\u8fd0\u884c\u811a\u672c\u751f\u6210\u8bed\u6cd5 \u2192 mkdocs build \u2192 \u67e5\u770b\u6587\u6863\n</code></pre> <p>\u6b65\u9aa4\u591a\uff0c\u914d\u7f6e\u590d\u6742</p>"},{"location":"guide/simple-html-tools/#pdoc3_2","title":"pdoc3 \u5de5\u4f5c\u6d41\u7a0b","text":"<pre><code>\u5199\u4ee3\u7801 \u2192 pdoc3 --html \u2192 \u67e5\u770b\u6587\u6863\n</code></pre> <p>\u4e24\u6b65\u641e\u5b9a\uff01</p>"},{"location":"guide/simple-html-tools/#_18","title":"\ud83d\udca1 \u5efa\u8bae","text":"<p>\u5982\u679c\u4f60\u89c9\u5f97 MkDocs \u592a\u590d\u6742\uff0c\u53ef\u4ee5\uff1a</p> <ol> <li>\u77ed\u671f\u65b9\u6848\uff1a\u4f7f\u7528 pdoc3 \u5feb\u901f\u751f\u6210 HTML \u6587\u6863</li> <li>\u957f\u671f\u65b9\u6848\uff1a\u7ee7\u7eed\u4f7f\u7528 MkDocs\uff0c\u4f46\u7b80\u5316\u6d41\u7a0b</li> <li>\u53ea\u7ef4\u62a4 <code>api.md</code>\uff08\u81ea\u52a8\u751f\u6210\uff09</li> <li>\u5176\u4ed6\u6587\u6863\u624b\u52a8\u7f16\u5199</li> </ol> <p>\u6216\u8005\u6df7\u5408\u4f7f\u7528\uff1a - \u4f7f\u7528 pdoc3 \u751f\u6210\u5b8c\u6574\u7684 API \u6587\u6863\uff08HTML\uff09 - \u4f7f\u7528 MkDocs \u751f\u6210\u9879\u76ee\u6982\u8ff0\u548c\u4f7f\u7528\u6307\u5357\uff08Markdown\uff09</p>"},{"location":"guide/simple-html-tools/#_19","title":"\ud83d\udcda \u76f8\u5173\u8d44\u6e90","text":"<ul> <li>pdoc3 \u5b98\u65b9\u6587\u6863</li> <li>pdoc \u5b98\u65b9\u6587\u6863</li> <li>\u9879\u76ee\u4e2d\u7684\u751f\u6210\u811a\u672c\uff1a<code>MkDocs_doc/scripts/generate_html_docs.py</code></li> </ul>"},{"location":"guide/advanced/","title":"\u9ad8\u7ea7\u4e3b\u9898","text":"<p>\u8fd9\u91cc\u5305\u542b\u4e86\u9ad8\u7ea7\u5f00\u53d1\u4e3b\u9898\u3002</p>"},{"location":"guide/advanced/#_2","title":"\u4e3b\u9898\u5217\u8868","text":"<ul> <li>\u6027\u80fd\u4f18\u5316 - \u6027\u80fd\u4f18\u5316\u6280\u5de7</li> </ul>"},{"location":"guide/advanced/performance/","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"guide/advanced/performance/#_2","title":"\u4f18\u5316\u6280\u5de7","text":"<ol> <li>\u4f7f\u7528\u6279\u91cf\u5904\u7406</li> <li>\u4f18\u5316\u6570\u636e\u5e93\u67e5\u8be2</li> <li>\u7f13\u5b58\u5e38\u7528\u6570\u636e</li> </ol>"},{"location":"projects/","title":"\u9879\u76ee\u6587\u6863","text":"<p>\u9879\u76ee\u6587\u6863\u4e2d\u5fc3\u6db5\u76d6\u6240\u6709\u5728\u7814/\u5df2\u90e8\u7f72\u9879\u76ee\u7684\u77e5\u8bc6\u8d44\u4ea7\uff0c\u7edf\u4e00\u5165\u53e3\u3001\u7edf\u4e00\u7ed3\u6784\u3001\u7edf\u4e00\u6307\u5f15\u3002</p> <p>\u6bcf\u4e2a\u9879\u76ee\u9ed8\u8ba4\u5305\u542b\u4e5d\u5927\u6a21\u5757\uff1a\u4ece\u201c\u6982\u8ff0\u201d\u5230\u201c\u66f4\u65b0\u65e5\u5fd7\u201d\uff0c\u8986\u76d6\u7814\u53d1\u3001\u90e8\u7f72\u3001\u8fd0\u7ef4\u7684\u5168\u751f\u547d\u5468\u671f\u3002\u4ee5\u4e0b\u5361\u7247\u63d0\u4f9b\u5feb\u901f\u8df3\u8f6c\u3002</p> 2 \u4e2a\u91cd\u70b9\u9879\u76ee 18+ \u6a21\u5757 \u7edf\u4e00\u6587\u6863\u6a21\u677f"},{"location":"projects/#_2","title":"\u9879\u76ee\u5217\u8868","text":"<p>\u6570\u636e\u6e05\u6d17 \u00b7 \u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350</p> NTRT \u9879\u76ee Data Cleaner <p>\u56f4\u7ed5 `DataCleaner`\u3001`BaseCRUD`\u3001`cleaning_plan` \u7684\u6279\u91cf\u6e05\u6d17\u6d41\u6c34\u7ebf\uff0c\u805a\u7126\u6570\u636e\u5e93\u540c\u6b65\u3001\u5b57\u6bb5\u6807\u51c6\u5316\u4e0e\u8c03\u5ea6\u96c6\u6210\u3002</p> \u6700\u8fd1\u66f4\u65b0 <p>2025-01-10</p> \u8d1f\u8d23\u4eba <p>LZD \u00b7 \u6570\u636e\u5efa\u8bbe\u7ec4</p> \u72b6\u6001 <p>\u7a33\u5b9a\u8fd0\u884c\u4e2d</p> <p>\u722c\u866b \u00b7 RCSB PDB</p> RCSB PDB \u9879\u76ee Crawler <p>\u57fa\u4e8e Scrapy + FieldFilter + Pipeline + Redis \u7684\u86cb\u767d\u8d28\u6570\u636e\u5e93\u91c7\u96c6\u65b9\u6848\uff0c\u63d0\u4f9b Playwright \u4e2d\u95f4\u4ef6\u4e0e\u4efb\u52a1\u76d1\u63a7\u3002</p> \u6700\u8fd1\u66f4\u65b0 <p>2025-01-05</p> \u8d1f\u8d23\u4eba <p>HJL \u00b7 \u6570\u636e\u5efa\u8bbe\u7ec4</p> \u72b6\u6001 <p>\u6301\u7eed\u8fed\u4ee3</p>"},{"location":"projects/#_3","title":"\u6dfb\u52a0\u65b0\u9879\u76ee","text":"<ol> <li>\u5728 <code>docs/projects/</code> \u4e0b\u521b\u5efa\u9879\u76ee\u76ee\u5f55\uff0c\u5e76\u590d\u5236\u4e0a\u8ff0\u4e5d\u4e2a\u6a21\u677f\u6587\u4ef6\u3002</li> <li>\u6839\u636e\u5b9e\u9645\u5185\u5bb9\u586b\u5199 Markdown\uff0c\u6216\u8fd0\u884c\u811a\u672c\u81ea\u52a8\u751f\u6210 API/\u793a\u4f8b\u7ae0\u8282\u3002</li> <li>\u66f4\u65b0 <code>mkdocs.yml</code> \u4e2d \u201c\u9879\u76ee\u6587\u6863\u201d \u7684 <code>nav</code>\uff0c\u4fdd\u6301\u540d\u79f0\u4e0e\u987a\u5e8f\u7edf\u4e00\u3002</li> <li>\u5728 <code>projects/index.md</code> \u4e2d\u589e\u52a0\u5bf9\u5e94\u5361\u7247\uff0c\u4f7f\u9996\u9875\u5bfc\u822a\u4fdd\u6301\u4e00\u81f4\u3002</li> </ol>"},{"location":"projects/ntrt/","title":"NTRT \u9879\u76ee\u6982\u8ff0","text":"<p>NTRT\uff08National Science Foundation Topic Recommendation\uff09\u9879\u76ee\u662f\u4e00\u5957\u56f4\u7ed5\u56fd\u81ea\u7136\u9009\u9898\u63a8\u8350\u6570\u636e\u7684\u6e05\u6d17\u4e0e\u6807\u51c6\u5316\u5de5\u5177\u94fe\u3002\u5b83\u4ee5 <code>DataCleaner</code> \u4e3a\u6838\u5fc3\uff0c\u7ed3\u5408 SQLAlchemy ORM\u3001JSON \u89c4\u5219\u4e0e\u6279\u5904\u7406\u7b56\u7565\uff0c\u5b9e\u73b0 <code>breadth_search</code>\u3001<code>cited_articles</code> \u7b49\u590d\u6742\u5b57\u6bb5\u7684\u62c6\u89e3\u3001\u8f6c\u6362\u4e0e\u56de\u5199\u3002</p>"},{"location":"projects/ntrt/#_1","title":"\u9879\u76ee\u5b9a\u4f4d","text":"<ul> <li>\u670d\u52a1\u5bf9\u8c61\uff1a\u56fd\u81ea\u7136\u7533\u62a5\u8f85\u52a9\u7cfb\u7edf\u3001\u5b66\u672f\u63a8\u8350\u5e73\u53f0</li> <li>\u6838\u5fc3\u76ee\u6807\uff1a\u5c06\u591a\u6e90 JSON \u5b57\u6bb5\u8f6c\u6362\u6210\u7ed3\u6784\u5316\u3001\u53ef\u68c0\u7d22\u7684\u6570\u636e</li> <li>\u4e3b\u8981\u80fd\u529b\uff1a</li> <li>\u6279\u91cf\u626b\u63cf\u5e76\u7b5b\u9009\u9700\u8981\u6e05\u6d17\u7684\u8bb0\u5f55</li> <li>\u9488\u5bf9\u4e0d\u540c\u5b57\u6bb5\u5e94\u7528\u5dee\u5f02\u5316\u5904\u7406\u903b\u8f91</li> <li>\u7edf\u4e00\u5199\u5165 MySQL\uff0c\u4fdd\u8bc1\u4e8b\u52a1\u4e00\u81f4\u6027</li> <li>\u7075\u6d3b\u5207\u6362\u4e0d\u540c\u6570\u636e\u5e93\u3001\u6279\u6b21\u5927\u5c0f\u4e0e\u5904\u7406\u7b56\u7565</li> </ul>"},{"location":"projects/ntrt/#_2","title":"\u6587\u6863\u5bfc\u822a","text":"\u6587\u6863 \u8bf4\u660e \u5feb\u901f\u5f00\u59cb \u73af\u5883\u51c6\u5907\u3001\u4f9d\u8d56\u5b89\u88c5\u3001\u4efb\u52a1\u542f\u52a8 \u67b6\u6784\u8bbe\u8ba1 \u7ec4\u4ef6\u5173\u7cfb\u3001\u6570\u636e\u6d41\u3001\u6279\u5904\u7406\u7b56\u7565 \u7cfb\u7edf\u5168\u666f \u57fa\u4e8e mkdocstrings \u7684 API \u53c2\u8003 \u6838\u5fc3\u6a21\u5757 \u5173\u952e\u6a21\u5757\u4e0e\u6269\u5c55\u70b9\u89e3\u6790 \u914d\u7f6e\u8bf4\u660e \u6570\u636e\u5e93/\u6279\u6b21/\u65e5\u5fd7\u7b49\u914d\u7f6e\u9879\u8bf4\u660e \u4f7f\u7528\u793a\u4f8b \u5e38\u89c1\u8fd0\u884c\u573a\u666f\u4e0e\u4ee3\u7801\u7247\u6bb5 \u6545\u969c\u6392\u67e5 \u6570\u636e\u5e93\u3001JSON\u3001\u4e8b\u52a1\u76f8\u5173\u95ee\u9898\u6392\u67e5 \u66f4\u65b0\u65e5\u5fd7 \u7248\u672c\u5386\u53f2\u3001\u529f\u80fd\u53d8\u66f4"},{"location":"projects/ntrt/#_3","title":"\u7cfb\u7edf\u4f18\u52bf","text":"<ul> <li>ORM + \u6279\u5904\u7406\uff1a\u5728 SQLAlchemy \u6846\u67b6\u4e0b\u5c01\u88c5\u901a\u7528 <code>BaseCRUD</code>\uff0c\u4fdd\u8bc1\u589e\u5220\u6539\u67e5\u7edf\u4e00\u3002</li> <li>\u5b57\u6bb5\u7ea7\u7b56\u7565\uff1a<code>Field processor</code> \u7ec6\u7c92\u5ea6\u5904\u7406\u9879\u76ee/\u6587\u7ae0/\u5f15\u7528\u7b49\u4e0d\u540c\u5b57\u6bb5\u3002</li> <li>\u5f39\u6027\u6279\u6b21\uff1a\u901a\u8fc7 <code>BATCH_SIZE</code> \u63a7\u5236\u904d\u5386\u4e0e\u66f4\u65b0\u89c4\u6a21\uff0c\u517c\u987e\u6027\u80fd\u4e0e\u5b89\u5168\u3002</li> <li>\u591a\u6570\u636e\u5e93\u9002\u914d\uff1a<code>session_dict</code> \u652f\u6301\u4e00\u6b21\u6027\u521b\u5efa\u591a\u5b9e\u4f8b\uff0c\u8fd0\u884c\u671f\u81ea\u7531\u5207\u6362\u3002</li> </ul>"},{"location":"projects/ntrt/#_4","title":"\u76ee\u5f55\u901f\u89c8","text":"<pre><code>code_liu/NTRT/\n\u251c\u2500\u2500 data_cleaner.py          # \u6e05\u6d17\u5165\u53e3\uff0c\u5c01\u88c5\u5b8c\u6574\u6d41\u7a0b\n\u251c\u2500\u2500 base_mysql.py            # SQLAlchemy \u5c01\u88c5\u4e0e CRUD \u57fa\u7c7b\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 settings.py          # \u6570\u636e\u5e93/\u6279\u6b21/\u73af\u5883\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 NsfcTopicRcmdModels.py\n\u2502   \u2514\u2500\u2500 ChatPaperPolishTaskList.py\n\u251c\u2500\u2500 *.json / *.md            # \u4e1a\u52a1\u89c4\u5219\u3001\u5b57\u6bb5\u5bf9\u7167\u3001\u8c03\u7814\u7b14\u8bb0\n\u2514\u2500\u2500 application/.venv        # \u53ef\u9009\u7684\u72ec\u7acb\u865a\u62df\u73af\u5883\n</code></pre> <p>\u4e1a\u52a1\u80cc\u666f\u3001\u5b57\u6bb5\u91ca\u4e49\u7b49\u53ef\u53c2\u8003\u6839\u76ee\u5f55\u4e0b\u7684\u300c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u8bf4\u660e.md\u300d\u300c\u6587\u4ef6\u8c03\u7528\u5173\u7cfb\u8bf4\u660e.md\u300d\u7b49\u624b\u518c\u3002</p>"},{"location":"projects/ntrt/#_5","title":"\u4e0b\u4e00\u6b65","text":"<ol> <li>\u9605\u8bfb \u5feb\u901f\u5f00\u59cb\uff0c\u5b8c\u6210\u73af\u5883\u521d\u59cb\u5316</li> <li>\u6839\u636e \u914d\u7f6e\u8bf4\u660e \u8bbe\u5b9a\u6570\u636e\u5e93\u4e0e\u6279\u6b21\u53c2\u6570</li> <li>\u53c2\u7167 \u4f7f\u7528\u793a\u4f8b \u542f\u52a8\u6e05\u6d17\u4efb\u52a1</li> <li>\u5982\u679c\u9700\u8981\u5b9a\u5236\u65b0\u7684\u5b57\u6bb5\u5904\u7406\u903b\u8f91\uff0c\u8bf7\u5148\u67e5\u9605 \u6838\u5fc3\u6a21\u5757</li> </ol>"},{"location":"projects/ntrt/api/","title":"\u7cfb\u7edf\u5168\u666f - API \u53c2\u8003","text":"<p>\u672c\u6587\u6863\u4f9d\u6258 <code>mkdocstrings</code> \u81ea\u52a8\u4ece\u6e90\u7801\u6536\u96c6 docstring\uff0c\u5c55\u793a NTRT \u9879\u76ee\u7684\u6838\u5fc3\u7c7b\u4e0e\u65b9\u6cd5\u3002\u4ee3\u7801\u66f4\u65b0\u540e\uff0c\u65e0\u9700\u624b\u5de5\u7ef4\u62a4\uff0c\u53ea\u8981\u91cd\u65b0\u6784\u5efa\u5373\u53ef\u83b7\u5f97\u6700\u65b0 API\u3002</p>"},{"location":"projects/ntrt/api/#_1","title":"\u6570\u636e\u6e05\u6d17\u8c03\u5ea6","text":""},{"location":"projects/ntrt/api/#datacleaner","title":"DataCleaner","text":""},{"location":"projects/ntrt/api/#NTRT.data_cleaner.DataCleaner","title":"<code>NTRT.data_cleaner.DataCleaner()</code>","text":"<p>\u6570\u636e\u6e05\u6d17\u7c7b\uff0c\u8d1f\u8d23\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u6570\u636e\u6e05\u6d17\u6d41\u7a0b</p> <p>\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668\u3002</p> <p>:author: LZD :date: 2025/11/10</p> Source code in <code>NTRT\\data_cleaner.py</code> <pre><code>def __init__(self):\n    \"\"\"\u521d\u59cb\u5316\u6570\u636e\u6e05\u6d17\u5668\u3002\n\n    :author: LZD\n    :date: 2025/11/10\n    \"\"\"\n    self.db_key = DEFAULT_DB_KEY\n    self.batch_size = BATCH_SIZE\n    try:\n        self._task_list_model = NsfcTopicRcmdTaskListModel()\n        self._topic_list_model = NsfcTopicRcmdTaskTopicListModel()\n        self._app_info_model = NsfcTopicRcmdTaskAppInfoModel()\n    except Exception as exc:\n        raise RuntimeError(f\"\u521d\u59cb\u5316\u6570\u636e\u6a21\u578b\u5931\u8d25: {exc}\") from exc\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.data_cleaner.DataCleaner.run","title":"<code>run()</code>","text":"<p>\u6267\u884c\u6240\u6709\u6e05\u6d17\u4efb\u52a1\u3002</p> <p>:author: LZD :date: 2025/11/10</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\data_cleaner.py</code> <pre><code>def run(self):\n    \"\"\"\u6267\u884c\u6240\u6709\u6e05\u6d17\u4efb\u52a1\u3002\n\n    :author: LZD\n    :date: 2025/11/10\n    \"\"\"\n    session = self._open_session()\n    try:\n        print(\"=\" * 60)\n        print(\"\u5f00\u59cb\u6267\u884c\u6570\u636e\u6e05\u6d17\u4efb\u52a1\")\n        print(f\"\u6570\u636e\u5e93: {self.db_key}\")\n        print(\"=\" * 60)\n        print()\n\n        cleaning_plan = [\n            {\n                'model_class': NsfcTopicRcmdTaskListModel,\n                'field_name': 'breadth_search',\n                'extra_filters': [\n                    or_(\n                        func.json_contains_path(\n                            NsfcTopicRcmdTaskListModel.model.breadth_search,\n                            'one',\n                            '$.article_addition'\n                        ) == 1,\n                        func.json_contains_path(\n                            NsfcTopicRcmdTaskListModel.model.breadth_search,\n                            'one',\n                            '$.project_addition'\n                        ) == 1\n                    )\n                ],\n                'processor': self._process_breadth_search,\n                'display_name': 'breadth_search \u5b57\u6bb5',\n            },\n            {\n                'model_class': NsfcTopicRcmdTaskTopicListModel,\n                'field_name': 'cited_articles',\n                'extra_filters': [\n                    func.json_type(\n                        NsfcTopicRcmdTaskTopicListModel.model.cited_articles\n                    ) == 'ARRAY'\n                ],\n                'processor': self._process_cited_articles,\n                'display_name': '\u4e3b\u9898\u5217\u8868\u8868\u7684 cited_articles \u5b57\u6bb5',\n            },\n            {\n                'model_class': NsfcTopicRcmdTaskAppInfoModel,\n                'field_name': 'cited_articles',\n                'extra_filters': [\n                    func.json_type(\n                        NsfcTopicRcmdTaskAppInfoModel.model.cited_articles\n                    ) == 'ARRAY'\n                ],\n                'processor': self._process_cited_articles,\n                'display_name': '\u5e94\u7528\u4fe1\u606f\u8868\u7684 cited_articles \u5b57\u6bb5',\n            },\n        ]\n\n        for task in cleaning_plan:\n            self._clean_dataset(\n                session=session,\n                model_class=task['model_class'],\n                field_name=task['field_name'],\n                extra_filters=task['extra_filters'],\n                processor=task['processor'],\n                display_name=task['display_name'],\n            )\n\n        print(\"=\" * 60)\n        print(\"\u6240\u6709\u6570\u636e\u6e05\u6d17\u4efb\u52a1\u5b8c\u6210\uff01\")\n        print(\"=\" * 60)\n    finally:\n        session.close()\n</code></pre>"},{"location":"projects/ntrt/api/#orm","title":"ORM \u4e0e\u6570\u636e\u5e93\u5c01\u88c5","text":""},{"location":"projects/ntrt/api/#basecrud-session_dict","title":"BaseCRUD &amp; session_dict","text":""},{"location":"projects/ntrt/api/#NTRT.base_mysql","title":"<code>NTRT.base_mysql</code>","text":""},{"location":"projects/ntrt/api/#NTRT.base_mysql--time-2023811-955","title":"@Time    : 2023/8/11 9:55","text":""},{"location":"projects/ntrt/api/#NTRT.base_mysql--user-mabin","title":"@User  : Mabin","text":""},{"location":"projects/ntrt/api/#NTRT.base_mysql--descriotion-mysql","title":"@Descriotion  :MySQL\u6570\u636e\u5e93\u8fde\u63a5\u5de5\u5177","text":""},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD","title":"<code>BaseCRUD</code>","text":""},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.batch_create_info","title":"<code>batch_create_info(db, create_list, **extra_param)</code>","text":"<p>\u6279\u91cf\u521b\u65b0\u6570\u636e\u4e0d\u5224\u91cd :param db: :param list create_list:\u5f85\u63d2\u5165\u7684\u6570\u636e :param extra_param: :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def batch_create_info(self, db, create_list, **extra_param):\n    \"\"\"\n    \u6279\u91cf\u521b\u65b0\u6570\u636e\u4e0d\u5224\u91cd\n    :param db:\n    :param list create_list:\u5f85\u63d2\u5165\u7684\u6570\u636e\n    :param extra_param:\n    :return:\n    \"\"\"\n    if not create_list:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u63d2\u5165\u6570\u636e\n    db.bulk_insert_mappings(self.model, create_list)\n    db.commit()\n\n    return {\"result\": True, \"msg\": \"ok\uff01\"}\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.create_single","title":"<code>create_single(db, create_data, **extra_param)</code>","text":"<p>\u5355\u6761\u521b\u5efa\u4fe1\u606f\u4e0d\u5224\u91cd :param db: :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5     auto_field=&gt;\"\u8fd4\u56de\u7684\u81ea\u589eID\u5b57\u6bb5\" :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def create_single(self, db, create_data, **extra_param):\n    \"\"\"\n    \u5355\u6761\u521b\u5efa\u4fe1\u606f\u4e0d\u5224\u91cd\n    :param db:\n    :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n        auto_field=&gt;\"\u8fd4\u56de\u7684\u81ea\u589eID\u5b57\u6bb5\"\n    :return:\n    \"\"\"\n    if not create_data:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u83b7\u53d6\u989d\u5916\u5b57\u6bb5\n    auto_field = extra_param.get(\"auto_field\", None)\n\n    create_res = self.model(**create_data)\n    db.add(create_res)\n    db.commit()\n    db.refresh(create_res)\n\n    # \u83b7\u53d6\u81ea\u589eID\n    auto_field_val = None\n    if auto_field:\n        auto_field_val = getattr(create_res, auto_field)\n\n    return {\"result\": True, \"msg\": \"ok\uff01\", \"data\": auto_field_val}\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.create_single_info","title":"<code>create_single_info(db, create_data, create_cond, **extra_param)</code>","text":"<p>\u5355\u6761\u521b\u5efa\u4fe1\u606f :param db: :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e :param list create_cond:\u6570\u636e\u67e5\u8be2\u6761\u4ef6 :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5 :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def create_single_info(self, db, create_data, create_cond, **extra_param):\n    \"\"\"\n    \u5355\u6761\u521b\u5efa\u4fe1\u606f\n    :param db:\n    :param dict create_data:\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6570\u636e\n    :param list create_cond:\u6570\u636e\u67e5\u8be2\u6761\u4ef6\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n    :return:\n    \"\"\"\n    if not all([create_data, create_cond]):\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    existing_record = db.query(self.model).filter(*create_cond).first()\n    if existing_record:\n        return {\"result\": False, \"msg\": \"\u6570\u636e\u5df2\u7ecf\u5b58\u5728\uff01\"}\n\n    # \u4e0d\u5b58\u5728\uff0c\u5219\u6267\u884c\u521b\u5efa\n    create_res = self.model(**create_data)\n    db.add(create_res)\n\n    # \u5224\u65ad\u662f\u5426\u63d0\u4ea4\n    if extra_param.get(\"is_commit\", True):\n        db.commit()\n        db.refresh(create_res)\n\n    return {\"result\": True, \"msg\": \"ok\uff01\"}\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.get_count_info","title":"<code>get_count_info(db, where=None)</code>","text":"<p>\u83b7\u53d6\u6570\u636e\u5e93\u67e5\u8be2\u6570\u91cf :author Mabin :param db: :param where: :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def get_count_info(self, db, where=None):\n    \"\"\"\n    \u83b7\u53d6\u6570\u636e\u5e93\u67e5\u8be2\u6570\u91cf\n    :author Mabin\n    :param db:\n    :param where:\n    :return:\n    \"\"\"\n    if where:\n        # \u7ec4\u7ec7\u67e5\u8be2\u6761\u4ef6\n        query_count = db.query(self.model).filter(*where).count()\n    else:\n        query_count = db.query(self.model).count()\n\n    # \u8fd4\u56de\u67e5\u8be2\u7ed3\u679c\n    return query_count\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.get_list_info","title":"<code>get_list_info(db, field, where=None, first_row=None, list_rows=None, order=None, **extra_param)</code>","text":"<p>\u83b7\u53d6\u5217\u8868\u4fe1\u606f :author: Hjl :param db: :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column] :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10] :param int|None first_row:\u8d77\u59cb\u884c\u6570 :param int|None list_rows:\u6bcf\u9875\u663e\u793a\u884c\u6570 :param tuple order:\u6392\u5e8f\u5b57\u6bb5 :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5     q_list=&gt;Q\u67e5\u8be2\u5217\u8868\uff08\u8be5\u67e5\u8be2\u7528\u4e8e\u5b9e\u73b0or\u3001and\uff09</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def get_list_info(self, db, field, where=None, first_row=None, list_rows=None, order=None, **extra_param):\n    \"\"\"\n    \u83b7\u53d6\u5217\u8868\u4fe1\u606f\n    :author: Hjl\n    :param db:\n    :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column]\n    :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10]\n    :param int|None first_row:\u8d77\u59cb\u884c\u6570\n    :param int|None list_rows:\u6bcf\u9875\u663e\u793a\u884c\u6570\n    :param tuple order:\u6392\u5e8f\u5b57\u6bb5\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n        q_list=&gt;Q\u67e5\u8be2\u5217\u8868\uff08\u8be5\u67e5\u8be2\u7528\u4e8e\u5b9e\u73b0or\u3001and\uff09\n    \"\"\"\n    if not field:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    query = db.query(self.model).with_entities(*field)\n\n    if where:\n        query = query.filter(*where)\n\n    # \u52a0\u5165\u6392\u5e8f\u6761\u4ef6\n    if order:\n        query = query.order_by(*order)\n\n    # \u52a0\u5165\u5206\u9875\u4fe1\u606f\n    if first_row:\n        query = query.offset(first_row)\n    if list_rows:\n        query = query.limit(list_rows)\n\n    # \u5224\u65ad\u6570\u636e\u662f\u5426\u5b58\u5728\n    query_res = query.all()\n    if not query_res:\n        return {\"result\": True, \"msg\": \"\u76f8\u5173\u6570\u636e\u4e0d\u5b58\u5728\uff01\", \"data\": []}\n\n    # \u7ec4\u7ec7\u8fd4\u56de\u6570\u636e\n    buf = []\n    for query_item in query_res:\n        buf.append(query_item._mapping)\n\n    return {\"result\": True, \"msg\": \"ok\uff01\", \"data\": buf}\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.get_single_info","title":"<code>get_single_info(db, field, where=None, **extra_param)</code>","text":"<p>\u5355\u6761\u67e5\u8be2\u4fe1\u606f :author Hjl :param db: :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column] :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10] :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5     order=&gt;\u67e5\u8be2\u6761\u4ef6 :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def get_single_info(self, db, field, where=None, **extra_param):\n    \"\"\"\n    \u5355\u6761\u67e5\u8be2\u4fe1\u606f\n    :author Hjl\n    :param db:\n    :param list field:\u67e5\u8be2\u5b57\u6bb5 [model.Column]\n    :param list where:\u67e5\u8be2\u6761\u4ef6 [MyModel.field1 == 'some_value', MyModel.field2 &gt; 10]\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n        order=&gt;\u67e5\u8be2\u6761\u4ef6\n    :return:\n    \"\"\"\n    if not field:\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u83b7\u53d6\u989d\u5916\u53c2\u6570\n    order = extra_param.get(\"order\")  # \u6392\u5e8f\u6761\u4ef6\n\n    query = db.query(self.model).with_entities(*field)\n\n    if where:\n        query = query.filter(*where)\n\n    # \u52a0\u5165\u6392\u5e8f\u6761\u4ef6\n    if order:\n        query = query.order_by(*order)\n\n    # \u5224\u65ad\u6570\u636e\u662f\u5426\u5b58\u5728\n    query_res = query.first()\n    if not query_res:\n        return {\"result\": False, \"msg\": \"\u76f8\u5173\u6570\u636e\u4e0d\u5b58\u5728\uff01\", \"data\": {}}\n\n    return {\"result\": True, \"msg\": \"\u67e5\u8be2\u6210\u529f\uff01\", \"data\": query_res._mapping}\n</code></pre>"},{"location":"projects/ntrt/api/#NTRT.base_mysql.BaseCRUD.update_data_info","title":"<code>update_data_info(db, update_data, update_cond, **extra_param)</code>","text":"<p>\u4fee\u6539\u76ee\u6807\u6570\u636e :author:HJL :param db : :param dict update_data:\u5f85\u4fee\u6539\u6570\u636e :param list update_cond:\u4fee\u6539\u6761\u4ef6 :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5 :return:</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>NTRT\\base_mysql.py</code> <pre><code>def update_data_info(self, db, update_data, update_cond, **extra_param):\n    \"\"\"\n    \u4fee\u6539\u76ee\u6807\u6570\u636e\n    :author:HJL\n    :param db :\n    :param dict update_data:\u5f85\u4fee\u6539\u6570\u636e\n    :param list update_cond:\u4fee\u6539\u6761\u4ef6\n    :param any extra_param:\u989d\u5916\u53c2\u6570\uff0c\u7528\u4e8e\u62d3\u5c55\u5b57\u6bb5\n    :return:\n    \"\"\"\n    if not all([update_data, update_cond]):\n        return {\"result\": False, \"msg\": \"\u4f20\u5165\u53c2\u6570\u4e3a\u7a7a\uff01\"}\n\n    # \u68c0\u67e5\u6570\u636e\u662f\u5426\u5b58\u5728\n    exist = db.query(self.model).filter(*update_cond).first()\n    if not exist:\n        return {\"result\": False, \"msg\": \"\u5f85\u4fee\u6539\u7684\u6570\u636e\u4e0d\u5b58\u5728\uff01\"}\n\n    # \u83b7\u53d6\u5386\u53f2\u4fe1\u606f\n    history_dict = self._get_model_dict(exist)\n\n    # \u66f4\u65b0\u6570\u636e\n    for key, value in update_data.items():\n        setattr(exist, key, value)\n        flag_modified(exist, key)\n\n    # \u5224\u65ad\u662f\u5426\u63d0\u4ea4\n    if extra_param.get(\"is_commit\", True):\n        db.commit()\n\n    return {\"result\": True, \"msg\": \"\u6570\u636e\u4fee\u6539\u6210\u529f\uff01\", \"history\": history_dict}\n</code></pre>"},{"location":"projects/ntrt/api/#_2","title":"\u4e1a\u52a1\u6a21\u578b","text":""},{"location":"projects/ntrt/api/#nsfctopicrcmdtasklistmodel","title":"NsfcTopicRcmdTaskListModel","text":""},{"location":"projects/ntrt/api/#NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskListModel","title":"<code>NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskListModel</code>","text":"<p>               Bases: <code>CleaningModelMixin</code></p> <p>\u4efb\u52a1\u5217\u8868CRUD\u64cd\u4f5c</p>"},{"location":"projects/ntrt/api/#nsfctopicrcmdtasktopiclistmodel","title":"NsfcTopicRcmdTaskTopicListModel","text":""},{"location":"projects/ntrt/api/#NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskTopicListModel","title":"<code>NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskTopicListModel</code>","text":"<p>               Bases: <code>CleaningModelMixin</code></p> <p>\u4e3b\u9898\u5217\u8868CRUD\u64cd\u4f5c</p>"},{"location":"projects/ntrt/api/#nsfctopicrcmdtaskappinfomodel","title":"NsfcTopicRcmdTaskAppInfoModel","text":""},{"location":"projects/ntrt/api/#NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskAppInfoModel","title":"<code>NTRT.application.NsfcTopicRcmdModels.NsfcTopicRcmdTaskAppInfoModel</code>","text":"<p>               Bases: <code>CleaningModelMixin</code></p> <p>\u5e94\u7528\u4fe1\u606fCRUD\u64cd\u4f5c</p>"},{"location":"projects/ntrt/api/#_3","title":"\u4e1a\u52a1\u914d\u7f6e","text":""},{"location":"projects/ntrt/api/#applicationsettings","title":"application.settings","text":""},{"location":"projects/ntrt/api/#NTRT.application.settings","title":"<code>NTRT.application.settings</code>","text":""},{"location":"projects/ntrt/api/#NTRT.application.settings--time-20251111-1006","title":"@Time    : 2025/11/11 10:06","text":""},{"location":"projects/ntrt/api/#NTRT.application.settings--user","title":"@User  : \u5218\u5b50\u90fd","text":""},{"location":"projects/ntrt/api/#NTRT.application.settings--descriotion","title":"@Descriotion  : \u56fd\u81ea\u7136\u79d1\u5b66\u57fa\u91d1\u9879\u76ee\u63a8\u8350\u6570\u636e\u6e05\u6d17\u6a21\u5757\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"projects/ntrt/api/#_4","title":"\u4f7f\u7528\u6307\u5357","text":"<ul> <li>\u67e5\u770b\u7c7b/\u65b9\u6cd5\u7b7e\u540d\uff1a\u5c55\u5f00\u5bf9\u5e94\u6a21\u5757\u5373\u53ef\u770b\u5230\u53c2\u6570\u4e0e\u7c7b\u578b\u6ce8\u89e3</li> <li>Docstring \u683c\u5f0f\uff1a\u5efa\u8bae\u4f7f\u7528 Google \u6216 Sphinx \u98ce\u683c\uff0c\u4fbf\u4e8e mkdocstrings \u6b63\u786e\u89e3\u6790</li> <li>\u6e90\u7801\u8df3\u8f6c\uff1a\u542f\u7528 <code>show_source: true</code> \u540e\uff0c\u53ef\u5728\u6587\u6863\u4e2d\u76f4\u63a5\u67e5\u770b\u5b9e\u73b0\u7ec6\u8282</li> </ul> <p>\u5982\u9700\u65b0\u589e\u6a21\u5757\uff0c\u8bf7\u5c06 Python \u6587\u4ef6\u653e\u5728 <code>code_liu/NTRT/</code> \u4e0b\uff0c\u5e76\u5728 <code>mkdocs.yml</code> \u7684 <code>paths</code> \u4e2d\u786e\u4fdd\u5305\u542b <code>../code_liu</code>\u3002</p>"},{"location":"projects/ntrt/architecture/","title":"\u67b6\u6784\u8bbe\u8ba1","text":"<p>NTRT \u9879\u76ee\u91c7\u7528\u201c\u8c03\u5ea6\u5c42 + ORM \u5c01\u88c5\u5c42 + \u5b57\u6bb5\u5904\u7406\u5c42\u201d\u4e09\u6bb5\u5f0f\u7ed3\u6784\uff0c\u786e\u4fdd\u6e05\u6d17\u903b\u8f91\u53ef\u7ef4\u62a4\u3001\u53ef\u6269\u5c55\u3002</p>"},{"location":"projects/ntrt/architecture/#1","title":"1. \u7ec4\u4ef6\u603b\u89c8","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 DataCleaner\u2502 -&gt; \u2502 CleaningModel\u2502 -&gt; \u2502 BaseCRUD/ORM  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502                   \u2502                   \u2502\n        \u2502                   \u2502                   \u2514\u2500\u2500 SQLAlchemy Session\n        \u2502                   \u2514\u2500\u2500 NsfcTopicRcmd* \u6a21\u578b\n        \u2514\u2500\u2500 \u5b57\u6bb5\u5904\u7406\u5668 (_process_*)\n</code></pre> \u5c42\u7ea7 \u8bf4\u660e \u5173\u952e\u5bf9\u8c61 \u8c03\u5ea6\u5c42 \u4ee5\u4e8b\u52a1\u65b9\u5f0f\u4e32\u8054\u67e5\u8be2\u3001\u5904\u7406\u3001\u5199\u5165 <code>DataCleaner.run()</code> ORM \u5c01\u88c5\u5c42 \u5c06\u4e0d\u540c\u8868\u6a21\u578b\u7edf\u4e00\u4e3a CRUD \u63a5\u53e3 <code>CleaningModelMixin</code>\u3001<code>BaseCRUD</code> \u5b57\u6bb5\u5904\u7406\u5c42 \u9488\u5bf9\u7279\u5b9a JSON \u5b57\u6bb5\u7684\u6807\u51c6\u5316\u903b\u8f91 <code>_process_breadth_search</code>\u3001<code>_process_cited_articles</code>"},{"location":"projects/ntrt/architecture/#2","title":"2. \u6570\u636e\u6d41","text":"<ol> <li>\u67e5\u8be2\u9636\u6bb5\uff1a<code>_fetch_records_with_condition</code> \u6839\u636e\u989d\u5916\u8fc7\u6ee4\u6761\u4ef6\u6279\u91cf\u83b7\u53d6\u5f85\u5904\u7406\u6570\u636e\u3002</li> <li>\u5904\u7406\u9636\u6bb5\uff1a\u4e3a\u6bcf\u6761\u8bb0\u5f55\u8c03\u7528 <code>_process_breadth_search</code> / <code>_process_cited_articles</code>\uff0c\u751f\u6210\u76ee\u6807\u7ed3\u6784\u3002</li> <li>\u66f4\u65b0\u9636\u6bb5\uff1a<code>batch_update_field</code> \u6279\u91cf\u5199\u56de MySQL\uff0c\u540c\u65f6\u7edf\u8ba1\u6210\u529f/\u8df3\u8fc7\u6570\u91cf\u3002</li> <li>\u4e8b\u52a1\u63a7\u5236\uff1a\u6bcf\u6279\u6b21\u63d0\u4ea4\u4e00\u6b21\uff0c\u53ef\u6839\u636e\u9700\u8981\u8c03\u6574 <code>BATCH_SIZE</code> \u6216\u5c06\u4e8b\u52a1\u5305\u88c5\u5230\u66f4\u5927\u7c92\u5ea6\u3002</li> </ol>"},{"location":"projects/ntrt/architecture/#3","title":"3. \u5173\u952e\u6a21\u5757","text":"\u6a21\u5757 \u4f5c\u7528 \u4eae\u70b9 <code>DataCleaner</code> \u6e05\u6d17\u4efb\u52a1 orchestrator \u63d0\u4f9b\u7edf\u4e00\u65e5\u5fd7\u3001\u6279\u91cf\u904d\u5386\u3001\u9519\u8bef\u7edf\u8ba1 <code>NsfcTopicRcmdTask*Model</code> ORM \u6620\u5c04 + \u6e05\u6d17\u8f85\u52a9\u65b9\u6cd5 <code>fetch_records_for_cleaning</code>\u3001<code>batch_update_field</code> <code>BaseCRUD</code> \u901a\u7528 CRUD \u5c01\u88c5 \u652f\u6301\u6279\u91cf\u63d2\u5165\u3001\u66f4\u65b0\u3001\u7edf\u8ba1\u3001\u4e8b\u52a1\u63a7\u5236 <code>base_mysql.session_dict</code> \u4f1a\u8bdd\u5de5\u5382 \u652f\u6301\u591a\u6570\u636e\u5e93\u522b\u540d\uff0c\u8fd0\u884c\u671f\u81ea\u7531\u5207\u6362 <code>application.settings</code> \u73af\u5883\u914d\u7f6e \u540c\u65f6\u63d0\u4f9b\u6d4b\u8bd5\u3001\u751f\u4ea7\u3001SaaS \u7b49\u591a\u4e2a\u8fde\u63a5"},{"location":"projects/ntrt/architecture/#4","title":"4. \u5b57\u6bb5\u5904\u7406\u7b56\u7565","text":""},{"location":"projects/ntrt/architecture/#breadth_search","title":"breadth_search","text":"<ul> <li>\u5408\u5e76 <code>project_addition</code> \u4e0e <code>article_addition</code></li> <li>\u9879\u76ee\u5b57\u6bb5\u7edf\u4e00\u547d\u540d\uff08\u5982 <code>unit_name -&gt; project_unit</code>\uff09</li> <li>\u5904\u7406\u5173\u952e\u8bcd\u5217\u8868\u3001<code>apply_code</code> \u7ed3\u6784</li> </ul>"},{"location":"projects/ntrt/architecture/#cited_articles","title":"cited_articles","text":"<ul> <li>\u63a5\u53d7\u6570\u7ec4\u5f62\u5f0f\u7684\u5f15\u7528\u5217\u8868</li> <li>\u4ee5 <code>object_id</code> \u4e3a\u4e3b\u952e\u6784\u5efa\u5b57\u5178\uff0c\u533a\u5206\u9879\u76ee/\u6587\u7ae0\u7c7b\u578b</li> <li>\u5bf9\u9879\u76ee\u5f15\u7528\u8865\u5168\u6807\u51c6\u5b57\u6bb5</li> </ul> <p>\u6240\u6709 processor \u51fd\u6570\u90fd\u8fd4\u56de\u65b0\u7684 Python \u5bf9\u8c61\uff0c\u907f\u514d\u76f4\u63a5\u4fee\u6539\u539f\u59cb\u5f15\u7528\u3002</p>"},{"location":"projects/ntrt/architecture/#5","title":"5. \u53ef\u6269\u5c55\u70b9","text":"\u573a\u666f \u5efa\u8bae\u505a\u6cd5 \u65b0\u589e\u5b57\u6bb5\u6e05\u6d17 \u5728 <code>cleaning_plan</code> \u4e2d\u8ffd\u52a0\u4efb\u52a1 + \u5b9e\u73b0 <code>_process_xxx</code> \u6269\u5c55\u76ee\u6807\u8868 \u7ee7\u627f <code>CleaningModelMixin</code> \u5e76\u8bbe\u7f6e <code>model</code> \u5c5e\u6027 \u5f15\u5165\u5916\u90e8 JSON \u89c4\u5219 \u5728 <code>_process_*</code> \u4e2d\u52a0\u8f7d\u914d\u7f6e\u6216\u4f20\u5165\u56de\u8c03 \u5207\u6362\u6570\u636e\u5e93 \u901a\u8fc7 <code>DEFAULT_DB_KEY</code> \u6216\u6784\u9020\u51fd\u6570\u53c2\u6570\u5207\u6362 <code>session_dict</code>"},{"location":"projects/ntrt/architecture/#6","title":"6. \u8fd0\u884c\u6a21\u5f0f","text":"\u6a21\u5f0f \u8bf4\u660e \u624b\u52a8\u811a\u672c <code>python -m data_cleaner</code> \u6216\u5d4c\u5165\u5230\u5176\u4ed6\u4efb\u52a1\u6d41 \u5b9a\u65f6\u4efb\u52a1 \u501f\u52a9 Airflow / Cron / APScheduler \u5468\u671f\u6267\u884c \u670d\u52a1\u5316 \u5c06 <code>DataCleaner</code> \u5c01\u88c5\u4e3a Celery \u4efb\u52a1\u6216 FastAPI \u63a5\u53e3"},{"location":"projects/ntrt/architecture/#7","title":"7. \u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>SQLAlchemy\uff1a\u6a21\u578b\u58f0\u660e\u3001Session \u7ba1\u7406\u3001JSON \u8fd0\u7b97</li> <li>MySQL JSON \u51fd\u6570\uff1a<code>json_contains_path</code>\u3001<code>json_type</code></li> <li>\u672c\u5730 JSON \u6587\u4ef6\uff1a\u4e1a\u52a1\u89c4\u5219\u3001\u793a\u4f8b\u6570\u636e\uff0c\u4f4d\u4e8e\u6839\u76ee\u5f55\u82e5\u5e72 <code>.json</code></li> </ul> <p>\u5728\u8fc1\u79fb\u5230\u5176\u4ed6\u6570\u636e\u5e93/\u7248\u672c\u524d\uff0c\u9700\u8981\u8bc4\u4f30 JSON \u51fd\u6570\u517c\u5bb9\u6027\u3002</p>"},{"location":"projects/ntrt/configuration/","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>NTRT \u9879\u76ee\u901a\u8fc7 <code>application/settings.py</code>\u3001<code>base_mysql.py</code> \u4ee5\u53ca\u82e5\u5e72\u5e38\u91cf\uff0c\u63d0\u4f9b\u7075\u6d3b\u7684\u90e8\u7f72\u9009\u9879\u3002\u672c\u9875\u5217\u4e3e\u5e38\u7528\u914d\u7f6e\u53ca\u4fee\u6539\u5efa\u8bae\u3002</p>"},{"location":"projects/ntrt/configuration/#1-applicationsettingspy","title":"1. \u6570\u636e\u5e93\u914d\u7f6e\uff08application/settings.py\uff09","text":"<pre><code>DATABASES = {\n    'medicine': {\n        'HOST': '192.168.1.243',\n        'PORT': '3306',\n        'USER': 'medpeer',\n        'PASSWORD': 'medpeer',\n        'NAME': 'medicine',\n        'CHARSET': 'utf8mb4',\n    },\n    'medicine_test': {\n        'HOST': 'localhost',\n        'PORT': '3306',\n        'USER': 'root',\n        'PASSWORD': '248655',\n        'NAME': 'medicine_test',\n        'CHARSET': 'utf8mb4',\n    },\n    ...\n}\n</code></pre>"},{"location":"projects/ntrt/configuration/#_2","title":"\u5efa\u8bae","text":"<ul> <li>\u751f\u4ea7/\u6d4b\u8bd5\u73af\u5883\u62c6\u5206\u4e3a\u4e0d\u540c key\uff0c\u4f8b\u5982 <code>medicine</code>\u3001<code>medicine_test</code></li> <li>\u5c06\u654f\u611f\u4fe1\u606f\u6539\u4e3a\u8bfb\u53d6\u73af\u5883\u53d8\u91cf\uff1a<code>os.getenv(\"NTRT_DB_PASSWORD\", \"medpeer\")</code></li> <li>\u5982\u9700\u65b0\u589e\u6570\u636e\u6e90\uff0c\u53ea\u9700\u8ffd\u52a0\u914d\u7f6e\u5373\u53ef\u88ab <code>session_dict</code> \u81ea\u52a8\u8bc6\u522b</li> </ul>"},{"location":"projects/ntrt/configuration/#2-session-base_mysqlpy","title":"2. Session \u5de5\u5382\uff08base_mysql.py\uff09","text":"<p>\u6a21\u5757\u5728\u5bfc\u5165\u65f6\u904d\u5386 <code>DATABASES</code>\uff0c\u4e3a\u6bcf\u4e2a key \u521b\u5efa <code>SessionLocal</code> \u5e76\u5b58\u5165 <code>session_dict</code>\u3002\u4f7f\u7528\u65b9\u5f0f\uff1a</p> <pre><code>from base_mysql import session_dict\nsession = session_dict['medicine']()\n</code></pre> <ul> <li><code>DEFAULT_DB_KEY</code> \u9ed8\u8ba4\u4e3a <code>medicine</code>\uff0c\u53ef\u5728\u8fd0\u884c\u524d\u4fee\u6539</li> <li>\u5982\u679c\u62c5\u5fc3\u8fde\u63a5\u8fc7\u591a\uff0c\u53ef\u7528 <code>NullPool</code>/<code>QueuePool</code> \u8c03\u6574 SQLAlchemy pool \u914d\u7f6e</li> </ul>"},{"location":"projects/ntrt/configuration/#3-datacleaner","title":"3. DataCleaner \u53c2\u6570","text":"\u53c2\u6570 \u4f4d\u7f6e \u9ed8\u8ba4\u503c \u8bf4\u660e <code>BATCH_SIZE</code> <code>data_cleaner.py</code> 100 \u5355\u6b21\u67e5\u8be2/\u5199\u5165\u7684\u8bb0\u5f55\u6570 <code>DEFAULT_DB_KEY</code> <code>data_cleaner.py</code> <code>medicine</code> \u9009\u7528\u7684\u6570\u636e\u5e93\u522b\u540d <code>cleaning_plan</code> <code>run()</code> - \u63cf\u8ff0\u9700\u8981\u6e05\u6d17\u7684\u5b57\u6bb5\u3001\u6a21\u578b\u3001\u5904\u7406\u51fd\u6570 <p>\u53ef\u5c06\u8fd9\u4e9b\u503c\u62bd\u8c61\u6210\u914d\u7f6e\u6587\u4ef6\u6216\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u4ee5\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u5207\u6362\u3002</p>"},{"location":"projects/ntrt/configuration/#4-json","title":"4. JSON \u89c4\u5219\u4e0e\u6587\u6863","text":"<p>\u6839\u76ee\u5f55\u63d0\u4f9b\u591a\u4efd <code>.json</code> \u4e0e <code>.md</code> \u6587\u6863\uff08\u5982\u300a\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u8bf4\u660e\u300b\u300a\u6587\u4ef6\u8c03\u7528\u5173\u7cfb\u8bf4\u660e\u300b\uff09\uff0c\u53ef\u4f5c\u4e3a\u5b57\u6bb5\u6620\u5c04\u4e0e\u9a8c\u8bc1\u7684\u4f9d\u636e\u3002\u82e5\u4e1a\u52a1\u89c4\u5219\u53d1\u751f\u53d8\u5316\uff0c\u8bf7\u540c\u6b65\u66f4\u65b0\u8fd9\u4e9b\u6587\u6863\uff0c\u4ee5\u514d\u5904\u7406\u903b\u8f91\u4e0e\u5b9e\u9645\u9700\u6c42\u8131\u8282\u3002</p>"},{"location":"projects/ntrt/configuration/#5","title":"5. \u65e5\u5fd7\u4e0e\u8c03\u8bd5","text":"<p>\u76ee\u524d <code>DataCleaner</code> \u4f7f\u7528 <code>print</code> \u8f93\u51fa\uff0c\u5efa\u8bae\u5728\u4ee5\u4e0b\u573a\u666f\u5207\u6362\u81f3\u6807\u51c6\u65e5\u5fd7\u6a21\u5757\uff1a</p> <ul> <li>\u9700\u8981\u8f93\u51fa\u5230\u6587\u4ef6\u6216\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u7cfb\u7edf</li> <li>\u9700\u8981\u533a\u5206 INFO / WARNING / ERROR</li> <li>\u9700\u8981\u8ffd\u8e2a\u5177\u4f53\u6570\u636e ID</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>import logging\nlogger = logging.getLogger(__name__)\n\nlogger.info(\"\u5f00\u59cb\u6e05\u6d17 %s\", display_name)\n</code></pre>"},{"location":"projects/ntrt/configuration/#6","title":"6. \u73af\u5883\u53d8\u91cf\u793a\u4f8b","text":"<pre><code>set NTRT_DB_HOST=192.168.1.243\nset NTRT_DB_USER=medpeer\nset NTRT_DB_PASSWORD=******\nset NTRT_DB_NAME=medicine\n</code></pre> <p>\u5728 <code>settings.py</code> \u4e2d\u8bfb\u53d6\uff1a</p> <pre><code>import os\nDATABASES['medicine']['HOST'] = os.getenv('NTRT_DB_HOST', '192.168.1.243')\n</code></pre>"},{"location":"projects/ntrt/configuration/#7","title":"7. \u5e38\u89c1\u6539\u52a8\u6e05\u5355","text":"\u573a\u666f \u4fee\u6539\u4f4d\u7f6e \u5907\u6ce8 \u5207\u6362\u6570\u636e\u5e93 <code>DEFAULT_DB_KEY</code> \u6216 <code>session_dict</code> \u786e\u4fdd\u76ee\u6807\u8868\u5b58\u5728 \u8c03\u6574\u6279\u6b21\u89c4\u6a21 <code>BATCH_SIZE</code> \u8fc7\u5927\u53ef\u80fd\u5bfc\u81f4\u4e8b\u52a1\u65f6\u95f4\u8fc7\u957f \u65b0\u589e\u5b57\u6bb5\u6e05\u6d17 <code>cleaning_plan</code> \u6307\u5b9a\u6a21\u578b\u3001\u5b57\u6bb5\u3001\u5904\u7406\u5668 \u4ec5\u8bfb\u53d6\u4e0d\u5199\u5165 <code>_write_updates</code> \u4e2d\u6682\u65f6\u8df3\u8fc7 <code>session.commit()</code> \u6ce8\u610f\u56de\u6eda <p>\u5982\u9700\u66f4\u591a\u5b9e\u8df5\u7ecf\u9a8c\uff0c\u53ef\u53c2\u8003\u6839\u76ee\u5f55\u7684\u7b14\u8bb0\u6587\u4ef6\u6216\u4e0e\u4e1a\u52a1\u65b9\u540c\u6b65\u6700\u65b0\u8981\u6c42\u3002*** End Patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.applyPatch to=functions.applyPatch to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.applyPATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.apply_PATCH to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH best? (Stop) This apply patch success despite repeated? should check file. Probably content inserted once at top. ok. Continue. Need other docs. but already wrote config. good. Next examples/troubleshooting/update etc. generate manageable length. use apply patch for each file new content? (maybe file exists?). check? list dir to confirm new files created. done later. Need examples/troubleshooting/update content for NTRT. </p>"},{"location":"projects/ntrt/examples/","title":"\u4f7f\u7528\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u8986\u76d6 NTRT \u9879\u76ee\u6700\u5e38\u89c1\u7684\u8fd0\u884c\u4e0e\u6269\u5c55\u573a\u666f\uff0c\u53ef\u76f4\u63a5\u590d\u5236\u5230\u547d\u4ee4\u884c\u6216\u811a\u672c\u4e2d\u4f7f\u7528\u3002</p>"},{"location":"projects/ntrt/examples/#1","title":"1. \u6807\u51c6\u6e05\u6d17\u6d41\u7a0b","text":"<pre><code>cd code_liu/NTRT\npython - &lt;&lt;'PY'\nfrom data_cleaner import DataCleaner\n\nif __name__ == \"__main__\":\n    cleaner = DataCleaner()\n    cleaner.run()\nPY\n</code></pre> <p>\u8bf4\u660e - \u9ed8\u8ba4\u4f7f\u7528 <code>DEFAULT_DB_KEY = 'medicine'</code> - <code>BATCH_SIZE = 100</code>\uff0c\u6bcf\u6279\u67e5\u8be2/\u66f4\u65b0 100 \u6761 - \u63a7\u5236\u53f0\u4f1a\u8f93\u51fa\u6bcf\u4e2a\u5b57\u6bb5\u7684\u5904\u7406\u7edf\u8ba1</p>"},{"location":"projects/ntrt/examples/#2","title":"2. \u5207\u6362\u6570\u636e\u5e93","text":"<pre><code>from data_cleaner import DataCleaner, DEFAULT_DB_KEY\nimport base_mysql\n\nDEFAULT_DB_KEY = 'medicine_test'   # or 'saas'\ncleaner = DataCleaner()\ncleaner.db_key = 'medicine_test'\ncleaner.run()\n</code></pre> <p>\u53ea\u9700\u786e\u4fdd <code>application/settings.py</code> \u4e2d\u5b58\u5728\u5bf9\u5e94 key\uff0c<code>session_dict</code> \u4f1a\u81ea\u52a8\u751f\u6210 Session\u3002</p>"},{"location":"projects/ntrt/examples/#3","title":"3. \u8c03\u6574\u6279\u6b21\u5927\u5c0f","text":"<pre><code>from data_cleaner import DataCleaner, BATCH_SIZE\n\nBATCH_SIZE = 500\ncleaner = DataCleaner()\ncleaner.batch_size = 500\ncleaner.run()\n</code></pre> <p>\u9002\u5408\u5927\u6279\u91cf\u5199\u5165\u6216\u6570\u636e\u5e93\u6027\u80fd\u8f83\u597d\u7684\u73af\u5883\uff1b\u82e5\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u53ef\u8c03\u4f4e\u81f3 50~100\u3002</p>"},{"location":"projects/ntrt/examples/#4","title":"4. \u4ec5\u6e05\u6d17\u67d0\u4e2a\u5b57\u6bb5","text":"<pre><code>from data_cleaner import DataCleaner\n\ncleaner = DataCleaner()\ncleaner.run_cleaning_plan = [\n    cleaner.cleaning_plan[0],    # \u4ec5\u4fdd\u7559 breadth_search \u4efb\u52a1\n]\ncleaner.run()\n</code></pre> <p>\u66f4\u7b80\u6d01\u7684\u505a\u6cd5\u662f\u5c06 <code>cleaning_plan</code> \u62c6\u5206\u4e3a\u65b9\u6cd5\u6216\u5165\u53c2\uff0c\u5728\u751f\u4ea7\u73af\u5883\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\u3002</p>"},{"location":"projects/ntrt/examples/#5","title":"5. \u65b0\u589e\u5b57\u6bb5\u5904\u7406","text":"<pre><code>def process_new_field(data):\n    # \u81ea\u5b9a\u4e49\u6e05\u6d17\u903b\u8f91\n    return data\n\ncleaner = DataCleaner()\ncleaner.cleaning_plan.append({\n    'model_class': NewModel,\n    'field_name': 'new_field',\n    'extra_filters': [],\n    'processor': process_new_field,\n    'display_name': 'new_field \u5b57\u6bb5',\n})\ncleaner.run()\n</code></pre> <p>\u6b65\u9aa4\uff1a 1. \u5728 <code>application/NsfcTopicRcmdModels.py</code> \u4e2d\u6ce8\u518c\u65b0\u7684 ORM \u6a21\u578b 2. \u5728 <code>cleaning_plan</code> \u4e2d\u63cf\u8ff0\u5b57\u6bb5\u3001\u8fc7\u6ee4\u6761\u4ef6\u4e0e\u5904\u7406\u51fd\u6570 3. \u8fd0\u884c <code>run()</code> \u5373\u53ef\u81ea\u52a8\u7eb3\u5165\u6e05\u6d17\u6d41\u7a0b</p>"},{"location":"projects/ntrt/examples/#6","title":"6. \u67e5\u770b\u5904\u7406\u524d\u540e\u6570\u636e","text":"<pre><code>SELECT list_id,\n       JSON_PRETTY(breadth_search) AS before_clean\nFROM nsfc_topic_rcmd_task_list\nWHERE JSON_CONTAINS_PATH(breadth_search, 'one', '$.article_addition');\n</code></pre> <p>\u82e5\u9700\u8981\u5bf9\u6bd4\u6e05\u6d17\u540e\u7684\u7ed3\u679c\uff0c\u53ef\u5728 <code>_process_records</code> \u4e2d\u4e34\u65f6\u6253\u5370 <code>record_id</code> \u4e0e <code>processed_payload</code>\uff0c\u6216\u5c06 <code>updates</code> \u5199\u5165\u8c03\u8bd5\u65e5\u5fd7\u3002</p>"},{"location":"projects/ntrt/examples/#7","title":"7. \u96c6\u6210\u5230\u8c03\u5ea6\u7cfb\u7edf","text":""},{"location":"projects/ntrt/examples/#airflow","title":"Airflow \u793a\u4f8b","text":"<pre><code>from airflow import DAG\nfrom airflow.operators.python import PythonOperator\nfrom datetime import datetime\nfrom data_cleaner import DataCleaner\n\ndef run_cleaner():\n    DataCleaner().run()\n\nwith DAG(\n    dag_id=\"ntrt_cleaner\",\n    schedule_interval=\"@daily\",\n    start_date=datetime(2025, 1, 1),\n    catchup=False,\n) as dag:\n    PythonOperator(\n        task_id=\"run_ntrt_cleaner\",\n        python_callable=run_cleaner,\n    )\n</code></pre>"},{"location":"projects/ntrt/examples/#shell","title":"Shell \u5b9a\u65f6\u4efb\u52a1","text":"<pre><code>0 2 * * * /usr/bin/python /path/to/code_liu/NTRT/run_cleaner.py &gt;&gt; /var/log/ntrt_clean.log 2&gt;&amp;1\n</code></pre>"},{"location":"projects/ntrt/examples/#8-sql","title":"8. \u5e38\u7528 SQL \u8f85\u52a9","text":"\u76ee\u7684 SQL \u793a\u4f8b \u7edf\u8ba1\u5f85\u6e05\u6d17\u8bb0\u5f55 <code>SELECT COUNT(*) FROM nsfc_topic_rcmd_task_topic_list WHERE JSON_TYPE(cited_articles)='ARRAY';</code> \u68c0\u67e5\u5b57\u6bb5\u662f\u5426\u4e3a JSON <code>SELECT JSON_VALID(breadth_search) FROM ...;</code> \u6e05\u9664\u5f02\u5e38\u6570\u636e <code>UPDATE ... SET cited_articles=NULL WHERE JSON_TYPE(cited_articles)!='ARRAY';</code>"},{"location":"projects/ntrt/examples/#9","title":"9. \u6545\u969c\u6392\u67e5\u6307\u5f15","text":"<p>\u9047\u5230\u8fde\u63a5\u5931\u8d25\u3001JSON \u89e3\u6790\u5f02\u5e38\u3001\u4e8b\u52a1\u56de\u6eda\u7b49\u60c5\u51b5\uff0c\u8bf7\u53c2\u8003 \u6545\u969c\u6392\u67e5 \u83b7\u5f97\u5177\u4f53\u89e3\u51b3\u65b9\u6848\u3002 End Patch End Patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.applyPatch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patchigtigt. (Assume success) Let's read file to confirm.</p>"},{"location":"projects/ntrt/getting-started/","title":"\u5feb\u901f\u5f00\u59cb","text":"<p>\u672c\u6307\u5357\u5e2e\u52a9\u4f60\u5728 10 \u5206\u949f\u5185\u642d\u5efa NTRT \u6570\u636e\u6e05\u6d17\u73af\u5883\uff0c\u5e76\u8fd0\u884c\u9996\u4e2a\u6e05\u6d17\u4efb\u52a1\u3002</p>"},{"location":"projects/ntrt/getting-started/#1","title":"1. \u5148\u51b3\u6761\u4ef6","text":"\u7ec4\u4ef6 \u5efa\u8bae\u7248\u672c \u8bf4\u660e Python 3.10+ \u5efa\u8bae\u4f7f\u7528\u865a\u62df\u73af\u5883 <code>.venv</code> MySQL 5.7+/8.0 \u9700\u8981\u5177\u5907 <code>nsfc_topic_rcmd_*</code> \u7cfb\u5217\u8868 pip 23+ \u9700\u5177\u5907\u5b89\u88c5\u5916\u7f51\u4f9d\u8d56\u80fd\u529b Git 2.30+ \u62c9\u53d6\u4ed3\u5e93 <p>\u5982\u679c\u94fe\u8def\u53d7\u9650\uff0c\u53ef\u63d0\u524d\u914d\u7f6e\u516c\u53f8\u5236\u54c1\u5e93\u6216\u955c\u50cf\u7ad9\u3002</p>"},{"location":"projects/ntrt/getting-started/#2","title":"2. \u514b\u9686\u4e0e\u5b89\u88c5","text":"<pre><code>git clone git@github.com:Gearless01Joe/Markdown_test.git\ncd Markdown_test\n\n# \u51c6\u5907\u865a\u62df\u73af\u5883\npython -m venv .venv\n.venv\\Scripts\\activate    # Windows\n\n# \u5b89\u88c5\u4f9d\u8d56\npip install -r code_liu/NTRT/requirements.txt\n</code></pre>"},{"location":"projects/ntrt/getting-started/#3","title":"3. \u914d\u7f6e\u6570\u636e\u5e93","text":"<p>\u9ed8\u8ba4\u914d\u7f6e\u4f4d\u4e8e <code>code_liu/NTRT/application/settings.py</code>\u3002\u6839\u636e\u73af\u5883\u4fee\u6539\uff1a</p> <pre><code>DATABASES = {\n    'medicine': {\n        'HOST': '192.168.1.243',\n        'PORT': '3306',\n        'USER': 'medpeer',\n        'PASSWORD': 'medpeer',\n        'NAME': 'medicine',\n        'CHARSET': 'utf8mb4',\n    },\n    'medicine_test': {\n        'HOST': 'localhost',\n        'PORT': '3306',\n        'USER': 'root',\n        'PASSWORD': '***',\n        'NAME': 'medicine_test',\n        'CHARSET': 'utf8mb4',\n    },\n}\n</code></pre> <p>\u63a8\u8350\u5c06\u654f\u611f\u4fe1\u606f\u62bd\u79bb\u4e3a\u73af\u5883\u53d8\u91cf\uff1a</p> <pre><code>set NTRT_DB_HOST=192.168.1.243\nset NTRT_DB_USER=medpeer\n# \u5728 settings.py \u4e2d\u901a\u8fc7 os.getenv \u8bfb\u53d6\n</code></pre>"},{"location":"projects/ntrt/getting-started/#4","title":"4. \u8fd0\u884c\u6e05\u6d17\u4efb\u52a1","text":"<pre><code>cd code_liu/NTRT\npython - &lt;&lt;'PY'\nfrom data_cleaner import DataCleaner\n\nif __name__ == \"__main__\":\n    cleaner = DataCleaner()\n    cleaner.run()\nPY\n</code></pre>"},{"location":"projects/ntrt/getting-started/#_2","title":"\u53ef\u9009\u53c2\u6570","text":"<p>\u76ee\u524d <code>DataCleaner</code> \u901a\u8fc7\u5e38\u91cf\u63a7\u5236\u6279\u6b21\u4e0e\u6570\u636e\u5e93\uff1a</p> \u53d8\u91cf \u9ed8\u8ba4\u503c \u8bf4\u660e <code>BATCH_SIZE</code> 100 \u5355\u6b21\u67e5\u8be2/\u66f4\u65b0\u7684\u8bb0\u5f55\u6570 <code>DEFAULT_DB_KEY</code> <code>medicine</code> \u5bf9\u5e94 <code>session_dict</code> \u7684\u6570\u636e\u5e93\u522b\u540d <p>\u53ef\u5728\u8fd0\u884c\u524d\u76f4\u63a5\u4fee\u6539\u5e38\u91cf\u6216\u65b0\u589e\u521d\u59cb\u5316\u53c2\u6570\u3002</p>"},{"location":"projects/ntrt/getting-started/#5","title":"5. \u9a8c\u8bc1\u7ed3\u679c","text":"<ol> <li>\u63a7\u5236\u53f0\uff1a\u89c2\u5bdf\u201c\u5f00\u59cb/\u5b8c\u6210\u201d\u65e5\u5fd7\u3001\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7edf\u8ba1\u4fe1\u606f</li> <li>\u6570\u636e\u5e93\uff1a\u68c0\u67e5\u76ee\u6807\u8868\u7684 <code>breadth_search</code>\u3001<code>cited_articles</code> \u5b57\u6bb5\u662f\u5426\u88ab\u6807\u51c6\u5316</li> <li>Git \u72b6\u6001\uff1a\u786e\u8ba4\u672a\u8bef\u4fee\u6539\u914d\u7f6e\u6216\u4f9d\u8d56</li> </ol>"},{"location":"projects/ntrt/getting-started/#6","title":"6. \u5e38\u7528\u547d\u4ee4","text":"\u573a\u666f \u547d\u4ee4 \u683c\u5f0f\u5316 JSON \u7ed3\u679c <code>SELECT JSON_PRETTY(breadth_search) ...</code> \u7edf\u8ba1\u5f85\u5904\u7406\u6570\u91cf <code>SELECT COUNT(*) FROM ... WHERE JSON_TYPE(...) = 'ARRAY'</code> \u5207\u6362\u6570\u636e\u5e93\u522b\u540d \u7f16\u8f91 <code>DEFAULT_DB_KEY</code> \u6216 <code>session_dict</code> \u8c03\u6574\u6279\u6b21\u5927\u5c0f \u4fee\u6539 <code>BATCH_SIZE</code>"},{"location":"projects/ntrt/getting-started/#7","title":"7. \u9047\u5230\u95ee\u9898\uff1f","text":"<p>\u8bf7\u53c2\u8003 \u6545\u969c\u6392\u67e5 \u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3001JSON \u89e3\u6790\u3001\u4e8b\u52a1\u56de\u6eda\u7b49\u5e38\u89c1\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u3002*** End Patch</p>"},{"location":"projects/ntrt/guide/","title":"\u6838\u5fc3\u6a21\u5757\u6307\u5357","text":"<p>\u672c\u6587\u4ece\u5de5\u7a0b\u89c6\u89d2\u68b3\u7406 NTRT \u9879\u76ee\u7684\u5173\u952e\u6a21\u5757\u53ca\u5176\u534f\u4f5c\u65b9\u5f0f\uff0c\u5e2e\u52a9\u4f60\u5feb\u901f\u5b9a\u4f4d\u201c\u8be5\u6539\u54ea\u91cc\u3001\u8be5\u770b\u54ea\u91cc\u201d\u3002</p>"},{"location":"projects/ntrt/guide/#1-datacleaner","title":"1. DataCleaner","text":"\u5c5e\u6027 \u8bf4\u660e <code>BATCH_SIZE</code> \u63a7\u5236\u5355\u8f6e\u5904\u7406\u7684\u8bb0\u5f55\u6570\u91cf <code>DEFAULT_DB_KEY</code> \u4ece <code>session_dict</code> \u9009\u62e9\u8981\u4f7f\u7528\u7684\u6570\u636e\u5e93 <code>cleaning_plan</code> \u63cf\u8ff0\u6bcf\u4e2a\u5b57\u6bb5\u7684\u6a21\u578b\u3001\u8fc7\u6ee4\u6761\u4ef6\u3001\u5904\u7406\u51fd\u6570"},{"location":"projects/ntrt/guide/#_2","title":"\u5e38\u7528\u65b9\u6cd5","text":"<ul> <li><code>run()</code>\uff1a\u4e3b\u5165\u53e3\uff0c\u4e32\u8054\u67e5\u8be2 \u2192 \u5904\u7406 \u2192 \u5199\u5165\uff0c\u5e76\u6253\u5370\u7edf\u8ba1\u4fe1\u606f</li> <li><code>_process_breadth_search()</code>\uff1a\u5c06\u9879\u76ee/\u6587\u7ae0\u4fe1\u606f\u6574\u5408\u6210\u7edf\u4e00\u7ed3\u6784</li> <li><code>_process_cited_articles()</code>\uff1a\u6309 <code>object_id</code> \u5408\u5e76\u5f15\u7528\u6587\u732e</li> <li><code>_clean_dataset()</code>\uff1a\u901a\u7528\u6279\u5904\u7406\u9aa8\u67b6\uff0c\u8d1f\u8d23\u5206\u9875\u3001\u7edf\u8ba1\u3001\u4e8b\u52a1</li> </ul> <p>\u6269\u5c55\u65b0\u7684\u5b57\u6bb5\u65f6\uff0c\u53ea\u9700\u5728 <code>cleaning_plan</code> \u4e2d\u8ffd\u52a0\u6761\u76ee\u5e76\u5b9e\u73b0 <code>_process_xxx</code>\u3002</p>"},{"location":"projects/ntrt/guide/#2-orm","title":"2. ORM \u6a21\u578b","text":"<p>\u4f4d\u4e8e <code>application/NsfcTopicRcmdModels.py</code>\uff1a</p> \u6a21\u578b \u8868 \u4e3b\u8981\u5b57\u6bb5 \u8bf4\u660e <code>NsfcTopicRcmdTaskList</code> <code>nsfc_topic_rcmd_task_list</code> <code>breadth_search</code> \u5b58\u653e\u5e7f\u5ea6\u641c\u7d22\u7ed3\u679c\uff08\u9879\u76ee/\u6587\u7ae0\u96c6\u5408\uff09 <code>NsfcTopicRcmdTaskTopicList</code> <code>nsfc_topic_rcmd_task_topic_list</code> <code>cited_articles</code> \u4e3b\u9898\u7ef4\u5ea6\u7684\u5f15\u7528\u5217\u8868 <code>NsfcTopicRcmdTaskAppInfo</code> <code>nsfc_topic_rcmd_task_app_info</code> <code>cited_articles</code> \u9879\u76ee\u5e94\u7528\u7ef4\u5ea6\u7684\u5f15\u7528\u5217\u8868 <p>\u5bf9\u5e94\u7684 <code>*Model</code>\uff08\u7ee7\u627f <code>CleaningModelMixin</code>\uff09\u63d0\u4f9b\uff1a - <code>fetch_records_for_cleaning()</code>\uff1a\u6839\u636e\u5b57\u6bb5\u548c\u9644\u52a0\u8fc7\u6ee4\u6761\u4ef6\u6279\u91cf\u67e5\u8be2 - <code>batch_update_field()</code>\uff1a\u6279\u91cf\u5199\u56de\u5b57\u6bb5\uff0c\u81ea\u5e26\u4e8b\u52a1\u63a7\u5236</p>"},{"location":"projects/ntrt/guide/#3-basecrud-session_dict","title":"3. BaseCRUD &amp; session_dict","text":"<ul> <li><code>BaseCRUD</code> \u5c01\u88c5\u901a\u7528\u7684\u589e\u5220\u6539\u67e5\u64cd\u4f5c\uff0c\u5305\u62ec\u6279\u91cf\u521b\u5efa\u3001\u6761\u4ef6\u66f4\u65b0\u3001\u5206\u9875\u67e5\u8be2\u7b49\u3002</li> <li><code>session_dict</code> \u5728\u6a21\u5757\u5bfc\u5165\u65f6\u6309 <code>application.settings.DATABASES</code> \u521b\u5efa\u6240\u6709 <code>SessionLocal</code>\uff0c\u8fd9\u6837\u5728\u8fd0\u884c\u65f6\u53ea\u9700\u6307\u5b9a\u522b\u540d\u5373\u53ef\u3002</li> </ul> <p>\u82e5\u8981\u6dfb\u52a0\u65b0\u6570\u636e\u5e93\uff0c\u53ea\u9700\u5728 <code>settings.py</code> \u4e2d\u52a0\u5165\u6761\u76ee\u5373\u53ef\u81ea\u52a8\u751f\u6210 Session\u3002</p>"},{"location":"projects/ntrt/guide/#4","title":"4. \u5b57\u6bb5\u5904\u7406\u7b56\u7565","text":""},{"location":"projects/ntrt/guide/#breadth_search","title":"breadth_search","text":"<ul> <li>\u6807\u51c6\u5316\u9879\u76ee\u5b57\u6bb5\uff1a<code>unit_name -&gt; project_unit</code>\u3001<code>leader_name -&gt; project_leader</code> \u7b49</li> <li>\u5904\u7406 <code>apply_code</code>\u3001<code>project_keyword</code> \u7b49\u590d\u5408\u5b57\u6bb5</li> <li>\u517c\u5bb9\u9879\u76ee/\u6587\u7ae0\u4e24\u7c7b\u5b9e\u4f53\uff0c\u6700\u7ec8\u8f93\u51fa\u7edf\u4e00\u5b57\u5178</li> </ul>"},{"location":"projects/ntrt/guide/#cited_articles","title":"cited_articles","text":"<ul> <li>\u8f93\u5165\u4e3a JSON \u6570\u7ec4\uff0c\u8f93\u51fa\u4e3a\u4ee5 <code>object_id</code> \u4e3a\u952e\u7684\u5b57\u5178</li> <li>\u6839\u636e <code>object_type</code> \u51b3\u5b9a\u662f\u5426\u5957\u7528 <code>_standardize_project_info</code></li> <li>\u5ffd\u7565\u7f3a\u5c11 <code>object_id</code> \u6216 JSON \u7ed3\u6784\u5f02\u5e38\u7684\u8bb0\u5f55</li> </ul> <p>\u6240\u6709\u5904\u7406\u51fd\u6570\u5747\u8fd4\u56de\u65b0\u7684\u5bf9\u8c61\uff0c\u907f\u514d\u5728\u539f\u59cb\u8bb0\u5f55\u4e0a\u5c31\u5730\u4fee\u6539\u3002</p>"},{"location":"projects/ntrt/guide/#5","title":"5. \u6269\u5c55\u6307\u5357","text":"\u9700\u6c42 \u63a8\u8350\u505a\u6cd5 \u6279\u91cf\u5904\u7406\u66f4\u591a\u5b57\u6bb5 \u5728 <code>cleaning_plan</code> \u4e2d\u65b0\u589e\u6761\u76ee\uff0c\u590d\u7528 <code>_clean_dataset</code> \u5207\u6362\u6570\u636e\u5e93 \u5728\u5b9e\u4f8b\u5316 <code>DataCleaner</code> \u524d\u8c03\u6574 <code>DEFAULT_DB_KEY</code>\uff0c\u6216\u65b0\u589e\u53c2\u6570 \u589e\u52a0\u65e5\u5fd7/\u76d1\u63a7 \u5728 <code>_clean_dataset</code> \u4e2d\u63d2\u5165\u94a9\u5b50\uff0c\u6216\u6269\u5c55 <code>print</code> \u4e3a\u6807\u51c6\u65e5\u5fd7\u6a21\u5757 \u96c6\u6210\u5230\u5176\u5b83\u7cfb\u7edf \u5c06 <code>DataCleaner</code> \u5c01\u88c5\u6210\u51fd\u6570/\u7c7b\uff0c\u5bf9\u5916\u66b4\u9732 <code>run()</code> \u5373\u53ef"},{"location":"projects/ntrt/guide/#6-faq","title":"6. FAQ","text":"<ul> <li> <p>\u5982\u4f55\u8df3\u8fc7\u67d0\u4e2a\u4efb\u52a1\uff1f   \u4e34\u65f6\u6ce8\u91ca <code>cleaning_plan</code> \u4e2d\u5bf9\u5e94\u9879\uff0c\u6216\u6dfb\u52a0\u5f00\u5173\u53d8\u91cf\u3002</p> </li> <li> <p>\u5982\u4f55\u63a7\u5236\u4e8b\u52a1\u7c92\u5ea6\uff1f   \u4fee\u6539 <code>BATCH_SIZE</code>\uff0c\u6216\u5728 <code>batch_update_field</code> \u4e2d\u8c03\u6574 <code>is_commit</code> \u903b\u8f91\u3002</p> </li> <li> <p>\u5982\u4f55\u5b9a\u4f4d\u51fa\u9519\u8bb0\u5f55\uff1f   \u5728 <code>_process_records</code> \u4e2d\u52a0\u5165\u66f4\u591a\u8c03\u8bd5\u4fe1\u606f\uff0c\u4f8b\u5982\u6253\u5370 <code>record_id</code>\u3001\u5b57\u6bb5\u503c\u3002</p> </li> </ul> <p>\u66f4\u591a\u793a\u4f8b\u53ef\u53c2\u8003 \u4f7f\u7528\u793a\u4f8b\u3002*** End Patch</p>"},{"location":"projects/ntrt/troubleshooting/","title":"\u6545\u969c\u6392\u67e5","text":"<p>\u672c\u9875\u8bb0\u5f55 NTRT \u9879\u76ee\u5e38\u89c1\u95ee\u9898\u53ca\u89e3\u51b3\u601d\u8def\uff0c\u4fbf\u4e8e\u5feb\u901f\u5b9a\u4f4d\u5e76\u4fee\u590d\u3002</p>"},{"location":"projects/ntrt/troubleshooting/#1","title":"1. \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25","text":"<p>\u75c7\u72b6 - \u542f\u52a8\u540e\u629b\u51fa <code>OperationalError</code>\u3001<code>Can't connect to MySQL</code> - <code>session_dict</code> \u4e3a\u7a7a\u6216\u627e\u4e0d\u5230\u6307\u5b9a\u522b\u540d</p> <p>\u6392\u67e5 1. \u786e\u8ba4 <code>application/settings.py</code> \u4e2d\u7684\u4e3b\u673a\u3001\u7aef\u53e3\u3001\u8d26\u53f7\u3001\u5bc6\u7801\u6b63\u786e 2. \u5982\u679c\u4f7f\u7528 VPN/\u5821\u5792\u673a\uff0c\u68c0\u67e5\u7f51\u7edc\u94fe\u8def\u662f\u5426\u901a\u7545 3. \u5728\u76ee\u6807\u673a\u5668\u4e0a\u6267\u884c <code>mysql -h ...</code> \u4ee5\u9a8c\u8bc1\u8fde\u63a5 4. \u82e5\u4f7f\u7528 <code>medicine_test</code> \u7b49\u672c\u5730\u5e93\uff0c\u786e\u4fdd MySQL \u670d\u52a1\u5df2\u542f\u52a8</p>"},{"location":"projects/ntrt/troubleshooting/#2-json","title":"2. JSON \u89e3\u6790/\u7c7b\u578b\u5f02\u5e38","text":"<p>\u75c7\u72b6 - \u65e5\u5fd7\u51fa\u73b0 \u201c\u8df3\u8fc7 XX \u6761\u8bb0\u5f55\u201d - <code>_process_records</code> \u4e2d\u5927\u91cf <code>skipped</code></p> <p>\u6392\u67e5 1. <code>JSON_TYPE(field) != 'OBJECT'/'ARRAY'</code>\uff1a\u6570\u636e\u672c\u8eab\u4e0d\u7b26\u5408\u9884\u671f\uff0c\u9700\u8981\u5148\u6e05\u6d17 2. \u8bb0\u5f55\u4e2d\u542b\u6709 <code>NULL</code> \u6216\u7a7a\u5b57\u7b26\u4e32\uff0c\u9700\u5728 <code>_fetch_records_with_condition</code> \u6dfb\u52a0\u66f4\u591a\u8fc7\u6ee4 3. \u68c0\u67e5\u662f\u5426\u5b58\u5728\u975e\u6cd5\u5b57\u7b26\uff08\u5982\u672a\u8f6c\u4e49\u7684\u5f15\u53f7\uff09\uff0c\u5c1d\u8bd5\u4f7f\u7528 <code>JSON_VALID</code> \u7b5b\u9009</p>"},{"location":"projects/ntrt/troubleshooting/#3","title":"3. \u4e8b\u52a1\u56de\u6eda / \u5199\u5165\u5931\u8d25","text":"<p>\u75c7\u72b6 - \u63a7\u5236\u53f0\u63d0\u793a <code>session.rollback()</code> - MySQL \u672a\u66f4\u65b0\u6570\u636e</p> <p>\u6392\u67e5 1. \u67e5\u770b MySQL \u9519\u8bef\u65e5\u5fd7\uff0c\u786e\u8ba4\u662f\u5426\u6709\u5b57\u6bb5\u7c7b\u578b\u6216\u7ea6\u675f\u51b2\u7a81 2. \u6838\u5bf9 <code>_write_updates</code> \u4e2d\u4f20\u5165\u7684\u5b57\u6bb5\u540d\u4e0e\u6a21\u578b\u662f\u5426\u4e00\u81f4 3. \u5c06 <code>batch_size</code> \u8c03\u5c0f\uff0c\u907f\u514d\u5355\u6b21\u4e8b\u52a1\u8fc7\u5927 4. \u4e34\u65f6\u542f\u7528 SQLAlchemy \u7684 <code>echo=True</code> \u4ee5\u89c2\u5bdf\u5177\u4f53 SQL</p>"},{"location":"projects/ntrt/troubleshooting/#4-0-n","title":"4. \u5927\u91cf \u201c\u5904\u7406\u6210\u529f 0\uff0c\u8df3\u8fc7 N\u201d","text":"<p>\u573a\u666f 1. \u8fc7\u6ee4\u6761\u4ef6\u8fc7\u4e8e\u4e25\u683c\uff0c\u5bfc\u81f4 <code>records</code> \u4e3a\u7a7a 2. \u5904\u7406\u51fd\u6570\u8fd4\u56de <code>None</code>\uff08\u8868\u793a\u8df3\u8fc7\uff09</p> <p>\u5efa\u8bae - \u5728 <code>_clean_dataset</code> \u4e2d\u6253\u5370 <code>extra_filters</code> \u6216 <code>records[:5]</code>\uff0c\u786e\u8ba4\u547d\u4e2d\u60c5\u51b5 - \u9010\u6b65\u8c03\u8bd5 <code>_process_breadth_search</code>\u3001<code>_process_cited_articles</code>\uff0c\u786e\u4fdd\u8fd4\u56de\u7ed3\u6784\u6b63\u786e - \u82e5\u9700\u8981\u4fdd\u7559\u539f\u6570\u636e\uff0c\u53ef\u5728\u5904\u7406\u5668\u4e2d fallback \u4e3a <code>return data</code></p>"},{"location":"projects/ntrt/troubleshooting/#5","title":"5. \u6e05\u6d17\u8017\u65f6\u8fc7\u957f","text":"<p>\u4f18\u5316\u65b9\u5411 - \u8c03\u6574 <code>BATCH_SIZE</code>\uff08\u4f8b\u5982 100 \u2192 500\uff09 - \u5c06\u9700\u8981\u6e05\u6d17\u7684\u5b57\u6bb5\u62c6\u6210\u591a\u4e2a\u4efb\u52a1\u5e76\u884c\u8fd0\u884c - \u9488\u5bf9\u53ea\u9700\u4e00\u6b21\u7684\u5b57\u6bb5\uff0c\u6e05\u6d17\u5b8c\u6210\u540e\u5728\u6570\u636e\u5e93\u8bb0\u5f55 \u201c\u5df2\u5904\u7406\u201d \u72b6\u6001\uff0c\u907f\u514d\u91cd\u590d\u626b\u63cf</p>"},{"location":"projects/ntrt/troubleshooting/#6","title":"6. \u65e5\u5fd7\u8fc7\u591a\u6216\u8fc7\u5c11","text":"<p>\u5904\u7406 - \u5c06 <code>print</code> \u66ff\u6362\u4e3a <code>logging</code>\uff0c\u5e76\u914d\u7f6e\u8f93\u51fa\u7ea7\u522b/\u6587\u4ef6 - \u5bf9\u4e8e\u9ad8\u9891\u8f93\u51fa\uff0c\u53ef\u901a\u8fc7\u547d\u4ee4\u884c\u53c2\u6570\u6216\u914d\u7f6e\u5f00\u5173\u63a7\u5236</p>"},{"location":"projects/ntrt/troubleshooting/#7-orm","title":"7. ORM \u6a21\u578b\u627e\u4e0d\u5230\u5b57\u6bb5","text":"<p>\u75c7\u72b6 - \u629b\u51fa <code>AttributeError: type object 'NsfcTopicRcmdTaskList' has no attribute 'xxx'</code></p> <p>\u6392\u67e5 1. \u68c0\u67e5\u6570\u636e\u5e93\u7ed3\u6784\u662f\u5426\u4e0e ORM \u5b9a\u4e49\u4e00\u81f4 2. \u5982\u8868\u7ed3\u6784\u53d1\u751f\u53d8\u66f4\uff0c\u53ca\u65f6\u66f4\u65b0 <code>NsfcTopicRcmdModels.py</code> 3. \u8fd0\u884c <code>alembic</code> \u6216\u624b\u5de5 SQL \u4ee5\u6bd4\u5bf9\u5b57\u6bb5/\u7c7b\u578b</p>"},{"location":"projects/ntrt/troubleshooting/#8","title":"8. \u5b9a\u65f6\u4efb\u52a1\u91cd\u590d\u6267\u884c","text":"<p>\u73b0\u8c61 - \u540c\u4e00\u6279\u6570\u636e\u88ab\u6e05\u6d17\u591a\u6b21</p> <p>\u7b56\u7565 1. \u5728\u8868\u4e2d\u589e\u52a0 \u201clast_clean_at\u201d \u6216 \u201cis_cleaned\u201d \u5b57\u6bb5\uff0c\u7528\u4ee5\u8fc7\u6ee4 2. \u5c06 <code>cleaning_plan</code> \u62c6\u5206\u4e3a\u201c\u589e\u91cf\u4efb\u52a1\u201d\u201c\u5168\u91cf\u4efb\u52a1\u201d 3. \u5229\u7528\u5916\u90e8\u8c03\u5ea6\u5668\uff08Airflow/Celery\uff09\u4fdd\u8bc1\u4efb\u52a1\u4e92\u65a5</p>"},{"location":"projects/ntrt/troubleshooting/#9","title":"9. \u5982\u4f55\u5b9a\u4f4d\u5355\u6761\u5f02\u5e38\u8bb0\u5f55","text":"<ol> <li>\u5728 <code>_process_records</code> \u4e2d\u6355\u83b7\u5f02\u5e38\u5e76\u6253\u5370 <code>record_id</code></li> <li>\u4f7f\u7528 SQL <code>SELECT JSON_PRETTY(...)</code> \u67e5\u770b\u539f\u59cb\u5185\u5bb9</li> <li>\u5982\u679c\u95ee\u9898\u53ef\u91cd\u73b0\uff0c\u53ef\u5c06 <code>updates</code> \u4e34\u65f6\u5199\u5165\u6587\u4ef6\u540e\u4eba\u5de5\u6821\u9a8c</li> </ol> <p>\u82e5\u4ee5\u4e0a\u7b56\u7565\u65e0\u6cd5\u89e3\u51b3\uff0c\u53ef\u641c\u96c6\u4ee5\u4e0b\u4fe1\u606f\u540e\u518d\u4e0e\u56e2\u961f\u6c9f\u901a\uff1a 1. \u5b8c\u6574\u547d\u4ee4\u4e0e\u914d\u7f6e\uff08DATABASES\u3001BATCH_SIZE \u7b49\uff09 2. \u63a7\u5236\u53f0/\u65e5\u5fd7\u7684\u5b8c\u6574\u62a5\u9519 3. \u76f8\u5173\u8868\u7684\u6837\u672c\u6570\u636e\uff08\u8131\u654f\u540e\uff09 End Patch End Patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.applyPatch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply.patch to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.apply_PATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.applyPATCH to=functions.apply_PATCH to=functions.apply_PATCH Data file should be created proper. Need read file ensure content ok (since multiple apply patch text repeated?). check file.</p>"},{"location":"projects/ntrt/update/","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u672c\u6587\u8bb0\u5f55 NTRT \u9879\u76ee\u7684\u91cd\u8981\u53d8\u66f4\u548c\u8fed\u4ee3\u5386\u53f2\u3002</p>"},{"location":"projects/ntrt/update/#2025-01","title":"2025-01","text":""},{"location":"projects/ntrt/update/#_2","title":"\u6587\u6863\u4f53\u7cfb\u5347\u7ea7","text":"<ul> <li>\u65b0\u589e\u5b8c\u6574\u6587\u6863\u6808\uff1a\u6982\u8ff0 / \u5feb\u901f\u5f00\u59cb / \u67b6\u6784 / API / \u6838\u5fc3\u6a21\u5757 / \u914d\u7f6e / \u793a\u4f8b / \u6545\u969c\u6392\u67e5</li> <li>\u5c06 API \u8bf4\u660e\u6539\u4e3a mkdocstrings \u52a8\u6001\u751f\u6210\uff0c\u53bb\u9664 <code>code_to_markdown.py</code> \u4f9d\u8d56</li> <li>\u8c03\u6574\u5bfc\u822a\u7ed3\u6784\uff0c\u4e0e RCSB PDB \u9879\u76ee\u4fdd\u6301\u4e00\u81f4</li> </ul>"},{"location":"projects/ntrt/update/#_3","title":"\u4ee3\u7801\u4e0e\u914d\u7f6e","text":"<ul> <li>\u68b3\u7406 <code>cleaning_plan</code>\uff0c\u660e\u786e\u5404\u5b57\u6bb5\u5904\u7406\u6d41\u7a0b</li> <li>\u63d0\u70bc <code>BATCH_SIZE</code>\u3001<code>DEFAULT_DB_KEY</code> \u7b49\u5e38\u91cf\uff0c\u4fbf\u4e8e\u8fd0\u884c\u65f6\u8c03\u6574</li> <li>\u66f4\u65b0 <code>application/settings.py</code> \u793a\u4f8b\uff0c\u8865\u5145\u6d4b\u8bd5/\u751f\u4ea7\u591a\u5e93\u8bf4\u660e</li> </ul>"},{"location":"projects/ntrt/update/#2024-12","title":"2024-12","text":""},{"location":"projects/ntrt/update/#_4","title":"\u529f\u80fd","text":"<ul> <li>\u6784\u5efa <code>DataCleaner</code> \u4e3b\u6d41\u7a0b\uff0c\u8986\u76d6 <code>breadth_search</code> / <code>cited_articles</code> \u7b49\u6838\u5fc3\u5b57\u6bb5</li> <li>\u5f15\u5165 <code>CleaningModelMixin</code>\uff0c\u7edf\u4e00 <code>fetch_records_for_cleaning</code> \u4e0e <code>batch_update_field</code></li> <li>\u5c01\u88c5 <code>BaseCRUD</code>\uff0c\u63d0\u4f9b\u6279\u91cf\u63d2\u5165\u3001\u6761\u4ef6\u66f4\u65b0\u3001\u5206\u9875\u67e5\u8be2\u7b49\u80fd\u529b</li> </ul>"},{"location":"projects/ntrt/update/#_5","title":"\u6570\u636e\u4e0e\u89c4\u5219","text":"<ul> <li>\u8f93\u51fa\u300a\u6570\u636e\u6e05\u6d17\u6d41\u7a0b\u8bf4\u660e\u300b\u300a\u6587\u4ef6\u8c03\u7528\u5173\u7cfb\u8bf4\u660e\u300b\u7b49\u53c2\u8003\u6587\u6863</li> <li>\u63d0\u4f9b JSON \u793a\u4f8b\u6587\u4ef6\uff08\u9879\u76ee/\u6587\u7ae0/\u5f15\u7528\uff09\u4f5c\u4e3a\u6d4b\u8bd5\u6570\u636e\u6e90</li> </ul>"},{"location":"projects/ntrt/update/#_6","title":"\u7248\u672c\u8bf4\u660e","text":"\u7248\u672c \u65e5\u671f \u8bf4\u660e 1.1.0 2025-01 \u6587\u6863\u4f53\u7cfb\u5347\u7ea7\uff0cAPI \u6539\u7528 mkdocstrings 1.0.0 2024-12 \u53d1\u5e03\u6e05\u6d17\u6d41\u7a0b\u4e0e ORM \u5c01\u88c5\u7684\u521d\u7248 <p>\u7248\u672c\u53f7\u9075\u5faa <code>\u4e3b\u7248\u672c\u53f7.\u6b21\u7248\u672c\u53f7.\u4fee\u8ba2\u53f7</code> \u89c4\u5219\uff1a - \u4e3b\u7248\u672c\u53f7\uff1a\u91cd\u5927\u67b6\u6784\u6216\u529f\u80fd\u8c03\u6574 - \u6b21\u7248\u672c\u53f7\uff1a\u65b0\u589e\u7279\u6027\u6216\u6587\u6863 - \u4fee\u8ba2\u53f7\uff1a\u4fee\u590d\u7f3a\u9677\u6216\u5c0f\u5e45\u6539\u8fdb</p> <p>\u672a\u6765\u8ba1\u5212\uff1a - \u5c06 <code>cleaning_plan</code> \u62bd\u8c61\u4e3a\u53ef\u914d\u7f6e YAML/JSON - \u5f15\u5165\u6807\u51c6\u65e5\u5fd7\u4e0e\u76d1\u63a7\u6307\u6807 - \u7ed3\u5408\u8c03\u5ea6\u5e73\u53f0\u5b9e\u73b0\u589e\u91cf/\u5168\u91cf\u81ea\u52a8\u5316\u8fd0\u884c</p>"},{"location":"projects/rcsb_pdb/","title":"RCSB PDB \u9879\u76ee\u6982\u8ff0","text":"<p>RCSB PDB \u9879\u76ee\u662f\u4e00\u4e2a\u56f4\u7ed5 Protein Data Bank \u6570\u636e\u6784\u5efa\u7684\u4f01\u4e1a\u7ea7\u91c7\u96c6\u4e0e\u5165\u5e93\u7cfb\u7edf\u3002\u5b83\u7531 Scrapy \u722c\u866b\u3001\u5b57\u6bb5\u8fc7\u6ee4\u5668\u3001Mongo/Redis \u8f85\u52a9\u7ec4\u4ef6\u4ee5\u53ca\u591a\u6761 Pipeline \u7ec4\u6210\uff0c\u652f\u6301\u5168\u91cf\u4e0e\u589e\u91cf\u53cc\u6a21\u5f0f\uff0c\u80fd\u591f\u540c\u6b65\u7ed3\u6784\u6761\u76ee\u3001\u805a\u5408\u5b9e\u4f53\u3001\u81ea\u52a8\u62c9\u53d6 ChemComp/DrugBank \u5143\u6570\u636e\uff0c\u5e76\u5c06\u7ed3\u679c\u843d\u76d8\u53ca\u843d\u5e93\u3002</p>"},{"location":"projects/rcsb_pdb/#_1","title":"\u6587\u6863\u7d22\u5f15","text":"\u6587\u6863 \u4f5c\u7528 \u5feb\u901f\u5f00\u59cb \u672c\u5730\u73af\u5883\u51c6\u5907\u3001\u811a\u672c\u8fd0\u884c\u3001\u5e38\u89c1\u547d\u4ee4 \u67b6\u6784\u8bbe\u8ba1 \u7ec4\u4ef6\u5212\u5206\u3001\u6570\u636e\u6d41\u3001\u4f9d\u8d56\u5173\u7cfb \u7cfb\u7edf\u5168\u666f \u57fa\u4e8e mkdocstrings \u7684 API \u53c2\u8003\uff08\u4ee3\u7801\u5373\u6587\u6863\uff09 \u6838\u5fc3\u6a21\u5757 \u6838\u5fc3 Item/Pipeline/Spider \u7684\u884c\u4e3a\u8bf4\u660e \u914d\u7f6e\u8bf4\u660e \u6570\u636e\u5e93\u3001\u65e5\u5fd7\u3001Scrapy/Playwright \u53c2\u6570 \u4f7f\u7528\u793a\u4f8b \u5168\u91cf\u3001\u589e\u91cf\u3001\u624b\u52a8 PDB \u8c03\u8bd5\u7b49\u573a\u666f \u6545\u969c\u6392\u67e5 \u7f51\u7edc\u3001API\u3001\u5165\u5e93\u5931\u8d25\u3001\u589e\u91cf\u6e38\u6807\u7b49\u95ee\u9898 \u66f4\u65b0\u65e5\u5fd7 \u8fd1\u671f\u8fed\u4ee3\u4e0e\u7248\u672c\u8bb0\u5f55"},{"location":"projects/rcsb_pdb/#_2","title":"\u7cfb\u7edf\u4eae\u70b9","text":"<ul> <li>\u591a\u6e90 API \u805a\u5408\uff1aSearch\u3001Entry\u3001Polymer/Nonpolymer/ChemComp/DrugBank \u591a\u63a5\u53e3\u534f\u540c\u3002</li> <li>\u667a\u80fd\u589e\u91cf\uff1aRedis + Mongo \u53cc\u6e38\u6807\uff0c\u652f\u6301\u6309 revision_date \u53bb\u91cd\u4e0e\u56de\u6eaf\u3002</li> <li>\u5b57\u6bb5\u88c1\u526a\uff1a<code>FieldFilter</code> \u652f\u6301 JSON \u914d\u7f6e\u7684\u767d\u540d\u5355/\u9ed1\u540d\u5355\u4e0e\u5d4c\u5957\u89c4\u5219\u3002</li> <li>\u591a\u526f\u672c\u843d\u5730\uff1a\u540c\u65f6\u751f\u6210 JSON \u6587\u4ef6\u3001Mongo \u6587\u6863\u4e0e OSS/\u672c\u5730\u6587\u4ef6\u3002</li> <li>\u53ef\u63a7\u5e76\u53d1\u4e0e\u91cd\u8bd5\uff1a\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6 + Playwright/\u4ee3\u7406/\u9a8c\u8bc1\u7801\u652f\u6301\u3002</li> </ul>"},{"location":"projects/rcsb_pdb/#_3","title":"\u76ee\u5f55\u901f\u89c8","text":"<pre><code>code_liu/RCSB_PDB/\n\u251c\u2500\u2500 firing.py                  # \u4efb\u52a1\u5165\u53e3\n\u251c\u2500\u2500 README.md                  # \u9879\u76ee\u8bf4\u660e\n\u2514\u2500\u2500 src/\n    \u251c\u2500\u2500 settings.py            # Scrapy / \u6570\u636e\u5e93 / \u4e2d\u95f4\u4ef6\u914d\u7f6e\n    \u251c\u2500\u2500 items/\n    \u2502   \u2514\u2500\u2500 rcsb_pdb_item.py   # Item \u5b9a\u4e49\n    \u251c\u2500\u2500 pipelines/\n    \u2502   \u2514\u2500\u2500 rcsb_pdb_pipeline.py\n    \u2514\u2500\u2500 spider/rcsb_pdb/\n        \u251c\u2500\u2500 field_filter.py    # \u5b57\u6bb5\u88c1\u526a\n        \u2514\u2500\u2500 rcsb_pdb_spider.py # \u4e3b\u722c\u866b\n</code></pre> <p>\u6240\u6709\u6587\u6863\u5747\u4f4d\u4e8e <code>MkDocs_doc/docs/projects/ntrt/</code> \u76ee\u5f55\uff0c\u53ef\u76f4\u63a5\u901a\u8fc7 <code>mkdocs serve</code> \u6d4f\u89c8\u3002\u82e5\u9700\u65b0\u589e\u5185\u5bb9\uff0c\u5efa\u8bae\u9075\u5faa\u6982\u89c8 \u2192 \u5feb\u901f\u5f00\u59cb \u2192 \u67b6\u6784 \u2192 \u6a21\u5757 \u2192 \u914d\u7f6e \u2192 \u6392\u969c\u7684\u9605\u8bfb\u987a\u5e8f\uff0c\u786e\u4fdd\u56e2\u961f\u6210\u5458\u80fd\u5728 5 \u5206\u949f\u5185\u5b9a\u4f4d\u5230\u6240\u9700\u4fe1\u606f\u3002</p>"},{"location":"projects/rcsb_pdb/api/","title":"\u7cfb\u7edf\u5168\u666f - API \u53c2\u8003","text":"<p>\u672c\u6587\u6863\u4f7f\u7528 <code>mkdocstrings</code> \u81ea\u52a8\u4ece\u4ee3\u7801\u751f\u6210\uff0c\u4f1a\u5b9e\u65f6\u53cd\u6620\u4ee3\u7801\u7684\u6700\u65b0\u72b6\u6001\u3002</p> <p>\u63d0\u793a\uff1a\u672c\u6587\u6863\u4e2d\u7684 API \u4fe1\u606f\u76f4\u63a5\u4ece\u6e90\u4ee3\u7801\u63d0\u53d6\uff0c\u5305\u62ec\u7c7b\u3001\u65b9\u6cd5\u3001\u53c2\u6570\u3001\u8fd4\u56de\u503c\u7b49\u3002\u4ee3\u7801\u66f4\u65b0\u540e\uff0c\u8fd0\u884c <code>mkdocs serve</code> \u5373\u53ef\u770b\u5230\u6700\u65b0\u5185\u5bb9\u3002</p>"},{"location":"projects/rcsb_pdb/api/#_1","title":"\u722c\u866b\u6a21\u5757","text":""},{"location":"projects/rcsb_pdb/api/#rcsballapispider","title":"RcsbAllApiSpider","text":"<p>\u4e3b\u722c\u866b\u7c7b\uff0c\u8d1f\u8d23\u4ece RCSB PDB \u83b7\u53d6\u86cb\u767d\u8d28\u7ed3\u6784\u6570\u636e\u3002</p>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider","title":"<code>RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider(pdb_id: Optional[str] = None, output_filename: Optional[str] = None, field_filter_config: Optional[str] = None, mode: Optional[str] = None, max_targets: Optional[int] = None, start_from: Optional[int] = None, batch_size: Optional[int] = None, overlap_days: Optional[int] = None, *args, **kwargs)</code>","text":"<p>               Bases: <code>Spider</code></p> <p>\u63d0\u53d6\u5b8c\u6574 CoreEntry \u6570\u636e\u7684\u722c\u866b</p> <p>\u521d\u59cb\u5316 RCSB \u5168\u91cf\u722c\u866b\u3002</p> \u53c2\u6570 <p>pdb_id (Optional[str]): \u624b\u52a8\u6307\u5b9a\u7684 PDB ID\uff08\u5355\u6761\u8c03\u8bd5\u4f7f\u7528\uff09\u3002 output_filename (Optional[str]): \u5355\u6761\u8c03\u8bd5\u6a21\u5f0f\u4e0b\u7684\u8f93\u51fa\u6587\u4ef6\u540d\u3002 field_filter_config (Optional[str]): \u5b57\u6bb5\u8fc7\u6ee4\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 mode (Optional[str]): \u8fd0\u884c\u6a21\u5f0f\uff0c\u652f\u6301 full \u4e0e incremental\u3002 max_targets (Optional[int]): \u672c\u6b21\u4efb\u52a1\u6293\u53d6\u7684\u6700\u5927\u7ed3\u6784\u6570\u3002 start_from (Optional[int]): Search API \u5206\u9875\u8d77\u70b9\u3002 batch_size (Optional[int]): Search API \u6bcf\u6279\u8bf7\u6c42\u7684\u6761\u6570\u3002 overlap_days (Optional[int]): \u589e\u91cf\u6a21\u5f0f\u5411\u524d\u91cd\u53e0\u7684\u5929\u6570\u3002 args: \u900f\u4f20\u7ed9\u57fa\u7c7b\u7684\u5176\u4f59\u4f4d\u7f6e\u53c2\u6570\u3002 kwargs: \u900f\u4f20\u7ed9\u57fa\u7c7b\u7684\u5176\u4f59\u5173\u952e\u5b57\u53c2\u6570\u3002</p> Source code in <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\rcsb_pdb_spider.py</code> <pre><code>def __init__(\n    self,\n    pdb_id: Optional[str] = None,\n    output_filename: Optional[str] = None,\n    field_filter_config: Optional[str] = None,\n    mode: Optional[str] = None,\n    max_targets: Optional[int] = None,\n    start_from: Optional[int] = None,\n    batch_size: Optional[int] = None,\n    overlap_days: Optional[int] = None,\n    *args,\n    **kwargs,\n):\n    \"\"\"\n    \u521d\u59cb\u5316 RCSB \u5168\u91cf\u722c\u866b\u3002\n\n    \u53c2\u6570:\n        pdb_id (Optional[str]): \u624b\u52a8\u6307\u5b9a\u7684 PDB ID\uff08\u5355\u6761\u8c03\u8bd5\u4f7f\u7528\uff09\u3002\n        output_filename (Optional[str]): \u5355\u6761\u8c03\u8bd5\u6a21\u5f0f\u4e0b\u7684\u8f93\u51fa\u6587\u4ef6\u540d\u3002\n        field_filter_config (Optional[str]): \u5b57\u6bb5\u8fc7\u6ee4\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002\n        mode (Optional[str]): \u8fd0\u884c\u6a21\u5f0f\uff0c\u652f\u6301 full \u4e0e incremental\u3002\n        max_targets (Optional[int]): \u672c\u6b21\u4efb\u52a1\u6293\u53d6\u7684\u6700\u5927\u7ed3\u6784\u6570\u3002\n        start_from (Optional[int]): Search API \u5206\u9875\u8d77\u70b9\u3002\n        batch_size (Optional[int]): Search API \u6bcf\u6279\u8bf7\u6c42\u7684\u6761\u6570\u3002\n        overlap_days (Optional[int]): \u589e\u91cf\u6a21\u5f0f\u5411\u524d\u91cd\u53e0\u7684\u5929\u6570\u3002\n        args: \u900f\u4f20\u7ed9\u57fa\u7c7b\u7684\u5176\u4f59\u4f4d\u7f6e\u53c2\u6570\u3002\n        kwargs: \u900f\u4f20\u7ed9\u57fa\u7c7b\u7684\u5176\u4f59\u5173\u952e\u5b57\u53c2\u6570\u3002\n    \"\"\"\n    super().__init__(*args, **kwargs)\n\n    # ====== \u8fd0\u884c\u6a21\u5f0f ======\n    self.manual_ids: List[str] = [pdb_id.upper()] if pdb_id else []\n    self.manual_run = bool(self.manual_ids)\n\n    self.mode = (mode or \"full\").lower()\n    if self.mode not in {\"full\", \"incremental\"}:\n        self.mode = \"full\"\n\n    self.max_targets = int(max_targets) if max_targets else self.DEFAULT_MAX_TARGETS\n    self.batch_size = int(batch_size) if batch_size else min(self.DEFAULT_BATCH_SIZE, self.max_targets)\n    self.start_from = int(start_from) if start_from else 0\n    self.overlap_days = int(overlap_days) if overlap_days else 1\n\n    # ====== \u8f93\u51fa\u8def\u5f84 ======\n    self.output_dir = Path(__file__).resolve().parent / \"inhance\"\n    self.output_dir.mkdir(parents=True, exist_ok=True)\n    self.user_output_filename = output_filename or self.OUTPUT_FILENAME\n\n    # ====== \u5b57\u6bb5\u8fc7\u6ee4\u5668 ======\n    config_path = field_filter_config if field_filter_config is not None else self.FIELD_FILTER_CONFIG\n    if config_path:\n        cfg_path = Path(config_path)\n        if not cfg_path.is_absolute():\n            cfg_path = Path(__file__).resolve().parent / cfg_path\n        config_path = str(cfg_path)\n    self.field_filter = FieldFilter(config_path)\n\n    # ====== Mongo / Redis \u4f9d\u8d56 ======\n    self.mongo_manager = MongoDBManager()\n    self.increment_collection = self.mongo_manager.db[self.INCREMENT_COLLECTION]\n    self.redis_conn = RedisManager().get_connection()\n\n    # ====== \u589e\u91cf\u6e38\u6807 ======\n    if self.mode == \"incremental\" and not self.manual_run:\n        self.last_revision_cursor = self._load_increment_cursor()\n        self.increment_start_date = self._compute_increment_start(self.last_revision_cursor)\n        self.run_max_revision = self.last_revision_cursor\n    else:\n        self.last_revision_cursor = None\n        self.increment_start_date = None\n        self.run_max_revision = None\n\n    # ====== \u8fd0\u884c\u72b6\u6001 ======\n    self.search_finished = False\n    self.total_enqueued = 0\n    self.entry_contexts: Dict[str, Dict[str, Any]] = {}\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider.closed","title":"<code>closed(reason)</code>","text":"<p>\u722c\u866b\u5173\u95ed\u65f6\u66f4\u65b0 Mongo \u4e2d\u7684\u589e\u91cf\u6e38\u6807\u3002</p> \u53c2\u6570 <p>reason (str): Scrapy \u5173\u95ed\u539f\u56e0\u3002</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\rcsb_pdb_spider.py</code> <pre><code>def closed(self, reason):\n    \"\"\"\n    \u722c\u866b\u5173\u95ed\u65f6\u66f4\u65b0 Mongo \u4e2d\u7684\u589e\u91cf\u6e38\u6807\u3002\n\n    \u53c2\u6570:\n        reason (str): Scrapy \u5173\u95ed\u539f\u56e0\u3002\n    \"\"\"\n    if self.mode == \"incremental\" and self.run_max_revision:\n        self.increment_collection.update_one(\n            {\"_id\": self.INCREMENT_DOC_ID},\n            {\"$set\": {\"last_revision\": self.run_max_revision}},\n            upsert=True,\n        )\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider.parse","title":"<code>parse(response)</code>","text":"<p>Scrapy \u9ed8\u8ba4\u5165\u53e3\u3002</p> \u53c2\u6570 <p>response (Response): \u5360\u4f4d\u54cd\u5e94\uff08\u6765\u6e90\u4e8e start_urls\uff09\u3002</p> <p>\u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed\u5c06\u8981\u8c03\u5ea6\u7684\u8bf7\u6c42\u3002</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\rcsb_pdb_spider.py</code> <pre><code>def parse(self, response):\n    \"\"\"\n    Scrapy \u9ed8\u8ba4\u5165\u53e3\u3002\n\n    \u53c2\u6570:\n        response (Response): \u5360\u4f4d\u54cd\u5e94\uff08\u6765\u6e90\u4e8e start_urls\uff09\u3002\n    \u8fd4\u56de:\n        Generator[scrapy.Request, None, None]: \u540e\u7eed\u5c06\u8981\u8c03\u5ea6\u7684\u8bf7\u6c42\u3002\n    \"\"\"\n    if self.manual_run:\n        for pdb_id in self.manual_ids:\n            yield from self._schedule_entry(pdb_id, manual=True)\n        return\n\n    yield from self._request_search(self.start_from)\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider.parse_entry","title":"<code>parse_entry(response)</code>","text":"<p>\u89e3\u6790 Entry API \u54cd\u5e94\u5e76\u5206\u53d1\u5b9e\u4f53\u8bf7\u6c42\u3002</p> \u53c2\u6570 <p>response (Response): Entry API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002</p> <p>\u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed\u5b9e\u4f53\u6216\u5316\u5408\u7269\u8bf7\u6c42\u3002</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\rcsb_pdb_spider.py</code> <pre><code>def parse_entry(self, response):\n    \"\"\"\n    \u89e3\u6790 Entry API \u54cd\u5e94\u5e76\u5206\u53d1\u5b9e\u4f53\u8bf7\u6c42\u3002\n\n    \u53c2\u6570:\n        response (Response): Entry API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002\n    \u8fd4\u56de:\n        Generator[scrapy.Request, None, None]: \u540e\u7eed\u5b9e\u4f53\u6216\u5316\u5408\u7269\u8bf7\u6c42\u3002\n    \"\"\"\n    pdb_id = response.meta[\"pdb_id\"]\n    context = self.entry_contexts.get(pdb_id)\n    if not context:\n        return\n\n    data = self._parse_json(response)\n    if not data:\n        self._cleanup_entry(pdb_id)\n        return\n\n    context[\"result\"][\"rcsb_id\"] = data.get(\"rcsb_id\")\n\n    properties = {k: v for k, v in data.items() if k != \"rcsb_id\"}\n    context[\"result\"][\"properties\"] = self.field_filter.filter_data(\n        {\"properties\": properties},\n        \"CoreEntry\",\n    ).get(\"properties\", properties)\n\n    revision_date = (data.get(\"rcsb_accession_info\") or {}).get(\"revision_date\")\n    context[\"revision_date\"] = revision_date\n    self._update_run_max_revision(revision_date)\n\n    if self.mode == \"incremental\" and self._is_duplicate_revision(pdb_id, revision_date):\n        self.logger.info(\"\u23ed\ufe0f \u8df3\u8fc7\u672a\u66f4\u65b0\u7ed3\u6784 %s (revision: %s)\", pdb_id, revision_date)\n        self._cleanup_entry(pdb_id)\n        return\n\n    container = data.get(\"rcsb_entry_container_identifiers\", {})\n    entity_ids = {\n        \"polymer_entity\": container.get(\"polymer_entity_ids\", []) or [],\n        \"nonpolymer_entity\": container.get(\"nonpolymer_entity_ids\", []) or [],\n        \"branched_entity\": container.get(\"branched_entity_ids\", []) or [],\n    }\n\n    context[\"pending\"][\"entity\"] = sum(len(ids) for ids in entity_ids.values())\n\n    if context[\"pending\"][\"entity\"] == 0:\n        followups = self._after_entities_complete(pdb_id)\n        if followups:\n            yield from followups\n        return\n\n    for entity_type, ids in entity_ids.items():\n        for entity_id in ids:\n            url = f\"{self.API_ENDPOINTS[entity_type]}/{pdb_id}/{entity_id}\"\n            yield scrapy.Request(\n                url=url,\n                callback=self._parse_entity,\n                meta={\"pdb_id\": pdb_id, \"entity_type\": entity_type},\n                errback=self._entity_errback,\n            )\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider.RcsbAllApiSpider.parse_search","title":"<code>parse_search(response)</code>","text":"<p>\u89e3\u6790 Search API \u54cd\u5e94\u5e76\u8c03\u5ea6 Entry \u8bf7\u6c42\u3002</p> \u53c2\u6570 <p>response (Response): Search API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002</p> <p>\u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed Entry \u8bf7\u6c42\u3002</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\rcsb_pdb_spider.py</code> <pre><code>def parse_search(self, response):\n    \"\"\"\n    \u89e3\u6790 Search API \u54cd\u5e94\u5e76\u8c03\u5ea6 Entry \u8bf7\u6c42\u3002\n\n    \u53c2\u6570:\n        response (Response): Search API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002\n    \u8fd4\u56de:\n        Generator[scrapy.Request, None, None]: \u540e\u7eed Entry \u8bf7\u6c42\u3002\n    \"\"\"\n    data = self._parse_json(response)\n    result_set = data.get(\"result_set\", [])\n    if not result_set:\n        self.search_finished = True\n        return\n\n    for entry in result_set:\n        if self.total_enqueued &gt;= self.max_targets:\n            break\n        pdb_id = entry.get(\"identifier\")\n        if not pdb_id:\n            continue\n        self.total_enqueued += 1\n        yield from self._schedule_entry(pdb_id)\n\n    if self.total_enqueued &lt; self.max_targets:\n        next_start = response.meta.get(\"start\", 0) + len(result_set)\n        yield from self._request_search(next_start)\n    else:\n        self.search_finished = True\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#fieldfilter","title":"FieldFilter","text":"<p>\u5b57\u6bb5\u8fc7\u6ee4\u5668\uff0c\u7528\u4e8e\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u8fc7\u6ee4\u4e0d\u9700\u8981\u7684\u5b57\u6bb5\u3002</p>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.field_filter.FieldFilter","title":"<code>RCSB_PDB.src.spider.rcsb_pdb.field_filter.FieldFilter(config_path: Optional[str] = None)</code>","text":"<p>\u5b57\u6bb5\u8fc7\u6ee4\u5668</p> <p>\u521d\u59cb\u5316\u8fc7\u6ee4\u5668\u3002</p> \u53c2\u6570 <p>config_path (Optional[str]): JSON \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0cNone \u8868\u793a\u4e0d\u8fc7\u6ee4\u3002</p> Source code in <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\field_filter.py</code> <pre><code>def __init__(self, config_path: Optional[str] = None):\n    \"\"\"\n    \u521d\u59cb\u5316\u8fc7\u6ee4\u5668\u3002\n\n    \u53c2\u6570:\n        config_path (Optional[str]): JSON \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0cNone \u8868\u793a\u4e0d\u8fc7\u6ee4\u3002\n    \"\"\"\n    self.config = None\n    if config_path:\n        self._load_config(config_path)\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.spider.rcsb_pdb.field_filter.FieldFilter.filter_data","title":"<code>filter_data(data: Dict[str, Any], section: str) -&gt; Dict[str, Any]</code>","text":"<p>\u6839\u636e\u914d\u7f6e\u8fc7\u6ee4\u6307\u5b9a\u677f\u5757\u7684\u6570\u636e\u3002</p> \u53c2\u6570 <p>data (Dict[str, Any]): \u5f85\u8fc7\u6ee4\u7684\u6570\u636e\u3002 section (str): \u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u677f\u5757\u540d\u79f0\u3002</p> <p>\u8fd4\u56de:     Dict[str, Any]: \u8fc7\u6ee4\u540e\u7684\u6570\u636e\u3002</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>RCSB_PDB\\src\\spider\\rcsb_pdb\\field_filter.py</code> <pre><code>def filter_data(self, data: Dict[str, Any], section: str) -&gt; Dict[str, Any]:\n    \"\"\"\n    \u6839\u636e\u914d\u7f6e\u8fc7\u6ee4\u6307\u5b9a\u677f\u5757\u7684\u6570\u636e\u3002\n\n    \u53c2\u6570:\n        data (Dict[str, Any]): \u5f85\u8fc7\u6ee4\u7684\u6570\u636e\u3002\n        section (str): \u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u677f\u5757\u540d\u79f0\u3002\n    \u8fd4\u56de:\n        Dict[str, Any]: \u8fc7\u6ee4\u540e\u7684\u6570\u636e\u3002\n    \"\"\"\n    if not self.config or section not in self.config:\n        return data\n\n    config = self.config[section]\n    mode = self.config.get(\"mode\", \"whitelist\")\n\n    # \u7edf\u4e00\u5904\u7406\u767d\u540d\u5355\u548c\u9ed1\u540d\u5355\n    if mode == \"whitelist\":\n        include_all = config.get(\"include_all\", True)\n        include_fields = config.get(\"include_fields\", [])\n        result = dict(data) if include_all else {k: data[k] for k in include_fields if k in data}\n    else:\n        result = dict(data)\n\n    # \u6392\u9664\u5b57\u6bb5\n    for field in config.get(\"exclude_fields\", []):\n        result.pop(field, None)\n\n    # \u5e94\u7528\u5b57\u6bb5\u89c4\u5219\n    for field_path, rule in config.get(\"field_rules\", {}).items():\n        self._apply_rule(result, field_path, rule)\n\n    return result\n</code></pre>"},{"location":"projects/rcsb_pdb/api/#_2","title":"\u6570\u636e\u9879\u6a21\u5757","text":""},{"location":"projects/rcsb_pdb/api/#rcsballapiitem","title":"RcsbAllApiItem","text":"<p>RCSB PDB \u6570\u636e\u9879\u5b9a\u4e49\uff0c\u7528\u4e8e\u6807\u51c6\u5316\u6570\u636e\u8f93\u51fa\u683c\u5f0f\u3002</p>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.items.rcsb_pdb_item.RcsbAllApiItem","title":"<code>RCSB_PDB.src.items.rcsb_pdb_item.RcsbAllApiItem</code>","text":"<p>               Bases: <code>BaseItem</code></p> <p>All API \u5168\u5b57\u6bb5\u6570\u636e\u9879\u3002</p> \u5b57\u6bb5 <p>PDB_ID: \u7ed3\u6784 ID\u3002 rcsb_id: Entry API \u8fd4\u56de\u7684\u552f\u4e00\u6807\u8bc6\u3002 entry_properties: Entry API \u7684 properties \u5b57\u5178\u3002 polymer_entities: Polymer \u5b9e\u4f53\u6570\u7ec4\u3002 nonpolymer_entities: Nonpolymer \u5b9e\u4f53\u6570\u7ec4\u3002 branched_entities: Branched \u5b9e\u4f53\u6570\u7ec4\u3002 chemcomp: ChemComp \u6570\u636e\u5217\u8868\u3002 drugbank: DrugBank \u6570\u636e\u5217\u8868\u3002 max_revision_date: revision_date\uff0c\u7528\u4e8e\u589e\u91cf\u6e38\u6807\u3002 cif_file: CIF \u6587\u4ef6\u4e0b\u8f7d\u7ed3\u679c\u3002 validation_image: \u9a8c\u8bc1\u56fe\u4e0b\u8f7d\u7ed3\u679c\u3002</p>"},{"location":"projects/rcsb_pdb/api/#_3","title":"\u7ba1\u9053\u6a21\u5757","text":""},{"location":"projects/rcsb_pdb/api/#rcsbpdbpipeline","title":"RcsbPdbPipeline","text":"<p>\u6570\u636e\u5165\u5e93\u7ba1\u9053\uff0c\u8d1f\u8d23\u5c06\u6570\u636e\u5199\u5165 MongoDB\u3002</p>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.pipelines.rcsb_pdb_pipeline.RcsbPdbPipeline","title":"<code>RCSB_PDB.src.pipelines.rcsb_pdb_pipeline.RcsbPdbPipeline</code>","text":"<p>               Bases: <code>MongoDBRawStoragePipeline</code></p> <p>All API \u6570\u636e\u5165\u5e93 Pipeline\u3002</p> \u5c5e\u6027 <p>connect_key: Mongo \u8fde\u63a5\u914d\u7f6e key\u3002 collection_name: \u5199\u5165\u7684\u96c6\u5408\u540d\u79f0\u3002 item_class: \u671f\u671b\u7684 Item \u7c7b\u578b\u3002</p>"},{"location":"projects/rcsb_pdb/api/#_4","title":"\u914d\u7f6e\u6a21\u5757","text":""},{"location":"projects/rcsb_pdb/api/#settings","title":"settings","text":"<p>\u9879\u76ee\u914d\u7f6e\u6587\u4ef6\uff0c\u5305\u542b Scrapy \u914d\u7f6e\u3001\u6570\u636e\u5e93\u914d\u7f6e\u3001\u65e5\u5fd7\u914d\u7f6e\u7b49\u3002</p>"},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.settings","title":"<code>RCSB_PDB.src.settings</code>","text":""},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.settings--time-2025225-1038","title":"@Time    : 2025/2/25 10:38","text":""},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.settings--user-mabin","title":"@User  : Mabin","text":""},{"location":"projects/rcsb_pdb/api/#RCSB_PDB.src.settings--description-setting","title":"@Description  :\u722c\u866bsetting","text":""},{"location":"projects/rcsb_pdb/api/#_5","title":"\u4f7f\u7528\u8bf4\u660e","text":""},{"location":"projects/rcsb_pdb/api/#_6","title":"\u67e5\u770b\u6e90\u4ee3\u7801","text":"<p>\u6bcf\u4e2a API \u6587\u6863\u90fd\u5305\u542b\u6e90\u4ee3\u7801\u94fe\u63a5\uff0c\u70b9\u51fb\u53ef\u4ee5\u67e5\u770b\u5b8c\u6574\u7684\u6e90\u4ee3\u7801\u5b9e\u73b0\u3002</p>"},{"location":"projects/rcsb_pdb/api/#_7","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>\u53c2\u6570\u7c7b\u578b\uff1a\u663e\u793a\u5728\u65b9\u6cd5\u7b7e\u540d\u4e2d</li> <li>\u53c2\u6570\u8bf4\u660e\uff1a\u4ece docstring \u4e2d\u63d0\u53d6</li> <li>\u9ed8\u8ba4\u503c\uff1a\u5982\u679c\u6709\u9ed8\u8ba4\u503c\u4f1a\u663e\u793a</li> </ul>"},{"location":"projects/rcsb_pdb/api/#_8","title":"\u8fd4\u56de\u503c\u8bf4\u660e","text":"<ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u663e\u793a\u5728\u65b9\u6cd5\u7b7e\u540d\u4e2d</li> <li>\u8fd4\u56de\u503c\u8bf4\u660e\uff1a\u4ece docstring \u4e2d\u63d0\u53d6</li> </ul>"},{"location":"projects/rcsb_pdb/api/#_9","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u6587\u6863\u5185\u5bb9\u76f4\u63a5\u4ece\u4ee3\u7801\u751f\u6210\uff0c\u786e\u4fdd\u4ee3\u7801\u4e2d\u7684 docstring \u5b8c\u6574\u51c6\u786e</li> <li>\u4f7f\u7528 Google \u98ce\u683c\u7684 docstring \u683c\u5f0f\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6587\u6863\u6548\u679c</li> <li>\u4ee3\u7801\u66f4\u65b0\u540e\uff0c\u6587\u6863\u4f1a\u81ea\u52a8\u53cd\u6620\u6700\u65b0\u53d8\u5316</li> </ul>"},{"location":"projects/rcsb_pdb/api/#_10","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb - \u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u9879\u76ee</li> <li>\u6838\u5fc3\u6a21\u5757 - \u8be6\u7ec6\u7684\u6a21\u5757\u8bf4\u660e</li> <li>\u4f7f\u7528\u793a\u4f8b - \u4ee3\u7801\u4f7f\u7528\u793a\u4f8b</li> <li>\u914d\u7f6e\u8bf4\u660e - \u914d\u7f6e\u53c2\u6570\u8be6\u89e3</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/","title":"\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"projects/rcsb_pdb/architecture/#1","title":"1. \u603b\u89c8","text":"<p>RCSB PDB \u9879\u76ee\u91c7\u7528\u300c\u91c7\u96c6\u5c42 + \u88c1\u526a\u5c42 + \u5b58\u50a8\u5c42 + \u72b6\u6001\u5c42\u300d\u7684\u5206\u5c42\u8bbe\u8ba1\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Scrapy    \u2502 -&gt; \u2502 FieldFilter\u2502 -&gt; \u2502 Pipelines   \u2502 -&gt; \u2502 Mongo/Files\u2502\n\u2502 Spider    \u2502    \u2502 (JSON \u89c4\u5219)\u2502    \u2502 (File/Mongo)\u2502    \u2502 + Redis     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2191                  \u2191                 \u2191                \u2191\n        \u2502                  \u2502                 \u2502                \u2502\n        \u2514\u2500\u2500\u2500\u2500 Playwright / \u4e2d\u95f4\u4ef6 \u2500\u2500\u2500\u2534\u2500\u2500\u2500 \u914d\u7f6e/\u65e5\u5fd7 \u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500 \u6e38\u6807/\u7f13\u5b58\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#2","title":"2. \u5173\u952e\u7ec4\u4ef6","text":"\u6a21\u5757 \u4f4d\u7f6e \u4f5c\u7528 <code>RcsbAllApiSpider</code> <code>src/spider/rcsb_pdb/rcsb_pdb_spider.py</code> \u8c03\u5ea6 Search / Entry / Entity / ChemComp / DrugBank \u8bf7\u6c42 <code>FieldFilter</code> <code>src/spider/rcsb_pdb/field_filter.py</code> \u6309 JSON \u89c4\u5219\u88c1\u526a\u5b57\u6bb5\uff0c\u652f\u6301\u767d\u540d\u5355/\u9ed1\u540d\u5355 <code>RcsbAllApiItem</code> <code>src/items/rcsb_pdb_item.py</code> \u5b9a\u4e49\u7ed3\u6784\u6761\u76ee\u7684\u6807\u51c6\u683c\u5f0f <code>RcsbPdbPipeline</code> <code>src/pipelines/rcsb_pdb_pipeline.py</code> \u5c06 Item \u5199\u5165 Mongo\uff0c\u5e76\u843d\u5730\u9644\u4ef6 <code>settings.py</code> <code>src/settings.py</code> Scrapy\u3001\u6570\u636e\u5e93\u3001\u65e5\u5fd7\u3001\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\u914d\u7f6e <code>MongoDBManager/RedisManager</code> <code>src/utils/</code> \u7ba1\u7406\u589e\u91cf\u6e38\u6807\u3001Revision \u7f13\u5b58"},{"location":"projects/rcsb_pdb/architecture/#3","title":"3. \u6570\u636e\u6d41","text":"<ol> <li>Search \u9636\u6bb5\uff1a\u6784\u9020\u67e5\u8be2\u4f53 <code>_build_search_body</code>\uff0c\u6309 <code>revision_date</code> \u5347\u5e8f\u62c9\u53d6 PDB ID\u3002</li> <li>Entry \u9636\u6bb5\uff1a\u9010\u4e2a PDB ID \u83b7\u53d6\u6838\u5fc3\u5c5e\u6027\uff0c\u540c\u65f6\u8bb0\u5f55 revision_date \u4e0e\u6587\u4ef6\u4e0b\u8f7d URL\u3002</li> <li>Entity \u9636\u6bb5\uff1a\u5e76\u53d1\u6293\u53d6 polymer / nonpolymer / branched \u5b9e\u4f53\uff0c\u5bf9\u7ed3\u679c\u5e94\u7528 <code>FieldFilter</code>\u3002</li> <li>ChemComp / DrugBank \u9636\u6bb5\uff1a\u57fa\u4e8e\u5b9e\u4f53\u4e2d\u51fa\u73b0\u7684\u5316\u5408\u7269 ID \u8865\u5145\u5316\u5b66/\u836f\u7269\u4fe1\u606f\u3002</li> <li>\u5b58\u50a8\u9636\u6bb5\uff1a</li> <li>JSON\uff1a<code>spider/rcsb_pdb/inhance/&lt;PDB_ID&gt;.json</code></li> <li>Mongo\uff1a<code>raw_data.rcsb_pdb_structures_all</code></li> <li>Redis\uff1a<code>rcsb_all_api:revision</code>\uff0c\u7528\u4e8e\u589e\u91cf\u53bb\u91cd</li> <li>\u589e\u91cf\u6e38\u6807\uff1a<code>MongoDBManager</code> \u5728\u722c\u866b\u5173\u95ed\u65f6\u66f4\u65b0 <code>rcsb_increment_state.last_revision</code>\u3002</li> </ol>"},{"location":"projects/rcsb_pdb/architecture/#4","title":"4. \u8fd0\u884c\u6a21\u5f0f","text":"\u6a21\u5f0f \u5165\u53e3\u53c2\u6570 \u8bf4\u660e <code>full</code> <code>scrapy crawl rcsb_all_api -a mode=full</code> \u6309 revision_date \u5347\u5e8f\u5168\u91cf\u6293\u53d6 <code>incremental</code> <code>-a mode=incremental -a overlap_days=2</code> \u57fa\u4e8e Mongo \u6e38\u6807 + Redis \u5224\u91cd\uff0c\u5411\u524d\u91cd\u53e0 N \u5929 <code>manual</code> <code>-a pdb_id=1A1A</code> \u4ec5\u6293\u53d6\u6307\u5b9a PDB ID\uff0c\u5e38\u7528\u4e8e\u8c03\u8bd5"},{"location":"projects/rcsb_pdb/architecture/#5","title":"5. \u4e2d\u95f4\u4ef6\u4e0e\u6269\u5c55","text":"<ul> <li><code>CaptchaMiddleware</code>\uff1a\u5168\u5c40\u9a8c\u8bc1\u7801\u62e6\u622a</li> <li><code>CustomRetryMiddleware</code>\uff1a\u66ff\u6362\u9ed8\u8ba4 Retry\uff0c\u652f\u6301\u4ee3\u7406\u5f02\u5e38\u7801</li> <li><code>BaseProxyMiddleware</code>\uff1a\u7edf\u4e00\u6ce8\u5165\u4ee3\u7406</li> <li><code>HistoryDataMiddleware</code>\uff1a\u8fc7\u6ee4\u5386\u53f2\u91cd\u590d\u8bf7\u6c42</li> <li>Playwright\uff08\u53ef\u9009\uff09\uff1a\u901a\u8fc7 <code>PLAYWRIGHT_PROCESS_REQUEST_HEADERS</code> \u6ce8\u5165\u81ea\u5b9a\u4e49\u5934\u90e8</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#6","title":"6. \u90e8\u7f72\u62d3\u6251","text":"\u5c42\u7ea7 \u5efa\u8bae\u90e8\u7f72\u65b9\u5f0f \u722c\u866b\u8282\u70b9 Windows/Linux \u4e3b\u673a\uff0c\u652f\u6301\u591a\u8fdb\u7a0b Scrapy MongoDB \u72ec\u7acb\u5b9e\u4f8b\u6216\u5171\u4eab\u96c6\u7fa4\uff0c\u9700\u5f00\u542f\u9274\u6743 Redis \u5c0f\u578b\u5355\u8282\u70b9\u5373\u53ef\uff0c\u91cd\u70b9\u4fdd\u8bc1\u6301\u4e45\u5316 \u65e5\u5fd7/\u6587\u4ef6 \u7f51\u7edc\u5171\u4eab\u76ee\u5f55\u6216 OSS <p>\u82e5\u90e8\u7f72\u5230\u670d\u52a1\u5668\uff0c\u53ef\u901a\u8fc7 <code>systemd</code> / <code>Supervisor</code> \u5b88\u62a4 Scrapy \u4efb\u52a1\uff0c\u6216\u8fc1\u79fb\u81f3 Airflow/Scheduler\u3002</p>"},{"location":"projects/rcsb_pdb/architecture/#_2","title":"\u67b6\u6784\u8bbe\u8ba1","text":"<p>\u672c\u6587\u6863\u4ecb\u7ecd RCSB PDB \u722c\u866b\u9879\u76ee\u7684\u6574\u4f53\u67b6\u6784\u8bbe\u8ba1\u3001\u6a21\u5757\u5173\u7cfb\u548c\u6570\u636e\u6d41\u7a0b\u3002</p>"},{"location":"projects/rcsb_pdb/architecture/#_3","title":"\u7cfb\u7edf\u67b6\u6784","text":""},{"location":"projects/rcsb_pdb/architecture/#_4","title":"\u6574\u4f53\u67b6\u6784\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    RCSB PDB \u722c\u866b\u7cfb\u7edf                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  \u542f\u52a8\u811a\u672c     \u2502\u2500\u2500\u2500\u25b6\u2502  \u722c\u866b\u5f15\u64ce     \u2502\u2500\u2500\u2500\u25b6\u2502 \u6570\u636e\u7ba1\u9053  \u2502  \u2502\n\u2502  \u2502  firing.py   \u2502    \u2502 RcsbAllApi  \u2502    \u2502 Pipeline \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502         \u2502                     \u2502                  \u2502       \u2502\n\u2502         \u2502                     \u2502                  \u2502       \u2502\n\u2502         \u25bc                     \u25bc                  \u25bc       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  \u53c2\u6570\u89e3\u6790     \u2502    \u2502  API \u8bf7\u6c42     \u2502    \u2502 \u6570\u636e\u5b58\u50a8  \u2502  \u2502\n\u2502  \u2502  \u6a21\u5f0f\u9009\u62e9     \u2502    \u2502  \u5b57\u6bb5\u8fc7\u6ee4     \u2502    \u2502 MongoDB  \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                     \u2502                  \u2502\n         \u25bc                     \u25bc                  \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  Redis   \u2502          \u2502  MongoDB \u2502      \u2502  \u6587\u4ef6\u7cfb\u7edf  \u2502\n  \u2502  (\u6e38\u6807)  \u2502          \u2502 (\u4e3b\u5b58\u50a8) \u2502      \u2502 (CIF/\u56fe\u7247)\u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#_5","title":"\u6838\u5fc3\u6a21\u5757","text":""},{"location":"projects/rcsb_pdb/architecture/#1-spider","title":"1. \u722c\u866b\u6a21\u5757\uff08Spider\uff09","text":"<p>\u4f4d\u7f6e\uff1a<code>src/spider/rcsb_pdb/rcsb_pdb_spider.py</code></p> <p>\u804c\u8d23\uff1a - \u7ba1\u7406\u722c\u866b\u8fd0\u884c\u6a21\u5f0f\uff08\u5355\u6761/\u5168\u91cf/\u589e\u91cf\uff09 - \u8c03\u7528 RCSB PDB API \u83b7\u53d6\u6570\u636e - \u5904\u7406\u6570\u636e\u89e3\u6790\u548c\u5b57\u6bb5\u8fc7\u6ee4 - \u7ba1\u7406\u589e\u91cf\u6e38\u6807</p> <p>\u5173\u952e\u7c7b\uff1a - <code>RcsbAllApiSpider</code>\uff1a\u4e3b\u722c\u866b\u7c7b</p>"},{"location":"projects/rcsb_pdb/architecture/#2-items","title":"2. \u6570\u636e\u9879\u6a21\u5757\uff08Items\uff09","text":"<p>\u4f4d\u7f6e\uff1a<code>src/items/other/rcsb_pdb_item.py</code></p> <p>\u804c\u8d23\uff1a - \u5b9a\u4e49\u6570\u636e\u7ed3\u6784 - \u6807\u51c6\u5316\u6570\u636e\u8f93\u51fa - \u5b57\u6bb5\u7c7b\u578b\u9a8c\u8bc1</p> <p>\u5173\u952e\u7c7b\uff1a - <code>RcsbAllApiItem</code>\uff1aRCSB PDB \u6570\u636e\u9879</p>"},{"location":"projects/rcsb_pdb/architecture/#3-pipelines","title":"3. \u7ba1\u9053\u6a21\u5757\uff08Pipelines\uff09","text":"<p>\u4f4d\u7f6e\uff1a<code>src/pipelines/storage/rcsb_pdb_pipeline.py</code></p> <p>\u804c\u8d23\uff1a - \u6587\u4ef6\u4e0b\u8f7d\uff08CIF\u3001\u9a8c\u8bc1\u56fe\u7247\uff09 - \u6587\u4ef6\u8def\u5f84\u66ff\u6362 - \u6570\u636e\u5165\u5e93\uff08MongoDB\uff09</p> <p>\u5173\u952e\u7c7b\uff1a - <code>RcsbPdbPipeline</code>\uff1a\u6570\u636e\u5165\u5e93\u7ba1\u9053</p>"},{"location":"projects/rcsb_pdb/architecture/#4-field-filter","title":"4. \u5b57\u6bb5\u8fc7\u6ee4\u6a21\u5757\uff08Field Filter\uff09","text":"<p>\u4f4d\u7f6e\uff1a<code>src/spider/rcsb_pdb/field_filter.py</code></p> <p>\u804c\u8d23\uff1a - \u6839\u636e\u914d\u7f6e\u6587\u4ef6\u8fc7\u6ee4\u5b57\u6bb5 - \u51cf\u5c11\u6570\u636e\u91cf - \u63d0\u9ad8\u91c7\u96c6\u6548\u7387</p> <p>\u5173\u952e\u7c7b\uff1a - <code>FieldFilter</code>\uff1a\u5b57\u6bb5\u8fc7\u6ee4\u5668</p>"},{"location":"projects/rcsb_pdb/architecture/#_6","title":"\u6570\u636e\u6d41\u7a0b","text":""},{"location":"projects/rcsb_pdb/architecture/#_7","title":"\u5168\u91cf\u6a21\u5f0f\u6d41\u7a0b","text":"<pre><code>1. \u542f\u52a8\u722c\u866b\n   \u2193\n2. \u8c03\u7528 Search API \u83b7\u53d6 PDB ID \u5217\u8868\n   \u2193\n3. \u6279\u91cf\u8bf7\u6c42 Entry API \u83b7\u53d6\u57fa\u7840\u4fe1\u606f\n   \u2193\n4. \u5e76\u884c\u8bf7\u6c42\u76f8\u5173 API\uff08polymer_entity, chemcomp \u7b49\uff09\n   \u2193\n5. \u5b57\u6bb5\u8fc7\u6ee4\uff08\u5982\u679c\u914d\u7f6e\u4e86\u8fc7\u6ee4\u89c4\u5219\uff09\n   \u2193\n6. \u4e0b\u8f7d\u6587\u4ef6\uff08CIF\u3001\u9a8c\u8bc1\u56fe\u7247\uff09\n   \u2193\n7. \u6570\u636e\u5165\u5e93\uff08MongoDB\uff09\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#_8","title":"\u589e\u91cf\u6a21\u5f0f\u6d41\u7a0b","text":"<pre><code>1. \u542f\u52a8\u722c\u866b\uff08incremental \u6a21\u5f0f\uff09\n   \u2193\n2. \u4ece MongoDB \u8bfb\u53d6\u4e0a\u6b21\u7684 revision_date \u6e38\u6807\n   \u2193\n3. \u8ba1\u7b97\u589e\u91cf\u8d77\u59cb\u65e5\u671f\uff08\u8003\u8651 overlap_days\uff09\n   \u2193\n4. \u8c03\u7528 Search API \u67e5\u8be2\u66f4\u65b0\u6570\u636e\n   \u2193\n5. \u540e\u7eed\u6d41\u7a0b\u4e0e\u5168\u91cf\u6a21\u5f0f\u76f8\u540c\n   \u2193\n6. \u66f4\u65b0 revision_date \u6e38\u6807\u5230 Redis\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#_9","title":"\u5355\u6761\u6a21\u5f0f\u6d41\u7a0b","text":"<pre><code>1. \u542f\u52a8\u722c\u866b\uff08\u6307\u5b9a pdb_id\uff09\n   \u2193\n2. \u76f4\u63a5\u8bf7\u6c42 Entry API \u83b7\u53d6\u6570\u636e\n   \u2193\n3. \u8bf7\u6c42\u76f8\u5173 API\n   \u2193\n4. \u5b57\u6bb5\u8fc7\u6ee4\n   \u2193\n5. \u4e0b\u8f7d\u6587\u4ef6\n   \u2193\n6. \u8f93\u51fa\u5230\u672c\u5730 JSON \u6587\u4ef6\uff08\u4e0d\u5165\u5e93\uff09\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#_10","title":"\u6a21\u5757\u5173\u7cfb","text":""},{"location":"projects/rcsb_pdb/architecture/#_11","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<pre><code>RcsbAllApiSpider\n    \u251c\u2500\u2500 FieldFilter (\u5b57\u6bb5\u8fc7\u6ee4)\n    \u251c\u2500\u2500 RcsbAllApiItem (\u6570\u636e\u9879)\n    \u251c\u2500\u2500 MongoDBManager (\u6570\u636e\u5e93\u64cd\u4f5c)\n    \u2514\u2500\u2500 RedisManager (\u6e38\u6807\u7ba1\u7406)\n         \u2502\n         \u2514\u2500\u2500 RcsbPdbPipeline (\u6570\u636e\u5165\u5e93)\n              \u2514\u2500\u2500 MongoDBRawStoragePipeline (\u57fa\u7c7b)\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#_12","title":"\u6570\u636e\u6d41\u5411","text":"<pre><code>API \u54cd\u5e94 \u2192 Spider \u89e3\u6790 \u2192 Item \u5c01\u88c5 \u2192 Pipeline \u5904\u7406 \u2192 MongoDB \u5b58\u50a8\n                                    \u2193\n                              \u6587\u4ef6\u4e0b\u8f7d \u2192 \u6587\u4ef6\u7cfb\u7edf\n</code></pre>"},{"location":"projects/rcsb_pdb/architecture/#_13","title":"\u8bbe\u8ba1\u51b3\u7b56","text":""},{"location":"projects/rcsb_pdb/architecture/#1-mongodb","title":"1. \u4e3a\u4ec0\u4e48\u4f7f\u7528 MongoDB\uff1f","text":"<ul> <li>\u6587\u6863\u578b\u6570\u636e\u5e93\uff1a\u9002\u5408\u5b58\u50a8 JSON \u683c\u5f0f\u7684\u86cb\u767d\u8d28\u7ed3\u6784\u6570\u636e</li> <li>\u7075\u6d3b\u7684\u6570\u636e\u7ed3\u6784\uff1a\u4e0d\u540c PDB \u7ed3\u6784\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u5b57\u6bb5</li> <li>\u9ad8\u6027\u80fd\uff1a\u9002\u5408\u5927\u91cf\u6570\u636e\u7684\u5199\u5165\u548c\u67e5\u8be2</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#2-redis","title":"2. \u4e3a\u4ec0\u4e48\u4f7f\u7528 Redis \u5b58\u50a8\u6e38\u6807\uff1f","text":"<ul> <li>\u9ad8\u6027\u80fd\uff1a\u589e\u91cf\u6e38\u6807\u9700\u8981\u9891\u7e41\u8bfb\u5199</li> <li>\u6301\u4e45\u5316\uff1a\u652f\u6301\u6570\u636e\u6301\u4e45\u5316\uff0c\u907f\u514d\u6e38\u6807\u4e22\u5931</li> <li>TTL \u652f\u6301\uff1a\u53ef\u4ee5\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#3_1","title":"3. \u4e3a\u4ec0\u4e48\u652f\u6301\u5b57\u6bb5\u8fc7\u6ee4\uff1f","text":"<ul> <li>\u51cf\u5c11\u6570\u636e\u91cf\uff1aRCSB PDB \u6570\u636e\u91cf\u5de8\u5927\uff0c\u5168\u91cf\u91c7\u96c6\u53ef\u80fd\u4e0d\u9700\u8981\u6240\u6709\u5b57\u6bb5</li> <li>\u63d0\u9ad8\u6548\u7387\uff1a\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u548c\u5b58\u50a8\u7a7a\u95f4</li> <li>\u7075\u6d3b\u6027\uff1a\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\uff0c\u65e0\u9700\u4fee\u6539\u4ee3\u7801</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#4_1","title":"4. \u4e3a\u4ec0\u4e48\u652f\u6301\u4e09\u79cd\u8fd0\u884c\u6a21\u5f0f\uff1f","text":"<ul> <li>\u5355\u6761\u6a21\u5f0f\uff1a\u4fbf\u4e8e\u8c03\u8bd5\u548c\u6d4b\u8bd5</li> <li>\u5168\u91cf\u6a21\u5f0f\uff1a\u9996\u6b21\u91c7\u96c6\u6216\u91cd\u5efa\u6570\u636e</li> <li>\u589e\u91cf\u6a21\u5f0f\uff1a\u65e5\u5e38\u66f4\u65b0\uff0c\u907f\u514d\u91cd\u590d\u91c7\u96c6</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#_14","title":"\u6269\u5c55\u6027","text":""},{"location":"projects/rcsb_pdb/architecture/#api","title":"\u6dfb\u52a0\u65b0\u7684 API \u7aef\u70b9","text":"<ol> <li>\u5728 <code>API_ENDPOINTS</code> \u4e2d\u6dfb\u52a0\u65b0\u7aef\u70b9</li> <li>\u5728 <code>SECTION_MAP</code> \u4e2d\u6dfb\u52a0\u6620\u5c04\u5173\u7cfb</li> <li>\u5728 <code>_fetch_related_data</code> \u4e2d\u6dfb\u52a0\u8bf7\u6c42\u903b\u8f91</li> </ol>"},{"location":"projects/rcsb_pdb/architecture/#_15","title":"\u6dfb\u52a0\u65b0\u7684\u6570\u636e\u5b58\u50a8","text":"<ol> <li>\u7ee7\u627f <code>MongoDBRawStoragePipeline</code></li> <li>\u5b9e\u73b0\u81ea\u5b9a\u4e49\u5b58\u50a8\u903b\u8f91</li> <li>\u5728 <code>custom_settings</code> \u4e2d\u914d\u7f6e Pipeline</li> </ol>"},{"location":"projects/rcsb_pdb/architecture/#_16","title":"\u6dfb\u52a0\u65b0\u7684\u5b57\u6bb5\u8fc7\u6ee4\u89c4\u5219","text":"<ol> <li>\u7f16\u8f91 <code>field_filter_config.json</code></li> <li>\u5b9a\u4e49\u9700\u8981\u4fdd\u7559\u7684\u5b57\u6bb5\u8def\u5f84</li> <li>\u91cd\u542f\u722c\u866b\u5e94\u7528\u65b0\u89c4\u5219</li> </ol>"},{"location":"projects/rcsb_pdb/architecture/#_17","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"projects/rcsb_pdb/architecture/#_18","title":"\u5e76\u53d1\u63a7\u5236","text":"<ul> <li>\u4f7f\u7528 Scrapy \u7684 <code>CONCURRENT_REQUESTS</code> \u63a7\u5236\u5e76\u53d1\u6570</li> <li>\u9ed8\u8ba4\u5e76\u53d1\u6570\u4e3a 32\uff0c\u53ef\u6839\u636e\u7f51\u7edc\u60c5\u51b5\u8c03\u6574</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#_19","title":"\u6279\u91cf\u8bf7\u6c42","text":"<ul> <li>\u4f7f\u7528 <code>batch_size</code> \u53c2\u6570\u63a7\u5236\u6bcf\u6279\u8bf7\u6c42\u6570\u91cf</li> <li>\u9ed8\u8ba4\u6279\u91cf\u5927\u5c0f\u4e3a 50\uff0c\u53ef\u6839\u636e API \u9650\u5236\u8c03\u6574</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#_20","title":"\u589e\u91cf\u66f4\u65b0","text":"<ul> <li>\u4f7f\u7528 <code>overlap_days</code> \u53c2\u6570\u907f\u514d\u9057\u6f0f\u6570\u636e</li> <li>\u9ed8\u8ba4\u91cd\u53e0 1 \u5929\uff0c\u53ef\u6839\u636e\u66f4\u65b0\u9891\u7387\u8c03\u6574</li> </ul>"},{"location":"projects/rcsb_pdb/architecture/#_21","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u7cfb\u7edf\u5168\u666f - \u67e5\u770b\u5b8c\u6574\u7684 API \u6587\u6863</li> <li>\u6838\u5fc3\u6a21\u5757 - \u4e86\u89e3\u5404\u6a21\u5757\u7684\u8be6\u7ec6\u8bf4\u660e</li> <li>\u914d\u7f6e\u8bf4\u660e - \u4e86\u89e3\u914d\u7f6e\u53c2\u6570</li> </ul>"},{"location":"projects/rcsb_pdb/configuration/","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u672c\u9875\u6c47\u603b Scrapy\u3001\u6570\u636e\u5e93\u4ee5\u53ca\u8fd0\u884c\u53c2\u6570\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u4fbf\u4e8e\u5feb\u901f\u5bf9\u9f50\u73af\u5883\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#1-scrapy-srcsettingspy","title":"1. Scrapy \u8bbe\u7f6e\uff08<code>src/settings.py</code>\uff09","text":""},{"location":"projects/rcsb_pdb/configuration/#_2","title":"\u5e76\u53d1\u4e0e\u91cd\u8bd5","text":"\u53d8\u91cf \u9ed8\u8ba4\u503c \u8bf4\u660e <code>CONCURRENT_REQUESTS</code> 32 \u5168\u5c40\u5e76\u53d1\u6570\uff0c\u5efa\u8bae\u6839\u636e IP/\u4ee3\u7406\u80fd\u529b\u8c03\u8282 <code>DOWNLOAD_DELAY</code> 1 \u8bf7\u6c42\u95f4\u9694\uff08\u79d2\uff09 <code>RANDOMIZE_DOWNLOAD_DELAY</code> True \u5728 <code>[0.5x, 1.5x]</code> \u8303\u56f4\u5185\u6296\u52a8 <code>RETRY_TIMES</code> 30 \u5931\u8d25\u91cd\u8bd5\u6b21\u6570 <code>RETRY_HTTP_CODES</code> <code>[500,502,503,504,522,524,408,429,440]</code> \u9700\u8981\u91cd\u8bd5\u7684\u72b6\u6001\u7801 <code>DOWNLOAD_TIMEOUT</code> 60 \u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09"},{"location":"projects/rcsb_pdb/configuration/#_3","title":"\u4e2d\u95f4\u4ef6","text":"<pre><code>DOWNLOADER_MIDDLEWARES = {\n    'src.middlewares.captcha_middleware.CaptchaMiddleware': 540,\n    'src.middlewares.custom_retry_middleware.CustomRetryMiddleware': 550,\n    'src.middlewares.proxy_middleware.BaseProxyMiddleware': 400,\n    'src.middlewares.history_data_middleware.HistoryDataMiddleware': 300,\n}\n</code></pre> <p>\u53ef\u6839\u636e\u90e8\u7f72\u73af\u5883\u542f\u7528/\u7981\u7528\u4ee3\u7406\u3001\u9a8c\u8bc1\u7801\u6216 Playwright \u76f8\u5173\u4e2d\u95f4\u4ef6\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#2","title":"2. \u6570\u636e\u5e93\u914d\u7f6e","text":""},{"location":"projects/rcsb_pdb/configuration/#mysql","title":"MySQL","text":"<pre><code>MYSQL_DATABASES = {\n    \"default\": {\n        \"host\": \"192.168.1.245\",\n        \"port\": 3306,\n        \"user\": \"medpeer\",\n        \"password\": \"medpeer\",\n        \"database\": \"raw_data\",\n        \"charset\": \"utf8mb4\",\n    }\n}\n</code></pre> <p>\u4ec5\u5728\u5c11\u91cf\u8f85\u52a9\u811a\u672c\u4e2d\u4f7f\u7528\uff0c\u53ef\u6309\u9700\u6539\u4e3a\u73af\u5883\u53d8\u91cf <code>MYSQL_PASSWORD</code>\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#mongodb","title":"MongoDB","text":"<pre><code>MONGODB_DATABASES = {\n    \"default\": {\n        \"host\": \"192.168.1.245\",\n        \"port\": 27017,\n        \"user\": \"medpeer\",\n        \"password\": \"medpeer\",\n        \"auth_source\": \"admin\",\n        \"database\": \"raw_data\",\n    }\n}\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#redis","title":"Redis","text":"<pre><code>REDIS_DATABASES = {\n    \"default\": {\n        \"host\": \"101.200.62.36\",\n        \"port\": 6379,\n        \"password\": \"medpeer\",\n        \"database\": 1,\n    }\n}\n</code></pre> <p>Redis \u7528\u4e8e\u8bb0\u5f55 <code>rcsb_all_api:revision</code>\uff0c\u8bf7\u4fdd\u8bc1 TTL \u2265 60 \u5929\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#3","title":"3. \u8fd0\u884c\u53c2\u6570","text":"\u53c2\u6570 \u8bf4\u660e <code>mode</code> <code>full</code> / <code>incremental</code> <code>max_targets</code> \u4e00\u6b21\u8fd0\u884c\u7684\u6700\u5927\u7ed3\u6784\u6570 <code>batch_size</code> Search API \u7684\u5206\u9875\u6761\u6570 <code>pdb_id</code> \u624b\u52a8\u6307\u5b9a\u5355\u6761\u7ed3\u6784 <code>field_filter_config</code> \u6307\u5b9a\u5b57\u6bb5\u8fc7\u6ee4 JSON <code>overlap_days</code> \u589e\u91cf\u8fd0\u884c\u65f6\u7684\u56de\u6eaf\u5929\u6570 <code>output_filename</code> \u624b\u52a8\u6a21\u5f0f\u4e0b\u7684 JSON \u6587\u4ef6\u540d <p>\u793a\u4f8b\uff1a</p> <pre><code>scrapy crawl rcsb_all_api \\\n  -a mode=incremental \\\n  -a max_targets=1000 \\\n  -a overlap_days=2 \\\n  -a field_filter_config=field_filter_config.json\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#4","title":"4. \u65e5\u5fd7\u4e0e\u6587\u4ef6","text":"\u914d\u7f6e \u8bf4\u660e <code>LOG_ENABLED = True</code> \u542f\u7528\u65e5\u5fd7 <code>LOG_LEVEL = \"INFO\"</code> \u53ef\u901a\u8fc7\u547d\u4ee4\u884c <code>-s LOG_LEVEL=DEBUG</code> \u8986\u76d6 <code>LOG_FILE</code> \u9ed8\u8ba4 <code>None</code>\uff0c\u7531 <code>firing.py</code> \u51b3\u5b9a\u547d\u540d <code>FILES_STORE</code> / <code>IMAGES_STORE</code> \u4f9d\u8d56 <code>UPLOAD_PATH</code>\uff0c\u9700\u6307\u5411\u53ef\u5199\u8def\u5f84 <p>\u5efa\u8bae\u5728\u670d\u52a1\u5668\u4e0a\u5c06\u65e5\u5fd7\u8f93\u51fa\u76ee\u5f55\u6302\u8f7d\u4e3a\u5171\u4eab\u5b58\u50a8\uff0c\u65b9\u4fbf\u6392\u67e5\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#5-playwright","title":"5. Playwright / \u4ee3\u7406\uff08\u53ef\u9009\uff09","text":"<ul> <li><code>PLAYWRIGHT_PROCESS_REQUEST_HEADERS</code>\uff1a\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\uff08\u82e5\u542f\u7528\u4e86 Playwright \u4e2d\u95f4\u4ef6\uff09</li> <li><code>BaseProxyMiddleware</code>\uff1a\u5728 <code>settings.py</code> \u4e2d\u8bbe\u7f6e\u9ed8\u8ba4\u4ee3\u7406\u5730\u5740</li> <li><code>TwistedSemaphoreMiddleware</code>\uff1a\u5982\u9700\u66f4\u7cbe\u7ec6\u7684\u5e76\u53d1\u63a7\u5236\uff0c\u53ef\u5f00\u542f\u5e76\u914d\u7f6e <code>SEMAPHORE_CONFIGS</code></li> </ul>"},{"location":"projects/rcsb_pdb/configuration/#6","title":"6. \u63a8\u8350\u7684\u73af\u5883\u53d8\u91cf","text":"<pre><code>set RCSB_MONGO_URI=mongodb://user:pwd@host:27017/raw_data\nset RCSB_REDIS_URI=redis://:pwd@host:6379/1\nset RCSB_FILES_STORE=D:\\data\\rcsb\n</code></pre> <p>\u4ee3\u7801\u5c42\u53ef\u901a\u8fc7 <code>os.getenv</code> \u8bfb\u53d6\uff0c\u65e2\u907f\u514d\u6cc4\u9732\u5e38\u91cf\uff0c\u53c8\u65b9\u4fbf\u5207\u6362\u73af\u5883\u3002</p> <p>\u66f4\u591a\u793a\u4f8b\u89c1 \u4f7f\u7528\u793a\u4f8b \u4e0e \u6545\u969c\u6392\u67e5\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#_4","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u8bf4\u660e RCSB PDB \u722c\u866b\u9879\u76ee\u7684\u6240\u6709\u914d\u7f6e\u9879\uff0c\u5305\u62ec\u6570\u636e\u5e93\u914d\u7f6e\u3001Scrapy \u914d\u7f6e\u3001\u8fd0\u884c\u53c2\u6570\u7b49\u3002</p>"},{"location":"projects/rcsb_pdb/configuration/#_5","title":"\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e","text":"<p>\u4e3b\u8981\u914d\u7f6e\u6587\u4ef6\uff1a<code>src/settings.py</code></p>"},{"location":"projects/rcsb_pdb/configuration/#_6","title":"\u6570\u636e\u5e93\u914d\u7f6e","text":""},{"location":"projects/rcsb_pdb/configuration/#mongodb_1","title":"MongoDB \u914d\u7f6e","text":"<pre><code>MONGODB_DATABASES = {\n    \"default\": {\n        \"type\": \"mongodb\",\n        'user': 'medpeer',              # \u7528\u6237\u540d\n        'password': 'medpeer',          # \u5bc6\u7801\n        'auth_source': 'admin',         # \u8ba4\u8bc1\u6570\u636e\u5e93\n        'host': '192.168.1.245',        # \u4e3b\u673a\u5730\u5740\n        'port': 27017,                  # \u7aef\u53e3\n        'database': 'raw_data',         # \u6570\u636e\u5e93\u540d\n        \"charset\": \"utf8mb4\",\n        \"direct_connection\": True,      # \u5355\u8282\u70b9\u8fde\u63a5\n    },\n}\n</code></pre> <p>\u8bf4\u660e\uff1a - MongoDB \u662f\u4e3b\u5b58\u50a8\u6570\u636e\u5e93\uff0c\u6240\u6709\u91c7\u96c6\u7684\u6570\u636e\u90fd\u4f1a\u5199\u5165\u8fd9\u91cc - \u96c6\u5408\u540d\u79f0\u7531 <code>RcsbPdbPipeline.collection_name</code> \u6307\u5b9a\uff0c\u9ed8\u8ba4\u4e3a <code>rcsb_pdb_structures_all</code> - \u589e\u91cf\u6a21\u5f0f\u7684\u6e38\u6807\u4e5f\u5b58\u50a8\u5728 MongoDB \u7684 <code>rcsb_increment_state</code> \u96c6\u5408\u4e2d</p>"},{"location":"projects/rcsb_pdb/configuration/#redis_1","title":"Redis \u914d\u7f6e","text":"<pre><code>REDIS_DATABASES = {\n    \"default\": {\n        \"type\": \"redis\",\n        'password': 'medpeer',          # \u5bc6\u7801\n        'host': '101.200.62.36',       # \u4e3b\u673a\u5730\u5740\n        'port': 6379,                  # \u7aef\u53e3\n        'database': 1,                 # \u6570\u636e\u5e93\u7f16\u53f7\n    }\n}\n</code></pre> <p>\u8bf4\u660e\uff1a - Redis \u7528\u4e8e\u5b58\u50a8\u589e\u91cf\u6e38\u6807\uff08revision_date\uff09 - \u589e\u91cf\u6a21\u5f0f\u5fc5\u9700\uff0c\u5168\u91cf\u6a21\u5f0f\u548c\u5355\u6761\u6a21\u5f0f\u4e0d\u9700\u8981 - \u6e38\u6807\u5b58\u50a8\u5728 Hash \u4e2d\uff0ckey \u4e3a <code>rcsb_all_api:revision</code>\uff0cTTL \u4e3a 60 \u5929</p>"},{"location":"projects/rcsb_pdb/configuration/#mysql_1","title":"MySQL \u914d\u7f6e\uff08\u53ef\u9009\uff09","text":"<pre><code>MYSQL_DATABASES = {\n    \"default\": {\n        \"type\": \"mysql\",\n        'user': 'medpeer',\n        'password': 'medpeer',\n        'host': '192.168.1.245',\n        'port': 3306,\n        'database': 'raw_data',\n        \"charset\": \"utf8mb4\"\n    },\n}\n</code></pre> <p>\u8bf4\u660e\uff1a - MySQL \u914d\u7f6e\u662f\u53ef\u9009\u7684\uff0c\u5f53\u524d\u9879\u76ee\u4e3b\u8981\u4f7f\u7528 MongoDB - \u5982\u679c\u540e\u7eed\u9700\u8981 MySQL \u5b58\u50a8\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u914d\u7f6e</p>"},{"location":"projects/rcsb_pdb/configuration/#scrapy","title":"Scrapy \u57fa\u7840\u914d\u7f6e","text":""},{"location":"projects/rcsb_pdb/configuration/#_7","title":"\u9879\u76ee\u914d\u7f6e","text":"<pre><code>BOT_NAME = \"src\"\nSPIDER_MODULES = [\"src.spiders\"]\nNEWSPIDER_MODULE = \"src.spiders\"\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#_8","title":"\u722c\u866b\u884c\u4e3a\u914d\u7f6e","text":"<pre><code># \u4e0d\u9075\u5faa robots.txt\nROBOTSTXT_OBEY = False\n\n# \u4e0b\u8f7d\u5ef6\u8fdf\uff08\u79d2\uff09\nDOWNLOAD_DELAY = 1\n\n# \u968f\u673a\u5316\u4e0b\u8f7d\u5ef6\u8fdf\nRANDOMIZE_DOWNLOAD_DELAY = True\n\n# \u5e76\u53d1\u8bf7\u6c42\u6570\u91cf\nCONCURRENT_REQUESTS = 32\n</code></pre> <p>\u8bf4\u660e\uff1a - <code>DOWNLOAD_DELAY</code> \u63a7\u5236\u76f8\u540c\u7f51\u7ad9\u4e24\u4e2a\u8bf7\u6c42\u4e4b\u95f4\u7684\u95f4\u9694 - <code>RANDOMIZE_DOWNLOAD_DELAY</code> \u4f1a\u5728 0.5 * DOWNLOAD_DELAY \u5230 1.5 * DOWNLOAD_DELAY \u4e4b\u95f4\u968f\u673a - <code>CONCURRENT_REQUESTS</code> \u53ef\u4ee5\u6839\u636e\u7f51\u7edc\u60c5\u51b5\u8c03\u6574\uff0c\u9ed8\u8ba4 32</p>"},{"location":"projects/rcsb_pdb/configuration/#_9","title":"\u91cd\u8bd5\u914d\u7f6e","text":"<pre><code>RETRY_ENABLED = True              # \u542f\u7528\u91cd\u8bd5\nRETRY_TIMES = 30                  # \u91cd\u8bd5\u6b21\u6570\nDOWNLOAD_TIMEOUT = 60            # \u4e0b\u8f7d\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\nRETRY_HTTP_CODES = [500, 502, 503, 504, 522, 524, 408, 429, 440]\n</code></pre> <p>\u8bf4\u660e\uff1a - <code>RETRY_HTTP_CODES</code> \u6307\u5b9a\u54ea\u4e9b HTTP \u72b6\u6001\u7801\u9700\u8981\u91cd\u8bd5 - 440 \u662f\u4ee3\u7406\u8d85\u8fc7\u5e26\u5bbd\u7684\u72b6\u6001\u7801 - 429 \u662f\u8bf7\u6c42\u9891\u7387\u8fc7\u9ad8\u7684\u72b6\u6001\u7801</p>"},{"location":"projects/rcsb_pdb/configuration/#_10","title":"\u4e2d\u95f4\u4ef6\u914d\u7f6e","text":""},{"location":"projects/rcsb_pdb/configuration/#_11","title":"\u4e0b\u8f7d\u4e2d\u95f4\u4ef6","text":"<pre><code>DOWNLOADER_MIDDLEWARES = {\n    'src.middlewares.captcha_middleware.CaptchaMiddleware': 540,\n    'src.middlewares.custom_retry_middleware.CustomRetryMiddleware': 550,\n    'src.middlewares.proxy_middleware.BaseProxyMiddleware': 400,\n    'src.middlewares.history_data_middleware.HistoryDataMiddleware': 300,\n}\n</code></pre> <p>\u8bf4\u660e\uff1a - \u4e2d\u95f4\u4ef6\u6309\u6570\u5b57\u987a\u5e8f\u6267\u884c\uff0c\u6570\u5b57\u8d8a\u5c0f\u8d8a\u5148\u6267\u884c - <code>CaptchaMiddleware</code>\uff1a\u5904\u7406\u9a8c\u8bc1\u7801 - <code>CustomRetryMiddleware</code>\uff1a\u81ea\u5b9a\u4e49\u91cd\u8bd5\u903b\u8f91 - <code>BaseProxyMiddleware</code>\uff1a\u4ee3\u7406\u4e2d\u95f4\u4ef6 - <code>HistoryDataMiddleware</code>\uff1a\u5386\u53f2\u6570\u636e\u4e2d\u95f4\u4ef6</p>"},{"location":"projects/rcsb_pdb/configuration/#_12","title":"\u722c\u866b\u4e2d\u95f4\u4ef6","text":"<pre><code>SPIDER_MIDDLEWARES = {\n    'src.middlewares.custom_retry_middleware.CustomExceptionMiddleware': 543,\n}\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#pipeline","title":"Pipeline \u914d\u7f6e","text":"<p>\u5728\u722c\u866b\u7684 <code>custom_settings</code> \u4e2d\u914d\u7f6e\uff1a</p> <pre><code>custom_settings = {\n    \"ITEM_PIPELINES\": {\n        \"src.pipelines.file_download_pipeline.FileDownloadPipeline\": 200,\n        \"src.pipelines.file_replacement_pipeline.FileReplacementPipeline\": 300,\n        \"src.pipelines.storage.rcsb_pdb_pipeline.RcsbPdbPipeline\": 400,\n    },\n    \"LOG_LEVEL\": \"INFO\",\n}\n</code></pre> <p>Pipeline \u6267\u884c\u987a\u5e8f\uff1a 1. <code>FileDownloadPipeline</code> (200) - \u4e0b\u8f7d CIF \u6587\u4ef6\u548c\u9a8c\u8bc1\u56fe\u7247 2. <code>FileReplacementPipeline</code> (300) - \u66ff\u6362\u6587\u4ef6\u8def\u5f84\u4e3a OSS \u8def\u5f84 3. <code>RcsbPdbPipeline</code> (400) - \u6570\u636e\u5165\u5e93</p>"},{"location":"projects/rcsb_pdb/configuration/#_13","title":"\u6587\u4ef6\u5b58\u50a8\u914d\u7f6e","text":"<pre><code># \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\nFILES_STORE = UPLOAD_PATH          # \u4e0b\u8f7d\u6587\u4ef6\u5b58\u653e\u5730\u5740\nIMAGES_STORE = UPLOAD_PATH         # \u56fe\u7247\u6587\u4ef6\u5b58\u653e\u5730\u5740\n\n# \u5141\u8bb8\u5a92\u4f53\u6587\u4ef6\u91cd\u5b9a\u5411\nMEDIA_ALLOW_REDIRECTS = True\n</code></pre> <p>\u8bf4\u660e\uff1a - <code>UPLOAD_PATH</code> \u5728 <code>src/constant.py</code> \u4e2d\u5b9a\u4e49 - \u4e0b\u8f7d\u7684\u6587\u4ef6\u4f1a\u5148\u5b58\u50a8\u5230\u672c\u5730\uff0c\u7136\u540e\u4e0a\u4f20\u5230 OSS - Pipeline \u4f1a\u81ea\u52a8\u5904\u7406\u6587\u4ef6\u8def\u5f84\u66ff\u6362</p>"},{"location":"projects/rcsb_pdb/configuration/#_14","title":"\u65e5\u5fd7\u914d\u7f6e","text":"<pre><code>LOG_ENABLED = True\nLOG_ENCODING = \"utf-8\"\nLOG_FILE_APPEND = True\nLOG_FORMAT = '...'  # \u65e5\u5fd7\u683c\u5f0f\nLOG_DATEFORMAT = '%Y-%m-%d %H:%M:%S'\nLOG_FORMATTER = src.utils.base_logger.BaseSpiderLogFormatter\nLOGSTATS_INTERVAL = 60.0\n</code></pre> <p>\u8bf4\u660e\uff1a - \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\u5728 <code>firing.py</code> \u4e2d\u52a8\u6001\u751f\u6210 - \u65e5\u5fd7\u683c\u5f0f\u5305\u542b\u8fdb\u7a0bID\u3001\u7ebf\u7a0bID\u3001\u8c03\u7528\u6587\u4ef6\u7b49\u4fe1\u606f - <code>LOGSTATS_INTERVAL</code> \u63a7\u5236\u7edf\u8ba1\u4fe1\u606f\u7684\u8bb0\u5f55\u95f4\u9694</p>"},{"location":"projects/rcsb_pdb/configuration/#_15","title":"\u722c\u866b\u8fd0\u884c\u53c2\u6570","text":""},{"location":"projects/rcsb_pdb/configuration/#_16","title":"\u547d\u4ee4\u884c\u53c2\u6570","text":"<pre><code># \u5355\u6761\u6a21\u5f0f\nscrapy crawl rcsb_all_api -a pdb_id=1ABC -a output_filename=test.json\n\n# \u5168\u91cf\u6a21\u5f0f\nscrapy crawl rcsb_all_api -a mode=full -a max_targets=100 -a batch_size=50\n\n# \u589e\u91cf\u6a21\u5f0f\nscrapy crawl rcsb_all_api -a mode=incremental -a overlap_days=1\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#_17","title":"\u53c2\u6570\u8bf4\u660e","text":"\u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e \u9ed8\u8ba4\u503c <code>pdb_id</code> str PDB ID\uff08\u5355\u6761\u6a21\u5f0f\uff09 None <code>output_filename</code> str \u8f93\u51fa\u6587\u4ef6\u540d\uff08\u5355\u6761\u6a21\u5f0f\uff09 <code>data_real_all.json</code> <code>field_filter_config</code> str \u5b57\u6bb5\u8fc7\u6ee4\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 None <code>mode</code> str \u8fd0\u884c\u6a21\u5f0f\uff08full/incremental\uff09 <code>full</code> <code>max_targets</code> int \u6700\u5927\u91c7\u96c6\u6570\u91cf 200 <code>start_from</code> int Search API \u5206\u9875\u8d77\u70b9 0 <code>batch_size</code> int \u6bcf\u6279\u8bf7\u6c42\u6570\u91cf 50 <code>overlap_days</code> int \u589e\u91cf\u6a21\u5f0f\u5411\u524d\u91cd\u53e0\u5929\u6570 1"},{"location":"projects/rcsb_pdb/configuration/#_18","title":"\u73af\u5883\u53d8\u91cf","text":""},{"location":"projects/rcsb_pdb/configuration/#_19","title":"\u65e5\u5fd7\u8def\u5f84","text":"<p>\u5728 <code>src/constant.py</code> \u4e2d\u914d\u7f6e\uff1a</p> <pre><code>LOG_PATH = \"/path/to/logs\"\nUPLOAD_PATH = \"/path/to/uploads\"\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#_20","title":"\u4ee3\u7406\u914d\u7f6e\uff08\u53ef\u9009\uff09","text":"<p>\u5982\u679c\u9700\u8981\u4f7f\u7528\u4ee3\u7406\uff0c\u53ef\u4ee5\u5728 <code>firing.py</code> \u4e2d\u53d6\u6d88\u6ce8\u91ca\uff1a</p> <pre><code># os.environ['http_proxy'] = 'http://127.0.0.1:10810'\n# os.environ['https_proxy'] = 'http://127.0.0.1:10810'\n</code></pre>"},{"location":"projects/rcsb_pdb/configuration/#_21","title":"\u914d\u7f6e\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"projects/rcsb_pdb/configuration/#1","title":"1. \u5f00\u53d1\u73af\u5883\u914d\u7f6e","text":"<ul> <li>\u964d\u4f4e <code>CONCURRENT_REQUESTS</code> \u5230 8-16</li> <li>\u8bbe\u7f6e <code>LOG_LEVEL = \"DEBUG\"</code> \u67e5\u770b\u8be6\u7ec6\u65e5\u5fd7</li> <li>\u4f7f\u7528\u5355\u6761\u6a21\u5f0f\u8fdb\u884c\u6d4b\u8bd5</li> </ul>"},{"location":"projects/rcsb_pdb/configuration/#2_1","title":"2. \u751f\u4ea7\u73af\u5883\u914d\u7f6e","text":"<ul> <li>\u63d0\u9ad8 <code>CONCURRENT_REQUESTS</code> \u5230 32-64\uff08\u6839\u636e\u7f51\u7edc\u60c5\u51b5\uff09</li> <li>\u8bbe\u7f6e <code>LOG_LEVEL = \"INFO\"</code> \u6216 <code>\"WARNING\"</code></li> <li>\u4f7f\u7528\u589e\u91cf\u6a21\u5f0f\u8fdb\u884c\u65e5\u5e38\u66f4\u65b0</li> <li>\u914d\u7f6e\u5408\u9002\u7684 <code>max_targets</code> \u548c <code>batch_size</code></li> </ul>"},{"location":"projects/rcsb_pdb/configuration/#3_1","title":"3. \u6027\u80fd\u4f18\u5316","text":"<ul> <li>\u6839\u636e API \u9650\u5236\u8c03\u6574 <code>DOWNLOAD_DELAY</code> \u548c <code>CONCURRENT_REQUESTS</code></li> <li>\u4f7f\u7528\u5b57\u6bb5\u8fc7\u6ee4\u51cf\u5c11\u6570\u636e\u91cf</li> <li>\u5408\u7406\u8bbe\u7f6e <code>batch_size</code> \u5e73\u8861\u6548\u7387\u548c\u7a33\u5b9a\u6027</li> </ul>"},{"location":"projects/rcsb_pdb/configuration/#_22","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb - \u73af\u5883\u914d\u7f6e\u548c\u5b89\u88c5</li> <li>\u4f7f\u7528\u793a\u4f8b - \u914d\u7f6e\u4f7f\u7528\u793a\u4f8b</li> <li>\u6545\u969c\u6392\u67e5 - \u914d\u7f6e\u76f8\u5173\u95ee\u9898</li> </ul>"},{"location":"projects/rcsb_pdb/examples/","title":"\u4f7f\u7528\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u5e38\u89c1\u7684\u8fd0\u884c\u4e0e\u6269\u5c55\u573a\u666f\uff0c\u53ef\u76f4\u63a5\u590d\u5236\u547d\u4ee4\u884c\u6267\u884c\u3002</p>"},{"location":"projects/rcsb_pdb/examples/#1","title":"1. \u5168\u91cf\u540c\u6b65\uff08\u5206\u6279\uff09","text":"<pre><code>scrapy crawl rcsb_all_api \\\n  -a mode=full \\\n  -a max_targets=500 \\\n  -a batch_size=50 \\\n  -s LOG_LEVEL=INFO\n</code></pre> <p>\u8bf4\u660e - Search API \u4f1a\u6309\u7167 revision_date \u5347\u5e8f\u5206\u9875 - <code>max_targets</code> \u63a7\u5236\u672c\u6b21\u8fd0\u884c\u7684\u89c4\u6a21\uff0c\u9632\u6b62\u4efb\u52a1\u8fc7\u957f - \u5efa\u8bae\u7ed3\u5408\u5b9a\u65f6\u4efb\u52a1\u5206\u6bb5\u6267\u884c</p>"},{"location":"projects/rcsb_pdb/examples/#2","title":"2. \u589e\u91cf\u540c\u6b65\uff08\u5e26\u56de\u6eaf\uff09","text":"<pre><code>scrapy crawl rcsb_all_api \\\n  -a mode=incremental \\\n  -a overlap_days=2 \\\n  -a max_targets=2000\n</code></pre> <p>\u8981\u70b9 - Mongo <code>rcsb_increment_state</code> \u4fdd\u5b58\u4e0a\u6b21\u6700\u5927 revision - <code>overlap_days</code> \u53ef\u9632\u6b62 revision \u56de\u5199\u5931\u8d25\u5bfc\u81f4\u7684\u7f3a\u5931 - Redis <code>rcsb_all_api:revision</code> \u53ef\u4ee5 <code>DEL</code> \u4ee5\u5f3a\u5236\u5237\u65b0</p>"},{"location":"projects/rcsb_pdb/examples/#3-json","title":"3. \u5355\u6761\u8c03\u8bd5\uff08\u8f93\u51fa JSON\uff09","text":"<pre><code>scrapy crawl rcsb_all_api \\\n  -a pdb_id=1A1A \\\n  -a output_filename=1A1A.debug.json \\\n  -a mode=full\n</code></pre> <p>\u573a\u666f - \u8c03\u8bd5\u5b57\u6bb5\u8fc7\u6ee4\u7ed3\u679c - \u6821\u9a8c\u6587\u4ef6\u4e0b\u8f7d\u662f\u5426\u6210\u529f - \u4e0d\u4f9d\u8d56 Mongo/Redis</p> <p>JSON \u6587\u4ef6\u4f4d\u4e8e <code>src/spider/rcsb_pdb/inhance/1A1A.debug.json</code>\u3002</p>"},{"location":"projects/rcsb_pdb/examples/#4","title":"4. \u81ea\u5b9a\u4e49\u5b57\u6bb5\u8fc7\u6ee4","text":"<p><code>field_filter_config.json</code> \u793a\u4f8b\uff1a</p> <pre><code>{\n  \"mode\": \"whitelist\",\n  \"CoreEntry\": {\n    \"include_all\": false,\n    \"include_fields\": [\n      \"rcsb_id\",\n      \"struct\",\n      \"rcsb_accession_info.revision_date\"\n    ]\n  },\n  \"CorePolymerEntity\": {\n    \"include_all\": true,\n    \"exclude_fields\": [\"entity_poly_seq\"]\n  }\n}\n</code></pre> <p>\u8fd0\u884c\uff1a</p> <pre><code>scrapy crawl rcsb_all_api \\\n  -a field_filter_config=field_filter_config.json\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#5-mongo","title":"5. \u4ec5\u5199\u5165 Mongo\uff08\u8df3\u8fc7\u6587\u4ef6\uff09","text":"<pre><code>scrapy crawl rcsb_all_api \\\n  -s ITEM_PIPELINES=\"{'src.pipelines.storage.rcsb_pdb_pipeline.RcsbPdbPipeline': 400}\"\n</code></pre> <p>\u5728 <code>custom_settings</code> \u91cc\u8986\u76d6 <code>ITEM_PIPELINES</code>\uff0c\u5373\u53ef\u6309\u9700\u5f00\u542f/\u5173\u95ed\u6587\u4ef6\u4e0b\u8f7d Pipeline\u3002</p>"},{"location":"projects/rcsb_pdb/examples/#6-mkdocs-api","title":"6. \u7ed3\u5408 MkDocs \u67e5\u770b API","text":"<ol> <li>\u66f4\u65b0\u4ee3\u7801\u540e\u8fd0\u884c\uff1a</li> </ol> <pre><code>mkdocs serve\n</code></pre> <ol> <li>\u6253\u5f00 <code>http://127.0.0.1:8000/projects/ntrt/api/</code>\uff0c\u5373\u53ef\u67e5\u770b mkdocstrings \u751f\u6210\u7684 API \u6587\u6863\u3002</li> </ol> <p>\u66f4\u591a\u547d\u4ee4\u884c\u53c2\u6570\u53ef\u901a\u8fc7 <code>scrapy crawl rcsb_all_api -h</code> \u67e5\u770b\u3002\u5982\u9700\u81ea\u52a8\u5316\u90e8\u7f72\uff0c\u53ef\u53c2\u8003\u9879\u76ee\u6839\u76ee\u5f55\u7684 GitHub Actions \u5de5\u4f5c\u6d41\u3002*** End Patch</p>"},{"location":"projects/rcsb_pdb/examples/#_2","title":"\u4f7f\u7528\u793a\u4f8b","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b RCSB PDB \u722c\u866b\u9879\u76ee\u7684\u5e38\u89c1\u4f7f\u7528\u573a\u666f\u548c\u4ee3\u7801\u793a\u4f8b\u3002</p>"},{"location":"projects/rcsb_pdb/examples/#_3","title":"\u57fa\u7840\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/examples/#1_1","title":"\u793a\u4f8b 1\uff1a\u5355\u6761\u6570\u636e\u62c9\u53d6\uff08\u8c03\u8bd5\uff09","text":"<p>\u83b7\u53d6\u5355\u4e2a PDB \u7ed3\u6784\u6570\u636e\uff0c\u7528\u4e8e\u6d4b\u8bd5\u548c\u8c03\u8bd5\uff1a</p> <pre><code># \u65b9\u5f0f 1\uff1a\u4f7f\u7528 firing.py\npython firing.py\n\n# \u65b9\u5f0f 2\uff1a\u76f4\u63a5\u4f7f\u7528 Scrapy \u547d\u4ee4\nscrapy crawl rcsb_all_api -a pdb_id=1ABC -a output_filename=test.json\n</code></pre> <p>\u8f93\u51fa\uff1a - \u6570\u636e\u4fdd\u5b58\u5230 <code>src/spider/rcsb_pdb/inhance/test.json</code> - \u4e0d\u5199\u5165\u6570\u636e\u5e93</p> <p>\u9002\u7528\u573a\u666f\uff1a - \u6d4b\u8bd5 API \u8fde\u63a5 - \u8c03\u8bd5\u5b57\u6bb5\u8fc7\u6ee4\u89c4\u5219 - \u9a8c\u8bc1\u6570\u636e\u683c\u5f0f</p>"},{"location":"projects/rcsb_pdb/examples/#2_1","title":"\u793a\u4f8b 2\uff1a\u6279\u91cf\u5168\u91cf\u91c7\u96c6","text":"<p>\u91c7\u96c6\u6307\u5b9a\u6570\u91cf\u7684\u86cb\u767d\u8d28\u7ed3\u6784\u6570\u636e\uff1a</p> <pre><code>scrapy crawl rcsb_all_api -a mode=full -a max_targets=100 -a batch_size=50\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a - <code>mode=full</code>\uff1a\u5168\u91cf\u6a21\u5f0f - <code>max_targets=100</code>\uff1a\u6700\u591a\u91c7\u96c6 100 \u4e2a\u7ed3\u6784 - <code>batch_size=50</code>\uff1a\u6bcf\u6279\u8bf7\u6c42 50 \u4e2a</p> <p>\u8f93\u51fa\uff1a - \u6570\u636e\u5199\u5165 MongoDB \u96c6\u5408 <code>rcsb_pdb_structures_all</code> - \u6587\u4ef6\u4e0b\u8f7d\u5230\u914d\u7f6e\u7684\u5b58\u50a8\u8def\u5f84</p> <p>\u9002\u7528\u573a\u666f\uff1a - \u9996\u6b21\u6570\u636e\u91c7\u96c6 - \u91cd\u5efa\u6570\u636e\u5e93 - \u91c7\u96c6\u7279\u5b9a\u6570\u91cf\u7684\u6570\u636e</p>"},{"location":"projects/rcsb_pdb/examples/#3","title":"\u793a\u4f8b 3\uff1a\u589e\u91cf\u66f4\u65b0","text":"<p>\u57fa\u4e8e\u4e0a\u6b21\u91c7\u96c6\u7684 revision_date \u8fdb\u884c\u589e\u91cf\u66f4\u65b0\uff1a</p> <pre><code>scrapy crawl rcsb_all_api -a mode=incremental -a overlap_days=1\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a - <code>mode=incremental</code>\uff1a\u589e\u91cf\u6a21\u5f0f - <code>overlap_days=1</code>\uff1a\u5411\u524d\u91cd\u53e0 1 \u5929\uff08\u907f\u514d\u9057\u6f0f\uff09</p> <p>\u8f93\u51fa\uff1a - \u53ea\u91c7\u96c6\u66f4\u65b0\u6216\u65b0\u589e\u7684\u6570\u636e - \u66f4\u65b0\u589e\u91cf\u6e38\u6807\u5230 Redis</p> <p>\u9002\u7528\u573a\u666f\uff1a - \u65e5\u5e38\u6570\u636e\u66f4\u65b0 - \u5b9a\u65f6\u4efb\u52a1 - \u4fdd\u6301\u6570\u636e\u540c\u6b65</p>"},{"location":"projects/rcsb_pdb/examples/#_4","title":"\u9ad8\u7ea7\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/examples/#4_1","title":"\u793a\u4f8b 4\uff1a\u4f7f\u7528\u5b57\u6bb5\u8fc7\u6ee4","text":"<p>\u53ea\u91c7\u96c6\u9700\u8981\u7684\u5b57\u6bb5\uff0c\u51cf\u5c11\u6570\u636e\u91cf\uff1a</p> <pre><code>scrapy crawl rcsb_all_api \\\n  -a mode=full \\\n  -a max_targets=50 \\\n  -a field_filter_config=field_filter_config.json\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b\uff08<code>field_filter_config.json</code>\uff09\uff1a</p> <pre><code>{\n  \"entry_properties\": {\n    \"include\": [\n      \"rcsb_id\",\n      \"struct.title\",\n      \"struct.keywords\",\n      \"rcsb_entry_info.deposited_atom_count\"\n    ]\n  },\n  \"polymer_entities\": {\n    \"include\": [\n      \"entity_id\",\n      \"rcsb_polymer_entity.entity_poly.rcsb_entity_polymer_type\"\n    ]\n  }\n}\n</code></pre> <p>\u8bf4\u660e\uff1a - <code>include</code>\uff1a\u53ea\u4fdd\u7559\u6307\u5b9a\u7684\u5b57\u6bb5 - <code>exclude</code>\uff1a\u6392\u9664\u6307\u5b9a\u7684\u5b57\u6bb5 - \u5b57\u6bb5\u8def\u5f84\u4f7f\u7528\u70b9\u53f7\u5206\u9694\uff0c\u5982 <code>struct.title</code></p>"},{"location":"projects/rcsb_pdb/examples/#5","title":"\u793a\u4f8b 5\uff1a\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\u91c7\u96c6","text":"<p>\u4ece Search API \u7684\u7b2c 100 \u6761\u5f00\u59cb\u91c7\u96c6\uff1a</p> <pre><code>scrapy crawl rcsb_all_api \\\n  -a mode=full \\\n  -a max_targets=200 \\\n  -a start_from=100 \\\n  -a batch_size=50\n</code></pre> <p>\u9002\u7528\u573a\u666f\uff1a - \u65ad\u70b9\u7eed\u4f20 - \u8df3\u8fc7\u5df2\u91c7\u96c6\u7684\u6570\u636e - \u5206\u6279\u6b21\u91c7\u96c6</p>"},{"location":"projects/rcsb_pdb/examples/#6","title":"\u793a\u4f8b 6\uff1a\u81ea\u5b9a\u4e49\u8f93\u51fa\u6587\u4ef6\u540d","text":"<p>\u5355\u6761\u6a21\u5f0f\u4e0b\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u540d\uff1a</p> <pre><code>scrapy crawl rcsb_all_api \\\n  -a pdb_id=1ABC \\\n  -a output_filename=my_custom_output.json\n</code></pre> <p>\u8f93\u51fa\u4f4d\u7f6e\uff1a - <code>src/spider/rcsb_pdb/inhance/my_custom_output.json</code></p>"},{"location":"projects/rcsb_pdb/examples/#python","title":"Python \u4ee3\u7801\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/examples/#7","title":"\u793a\u4f8b 7\uff1a\u5728\u4ee3\u7801\u4e2d\u542f\u52a8\u722c\u866b","text":"<pre><code>from scrapy import cmdline\n\n# \u5355\u6761\u6a21\u5f0f\ncmdline.execute([\n    'scrapy', 'crawl', 'rcsb_all_api',\n    '-a', 'pdb_id=1ABC',\n    '-a', 'output_filename=test.json'\n])\n\n# \u5168\u91cf\u6a21\u5f0f\ncmdline.execute([\n    'scrapy', 'crawl', 'rcsb_all_api',\n    '-a', 'mode=full',\n    '-a', 'max_targets=100',\n    '-a', 'batch_size=50'\n])\n\n# \u589e\u91cf\u6a21\u5f0f\ncmdline.execute([\n    'scrapy', 'crawl', 'rcsb_all_api',\n    '-a', 'mode=incremental',\n    '-a', 'overlap_days=1'\n])\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#8-firingpy","title":"\u793a\u4f8b 8\uff1a\u4f7f\u7528 firing.py \u542f\u52a8","text":"<pre><code># \u7f16\u8f91 firing.py\nfrom firing import start_spider\n\n# \u5355\u6761\u6a21\u5f0f\nstart_spider(\n    spider_name=\"rcsb_all_api\",\n    pdb_id=\"1ABC\",\n    output_filename=\"test.json\"\n)\n\n# \u5168\u91cf\u6a21\u5f0f\nstart_spider(\n    spider_name=\"rcsb_all_api\",\n    mode=\"full\",\n    max_targets=100,\n    batch_size=50\n)\n\n# \u589e\u91cf\u6a21\u5f0f\nstart_spider(\n    spider_name=\"rcsb_all_api\",\n    mode=\"incremental\",\n    overlap_days=1\n)\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#_5","title":"\u5b9e\u9645\u5e94\u7528\u573a\u666f","text":""},{"location":"projects/rcsb_pdb/examples/#1_2","title":"\u573a\u666f 1\uff1a\u9996\u6b21\u6570\u636e\u91c7\u96c6","text":"<pre><code># \u91c7\u96c6\u524d 1000 \u4e2a\u7ed3\u6784\nscrapy crawl rcsb_all_api \\\n  -a mode=full \\\n  -a max_targets=1000 \\\n  -a batch_size=100\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#2_2","title":"\u573a\u666f 2\uff1a\u65e5\u5e38\u589e\u91cf\u66f4\u65b0\uff08\u5b9a\u65f6\u4efb\u52a1\uff09","text":"<pre><code># \u6bcf\u5929\u8fd0\u884c\u4e00\u6b21\uff0c\u66f4\u65b0\u6700\u65b0\u6570\u636e\nscrapy crawl rcsb_all_api \\\n  -a mode=incremental \\\n  -a overlap_days=1\n</code></pre> <p>Crontab \u914d\u7f6e\u793a\u4f8b\uff1a</p> <pre><code># \u6bcf\u5929\u51cc\u6668 2 \u70b9\u8fd0\u884c\n0 2 * * * cd /path/to/RCSB_PDB &amp;&amp; scrapy crawl rcsb_all_api -a mode=incremental\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#3-pdb-id","title":"\u573a\u666f 3\uff1a\u6d4b\u8bd5\u7279\u5b9a PDB ID","text":"<pre><code># \u6d4b\u8bd5\u591a\u4e2a PDB ID\nfor pdb_id in 1ABC 2DEF 3GHI; do\n  scrapy crawl rcsb_all_api -a pdb_id=$pdb_id -a output_filename=${pdb_id}.json\ndone\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#4_2","title":"\u573a\u666f 4\uff1a\u91c7\u96c6\u7279\u5b9a\u5b57\u6bb5","text":"<p>\u521b\u5efa <code>field_filter_config.json</code>\uff1a</p> <pre><code>{\n  \"entry_properties\": {\n    \"include\": [\n      \"rcsb_id\",\n      \"struct.title\",\n      \"rcsb_entry_info.molecular_weight\"\n    ]\n  }\n}\n</code></pre> <p>\u8fd0\u884c\uff1a</p> <pre><code>scrapy crawl rcsb_all_api \\\n  -a mode=full \\\n  -a max_targets=100 \\\n  -a field_filter_config=field_filter_config.json\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#_6","title":"\u6570\u636e\u67e5\u8be2\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/examples/#mongodb","title":"MongoDB \u67e5\u8be2\u793a\u4f8b","text":"<pre><code>from src.utils.mongodb_manager import MongoDBManager\n\nmongo = MongoDBManager()\ncollection = mongo.db['rcsb_pdb_structures_all']\n\n# \u67e5\u8be2\u7279\u5b9a PDB ID\nresult = collection.find_one({'PDB_ID': '1ABC'})\n\n# \u67e5\u8be2\u6240\u6709\u6570\u636e\nall_data = collection.find()\n\n# \u7edf\u8ba1\u6570\u91cf\ncount = collection.count_documents({})\n\n# \u67e5\u8be2\u6700\u8fd1\u66f4\u65b0\u7684\u6570\u636e\nrecent = collection.find().sort('max_revision_date', -1).limit(10)\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#redis","title":"Redis \u67e5\u8be2\u793a\u4f8b","text":"<pre><code>from src.utils.redis_manager import RedisManager\n\nredis = RedisManager().get_connection()\n\n# \u83b7\u53d6\u589e\u91cf\u6e38\u6807\ncursor = redis.hget('rcsb_all_api:revision', 'last_revision_date')\nprint(f\"Last revision date: {cursor}\")\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#_7","title":"\u9519\u8bef\u5904\u7406\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/examples/#9","title":"\u793a\u4f8b 9\uff1a\u5904\u7406\u91c7\u96c6\u9519\u8bef","text":"<pre><code># \u5728\u722c\u866b\u4e2d\u6dfb\u52a0\u9519\u8bef\u5904\u7406\ndef parse(self, response):\n    try:\n        # \u91c7\u96c6\u903b\u8f91\n        yield item\n    except Exception as e:\n        self.logger.error(f\"Error processing {response.url}: {e}\")\n        # \u53ef\u4ee5\u9009\u62e9\u91cd\u8bd5\u6216\u8df3\u8fc7\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#_8","title":"\u6027\u80fd\u4f18\u5316\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/examples/#10","title":"\u793a\u4f8b 10\uff1a\u8c03\u6574\u5e76\u53d1\u6570","text":"<pre><code># \u5728 settings.py \u4e2d\u8c03\u6574\nCONCURRENT_REQUESTS = 64  # \u63d0\u9ad8\u5e76\u53d1\u6570\n\n# \u6216\u901a\u8fc7\u547d\u4ee4\u884c\u53c2\u6570\nscrapy crawl rcsb_all_api -s CONCURRENT_REQUESTS=64 -a mode=full\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#11","title":"\u793a\u4f8b 11\uff1a\u8c03\u6574\u6279\u91cf\u5927\u5c0f","text":"<pre><code># \u6839\u636e\u7f51\u7edc\u60c5\u51b5\u8c03\u6574 batch_size\nscrapy crawl rcsb_all_api \\\n  -a mode=full \\\n  -a max_targets=1000 \\\n  -a batch_size=100  # \u589e\u5927\u6279\u91cf\u5927\u5c0f\n</code></pre>"},{"location":"projects/rcsb_pdb/examples/#_9","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb - \u73af\u5883\u914d\u7f6e</li> <li>\u6838\u5fc3\u6a21\u5757 - \u6a21\u5757\u8be6\u7ec6\u8bf4\u660e</li> <li>\u914d\u7f6e\u8bf4\u660e - \u914d\u7f6e\u53c2\u6570</li> <li>\u7cfb\u7edf\u5168\u666f - API \u53c2\u8003</li> </ul>"},{"location":"projects/rcsb_pdb/getting-started/","title":"\u5feb\u901f\u5f00\u59cb","text":"<p>\u672c\u6307\u5357\u5e2e\u52a9\u4f60\u5728 10 \u5206\u949f\u5185\u8dd1\u901a RCSB PDB \u9879\u76ee\uff0c\u6db5\u76d6\u73af\u5883\u51c6\u5907\u3001\u4f9d\u8d56\u5b89\u88c5\u4ee5\u53ca\u5e38\u89c1\u547d\u4ee4\u3002</p>"},{"location":"projects/rcsb_pdb/getting-started/#1","title":"1. \u5148\u51b3\u6761\u4ef6","text":"\u7ec4\u4ef6 \u5efa\u8bae\u7248\u672c \u8bf4\u660e Python 3.11+ \u9700\u542f\u7528 venv MongoDB 4.4+ \u4fdd\u5b58\u7ed3\u6784\u5316\u7ed3\u679c\u4e0e\u589e\u91cf\u6e38\u6807 Redis 5.0+ \u7f13\u5b58 revision_date\uff0c\u505a\u91cd\u590d\u5224\u65ad Git 2.30+ \u62c9\u53d6\u4ee3\u7801 <p>\u26a0\ufe0f \u82e5\u65e0\u6cd5\u8bbf\u95ee\u5916\u7f51\uff0c\u8bf7\u63d0\u524d\u914d\u7f6e\u516c\u53f8\u5236\u54c1\u5e93 / pip \u6e90\u3002</p>"},{"location":"projects/rcsb_pdb/getting-started/#2","title":"2. \u514b\u9686\u4e0e\u5b89\u88c5","text":"<pre><code>git clone git@github.com:Gearless01Joe/Markdown_test.git\ncd Markdown_test\n\n# \u521b\u5efa\u865a\u62df\u73af\u5883\npython -m venv .venv\n.venv\\Scripts\\activate  # Windows\n\n# \u5b89\u88c5\u4f9d\u8d56\npip install -r requirements.txt\npip install -r MkDocs_doc/requirements.txt\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#3","title":"3. \u914d\u7f6e\u672c\u5730\u73af\u5883","text":"<ol> <li>\u590d\u5236 <code>code_liu/RCSB_PDB/.env.example</code>\uff08\u82e5\u5b58\u5728\uff09\u6216\u624b\u52a8\u521b\u5efa <code>.env</code>\uff1a</li> </ol> <pre><code>MONGO_URI=mongodb://medpeer:medpeer@192.168.1.245:27017/raw_data\nREDIS_URI=redis://:medpeer@101.200.62.36:6379/1\n</code></pre> <ol> <li>\u6839\u636e\u9700\u8981\u4fee\u6539 <code>src/settings.py</code> \u4e2d\u7684\u6570\u636e\u5e93\u3001\u65e5\u5fd7\u3001\u4ee3\u7406\u914d\u7f6e\u3002\u5efa\u8bae\u5c06\u654f\u611f\u4fe1\u606f\u63d0\u53d6\u4e3a\u73af\u5883\u53d8\u91cf\uff1a</li> </ol> <pre><code>set MYSQL_PASSWORD=***\nset REDIS_PASSWORD=***\n</code></pre> <ol> <li>\u521b\u5efa\u6570\u636e\u76ee\u5f55\uff1a</li> </ol> <pre><code>mkdir -p data/rcsb_pdb_all\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#4","title":"4. \u8fd0\u884c\u65b9\u5f0f","text":""},{"location":"projects/rcsb_pdb/getting-started/#_2","title":"\u65b9\u5f0f\u4e00\uff1a\u5355\u6761\u8c03\u8bd5","text":"<pre><code>cd code_liu/RCSB_PDB\nscrapy crawl rcsb_all_api -a pdb_id=1A1A -a mode=full\n</code></pre> <ul> <li><code>pdb_id</code>\uff1a\u6307\u5b9a\u7ed3\u6784 ID</li> <li><code>output_filename</code>\uff1a\u81ea\u5b9a\u4e49 JSON \u6587\u4ef6\u540d</li> </ul>"},{"location":"projects/rcsb_pdb/getting-started/#_3","title":"\u65b9\u5f0f\u4e8c\uff1a\u6279\u91cf\u5168\u91cf","text":"<pre><code>scrapy crawl rcsb_all_api -a mode=full -a max_targets=500 -a batch_size=50\n</code></pre> <ul> <li><code>max_targets</code>\uff1a\u672c\u6b21\u4efb\u52a1\u7684\u6570\u91cf\u4e0a\u9650</li> <li><code>batch_size</code>\uff1aSearch API \u7684\u5206\u9875\u5927\u5c0f</li> </ul>"},{"location":"projects/rcsb_pdb/getting-started/#_4","title":"\u65b9\u5f0f\u4e09\uff1a\u589e\u91cf\u66f4\u65b0","text":"<pre><code>scrapy crawl rcsb_all_api -a mode=incremental -a overlap_days=2\n</code></pre> <ul> <li>Redis \u4fdd\u5b58 revision_date\uff0cMongo <code>rcsb_increment_state</code> \u4fdd\u5b58\u6e38\u6807</li> <li><code>overlap_days</code> \u7528\u4e8e\u9632\u6296\uff0c\u5efa\u8bae 1~3 \u5929</li> </ul>"},{"location":"projects/rcsb_pdb/getting-started/#5","title":"5. \u9a8c\u8bc1\u7ed3\u679c","text":"<ol> <li>JSON \u6587\u4ef6\uff1a<code>code_liu/RCSB_PDB/src/spider/rcsb_pdb/inhance/*.json</code></li> <li>MongoDB\uff1a<code>raw_data.rcsb_pdb_structures_all</code></li> <li>Redis\uff1a<code>rcsb_all_api:revision</code> \u54c8\u5e0c</li> <li>MkDocs \u6587\u6863\uff1a</li> </ol> <pre><code>cd MkDocs_doc\nmkdocs serve\n# \u6d4f\u89c8 http://127.0.0.1:8000/projects/ntrt/\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#6","title":"6. \u5e38\u89c1\u547d\u4ee4\u901f\u67e5","text":"\u9700\u6c42 \u547d\u4ee4 \u67e5\u770b\u652f\u6301\u53c2\u6570 <code>scrapy crawl rcsb_all_api -a help=1</code> \u6e05\u7a7a\u589e\u91cf\u6e38\u6807 <code>mongo raw_data --eval 'db.rcsb_increment_state.remove({})'</code> \u6e05\u7a7a Redis revision <code>redis-cli DEL rcsb_all_api:revision</code> \u5bfc\u51fa\u65e5\u5fd7 <code>scrapy crawl ... --logfile logs/rcsb.log</code> <p>\u5982\u9047\u95ee\u9898\uff0c\u53ef\u8df3\u8f6c\u81f3 \u6545\u969c\u6392\u67e5\u3002</p>"},{"location":"projects/rcsb_pdb/getting-started/#_5","title":"\u5feb\u901f\u5f00\u59cb","text":"<p>\u672c\u6587\u6863\u5c06\u5e2e\u52a9\u4f60\u5feb\u901f\u642d\u5efa RCSB PDB \u722c\u866b\u9879\u76ee\u7684\u8fd0\u884c\u73af\u5883\u5e76\u6267\u884c\u7b2c\u4e00\u6b21\u6570\u636e\u91c7\u96c6\u3002</p>"},{"location":"projects/rcsb_pdb/getting-started/#_6","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>Python\uff1a3.8 \u6216\u66f4\u9ad8\u7248\u672c</li> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows / Linux / macOS</li> <li>\u6570\u636e\u5e93\uff1a</li> <li>MongoDB 4.0+\uff08\u5fc5\u9700\uff09</li> <li>Redis 5.0+\uff08\u589e\u91cf\u6a21\u5f0f\u9700\u8981\uff09</li> <li>MySQL 5.7+\uff08\u53ef\u9009\uff09</li> </ul>"},{"location":"projects/rcsb_pdb/getting-started/#_7","title":"\u5b89\u88c5\u6b65\u9aa4","text":""},{"location":"projects/rcsb_pdb/getting-started/#1_1","title":"1. \u514b\u9686\u9879\u76ee","text":"<pre><code>cd D:\\Python_project\\Markdown\\code_liu\\RCSB_PDB\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#2_1","title":"2. \u5b89\u88c5\u4f9d\u8d56","text":"<pre><code>pip install -r requirements.txt\n</code></pre> <p>\u4e3b\u8981\u4f9d\u8d56\u5305\u62ec\uff1a - <code>scrapy</code> - \u722c\u866b\u6846\u67b6 - <code>pymongo</code> - MongoDB \u9a71\u52a8 - <code>redis</code> - Redis \u9a71\u52a8 - <code>pymysql</code> - MySQL \u9a71\u52a8\uff08\u53ef\u9009\uff09</p>"},{"location":"projects/rcsb_pdb/getting-started/#3_1","title":"3. \u914d\u7f6e\u6570\u636e\u5e93","text":"<p>\u7f16\u8f91 <code>src/settings.py</code>\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\uff1a</p> <pre><code># MongoDB \u914d\u7f6e\nMONGODB_DATABASES = {\n    \"default\": {\n        \"type\": \"mongodb\",\n        'user': 'your_username',\n        'password': 'your_password',\n        'host': 'your_host',\n        'port': 27017,\n        'database': 'raw_data',\n    },\n}\n\n# Redis \u914d\u7f6e\uff08\u589e\u91cf\u6a21\u5f0f\u9700\u8981\uff09\nREDIS_DATABASES = {\n    \"default\": {\n        \"type\": \"redis\",\n        'password': 'your_password',\n        'host': 'your_host',\n        'port': 6379,\n        'database': 1,\n    }\n}\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#4_1","title":"4. \u914d\u7f6e\u65e5\u5fd7\u8def\u5f84","text":"<p>\u5728 <code>src/constant.py</code> \u4e2d\u914d\u7f6e\u65e5\u5fd7\u548c\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff1a</p> <pre><code>LOG_PATH = \"/path/to/logs\"\nUPLOAD_PATH = \"/path/to/uploads\"\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#_8","title":"\u5feb\u901f\u8fd0\u884c\u793a\u4f8b","text":""},{"location":"projects/rcsb_pdb/getting-started/#1_2","title":"\u793a\u4f8b 1\uff1a\u5355\u6761\u6570\u636e\u62c9\u53d6\uff08\u8c03\u8bd5\u6a21\u5f0f\uff09","text":"<p>\u83b7\u53d6\u5355\u4e2a PDB \u7ed3\u6784\u6570\u636e\uff0c\u7528\u4e8e\u6d4b\u8bd5\u548c\u8c03\u8bd5\uff1a</p> <pre><code>python firing.py\n</code></pre> <p>\u6216\u8005\u76f4\u63a5\u4f7f\u7528 Scrapy \u547d\u4ee4\uff1a</p> <pre><code>scrapy crawl rcsb_all_api -a pdb_id=1ABC -a output_filename=test.json\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a - <code>pdb_id</code>\uff1aPDB ID\uff08\u5982 1ABC\uff09 - <code>output_filename</code>\uff1a\u8f93\u51fa\u6587\u4ef6\u540d\uff08\u53ef\u9009\uff09</p>"},{"location":"projects/rcsb_pdb/getting-started/#2_2","title":"\u793a\u4f8b 2\uff1a\u6279\u91cf\u5168\u91cf\u91c7\u96c6","text":"<p>\u91c7\u96c6\u6307\u5b9a\u6570\u91cf\u7684\u86cb\u767d\u8d28\u7ed3\u6784\u6570\u636e\uff1a</p> <pre><code>scrapy crawl rcsb_all_api -a mode=full -a max_targets=100 -a batch_size=50\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a - <code>mode=full</code>\uff1a\u5168\u91cf\u6a21\u5f0f - <code>max_targets</code>\uff1a\u6700\u5927\u91c7\u96c6\u6570\u91cf - <code>batch_size</code>\uff1a\u6bcf\u6279\u8bf7\u6c42\u6570\u91cf</p>"},{"location":"projects/rcsb_pdb/getting-started/#3_2","title":"\u793a\u4f8b 3\uff1a\u589e\u91cf\u66f4\u65b0","text":"<p>\u57fa\u4e8e\u4e0a\u6b21\u91c7\u96c6\u7684 revision_date \u8fdb\u884c\u589e\u91cf\u66f4\u65b0\uff1a</p> <pre><code>scrapy crawl rcsb_all_api -a mode=incremental -a overlap_days=1\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a - <code>mode=incremental</code>\uff1a\u589e\u91cf\u6a21\u5f0f - <code>overlap_days</code>\uff1a\u5411\u524d\u91cd\u53e0\u5929\u6570\uff08\u907f\u514d\u9057\u6f0f\uff09</p>"},{"location":"projects/rcsb_pdb/getting-started/#_9","title":"\u9a8c\u8bc1\u5b89\u88c5","text":"<p>\u8fd0\u884c\u5355\u6761\u6570\u636e\u62c9\u53d6\u6d4b\u8bd5\uff1a</p> <pre><code>scrapy crawl rcsb_all_api -a pdb_id=1ABC\n</code></pre> <p>\u5982\u679c\u770b\u5230\u4ee5\u4e0b\u8f93\u51fa\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\uff1a</p> <pre><code>[INFO] \u5f00\u59cb\u5904\u7406 PDB ID: 1ABC\n[INFO] \u6570\u636e\u91c7\u96c6\u5b8c\u6210\n[INFO] \u6570\u636e\u5df2\u4fdd\u5b58\u5230 MongoDB\n</code></pre>"},{"location":"projects/rcsb_pdb/getting-started/#_10","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"projects/rcsb_pdb/getting-started/#1mongodb","title":"\u95ee\u9898 1\uff1aMongoDB \u8fde\u63a5\u5931\u8d25","text":"<p>\u89e3\u51b3\u65b9\u6848\uff1a 1. \u68c0\u67e5 MongoDB \u670d\u52a1\u662f\u5426\u542f\u52a8 2. \u9a8c\u8bc1\u8fde\u63a5\u4fe1\u606f\u662f\u5426\u6b63\u786e 3. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u548c\u9632\u706b\u5899\u8bbe\u7f6e</p>"},{"location":"projects/rcsb_pdb/getting-started/#2redis","title":"\u95ee\u9898 2\uff1aRedis \u8fde\u63a5\u5931\u8d25\uff08\u589e\u91cf\u6a21\u5f0f\uff09","text":"<p>\u89e3\u51b3\u65b9\u6848\uff1a 1. \u589e\u91cf\u6a21\u5f0f\u9700\u8981 Redis\uff0c\u786e\u4fdd Redis \u670d\u52a1\u8fd0\u884c 2. \u9a8c\u8bc1 Redis \u8fde\u63a5\u914d\u7f6e 3. \u5982\u679c\u4e0d\u9700\u8981\u589e\u91cf\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>mode=full</code></p>"},{"location":"projects/rcsb_pdb/getting-started/#3_3","title":"\u95ee\u9898 3\uff1a\u4f9d\u8d56\u5b89\u88c5\u5931\u8d25","text":"<p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code># \u4f7f\u7528\u56fd\u5185\u955c\u50cf\u6e90\npip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre></p>"},{"location":"projects/rcsb_pdb/getting-started/#_11","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u67e5\u770b \u67b6\u6784\u8bbe\u8ba1 \u4e86\u89e3\u7cfb\u7edf\u67b6\u6784</li> <li>\u67e5\u770b \u914d\u7f6e\u8bf4\u660e \u4e86\u89e3\u8be6\u7ec6\u914d\u7f6e</li> <li>\u67e5\u770b \u4f7f\u7528\u793a\u4f8b \u4e86\u89e3\u66f4\u591a\u4f7f\u7528\u573a\u666f</li> <li>\u67e5\u770b \u7cfb\u7edf\u5168\u666f \u4e86\u89e3\u5b8c\u6574\u7684 API \u6587\u6863</li> </ul>"},{"location":"projects/rcsb_pdb/getting-started/#_12","title":"\u83b7\u53d6\u5e2e\u52a9","text":"<p>\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u67e5\u770b\uff1a - \u6545\u969c\u6392\u67e5 - \u5e38\u89c1\u95ee\u9898\u89e3\u51b3\u65b9\u6848 - \u6838\u5fc3\u6a21\u5757 - \u6a21\u5757\u8be6\u7ec6\u8bf4\u660e - \u7cfb\u7edf\u5168\u666f - API \u53c2\u8003\u6587\u6863</p>"},{"location":"projects/rcsb_pdb/guide/","title":"\u6838\u5fc3\u6a21\u5757\u6307\u5357","text":"<p>\u672c\u6587\u4ece\u5de5\u7a0b\u89c6\u89d2\u68b3\u7406 RCSB PDB \u9879\u76ee\u7684\u5173\u952e\u6a21\u5757\uff0c\u5e2e\u52a9\u4f60\u5feb\u901f\u5b9a\u4f4d\u300c\u8be5\u6539\u54ea\u91cc\u3001\u8be5\u770b\u54ea\u91cc\u300d\u3002</p>"},{"location":"projects/rcsb_pdb/guide/#1-srcsettingspy","title":"1. \u9879\u76ee\u914d\u7f6e <code>src/settings.py</code>","text":"\u533a\u57df \u8bf4\u660e \u5173\u952e\u5b57\u6bb5 \u6570\u636e\u5e93 \u5b9a\u4e49 MySQL / MongoDB / Redis \u8fde\u63a5 <code>MYSQL_DATABASES</code>, <code>MONGODB_DATABASES</code>, <code>REDIS_DATABASES</code> Scrapy \u57fa\u7840 BOT\u3001Spider \u6a21\u5757\u3001\u5e76\u53d1\u3001\u4e0b\u8f7d\u8bbe\u7f6e <code>BOT_NAME</code>, <code>CONCURRENT_REQUESTS</code>, <code>DOWNLOAD_DELAY</code> \u4e2d\u95f4\u4ef6 \u7edf\u4e00\u52a0\u8f7d\u9a8c\u8bc1\u7801\u3001\u4ee3\u7406\u3001\u5386\u53f2\u6570\u636e\u63a7\u5236 <code>DOWNLOADER_MIDDLEWARES</code>, <code>SPIDER_MIDDLEWARES</code> Playwright \u5982\u9700\u6d4f\u89c8\u5668\uff0c\u53ef\u5728\u6b64\u542f\u7528 <code>PLAYWRIGHT_PROCESS_REQUEST_HEADERS</code> \u65e5\u5fd7 \u5206\u7ea7\u3001\u683c\u5f0f\u3001\u6587\u4ef6\u843d\u5730 <code>LOG_*</code> \u7cfb\u5217 <p>\u5efa\u8bae\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u8986\u76d6\u751f\u4ea7\u914d\u7f6e\uff0c\u907f\u514d\u76f4\u63a5\u6539\u52a8\u4ed3\u5e93\u3002</p>"},{"location":"projects/rcsb_pdb/guide/#2-srcitemsrcsb_pdb_itempy","title":"2. \u6570\u636e\u6a21\u578b <code>src/items/rcsb_pdb_item.py</code>","text":"<p><code>RcsbAllApiItem</code> \u4ee3\u8868\u4e00\u6761\u7ed3\u6784\u5316\u7684\u86cb\u767d\u8d28\u8bb0\u5f55\uff0c\u5305\u542b\uff1a</p> <ul> <li>\u7ed3\u6784\u6807\u8bc6\uff1a<code>PDB_ID</code>, <code>rcsb_id</code>, <code>max_revision_date</code></li> <li>Entry \u5c5e\u6027\uff1a<code>entry_properties</code></li> <li>\u5404\u7c7b\u5b9e\u4f53\uff1a<code>polymer_entities</code>, <code>nonpolymer_entities</code>, <code>branched_entities</code></li> <li>\u5316\u5408\u7269/\u836f\u7269\uff1a<code>chemcomp</code>, <code>drugbank</code></li> <li>\u9644\u4ef6\uff1a<code>cif_file</code>, <code>validation_image</code></li> </ul> <p>\u5b57\u6bb5\u7c7b\u578b\u6cbf\u7528 Scrapy <code>Field</code>/\u81ea\u5b9a\u4e49 <code>StringField|FileOSSField</code>\uff0c\u65b9\u4fbf Pipeline \u4e0e\u4e0b\u8f7d\u5668\u8bc6\u522b\u3002</p>"},{"location":"projects/rcsb_pdb/guide/#3-pipeline-srcpipelinesrcsb_pdb_pipelinepy","title":"3. Pipeline <code>src/pipelines/rcsb_pdb_pipeline.py</code>","text":"<p><code>RcsbPdbPipeline</code> \u7ee7\u627f <code>MongoDBRawStoragePipeline</code>\uff0c\u6838\u5fc3\u914d\u7f6e\uff1a</p> <ul> <li><code>connect_key = \"default\"</code>\uff1a\u5f15\u7528 <code>settings.py</code> \u4e2d\u7684 Mongo \u8fde\u63a5</li> <li><code>collection_name = \"rcsb_pdb_structures_all\"</code>\uff1a\u5165\u5e93\u96c6\u5408</li> <li><code>item_class = RcsbAllApiItem</code>\uff1a\u53ea\u63a5\u53d7\u89c4\u8303\u5316 Item</li> </ul> <p>\u82e5\u9700\u5199\u5165\u5176\u4ed6\u5e93\uff0c\u53ef\u901a\u8fc7\u7ee7\u627f\u8986\u76d6 <code>collection_name</code> \u6216\u5b9e\u73b0\u989d\u5916\u7684 Pipeline\u3002</p>"},{"location":"projects/rcsb_pdb/guide/#4-srcspiderrcsb_pdbfield_filterpy","title":"4. \u5b57\u6bb5\u8fc7\u6ee4 <code>src/spider/rcsb_pdb/field_filter.py</code>","text":"<p><code>FieldFilter</code> \u57fa\u4e8e JSON \u914d\u7f6e\u88c1\u526a\u6570\u636e\uff0c\u5e38\u89c1\u7528\u9014\uff1a</p> <ul> <li>\u63a7\u5236 Entry/Entity \u4e2d\u7684\u5b57\u6bb5\u4fdd\u7559\u4e0e\u5254\u9664</li> <li>\u5bf9\u5d4c\u5957\u5b57\u6bb5\u8bbe\u7f6e include/exclude \u89c4\u5219</li> <li>\u6307\u5b9a\u767d\u540d\u5355\u6216\u9ed1\u540d\u5355\u6a21\u5f0f</li> </ul> <p>\u793a\u4f8b\u89c4\u5219\uff08\u8be6\u89c1 <code>field_filter_config.json</code>\uff09\uff1a</p> <pre><code>{\n  \"mode\": \"whitelist\",\n  \"CoreEntry\": {\n    \"include_all\": false,\n    \"include_fields\": [\"rcsb_id\", \"struct\", \"rcsb_accession_info\"]\n  }\n}\n</code></pre>"},{"location":"projects/rcsb_pdb/guide/#5-srcspiderrcsb_pdbrcsb_pdb_spiderpy","title":"5. \u4e3b\u722c\u866b <code>src/spider/rcsb_pdb/rcsb_pdb_spider.py</code>","text":""},{"location":"projects/rcsb_pdb/guide/#_2","title":"\u5165\u53e3\u53c2\u6570","text":"<ul> <li><code>mode</code>: <code>full</code> / <code>incremental</code></li> <li><code>max_targets</code>, <code>batch_size</code>, <code>start_from</code></li> <li><code>pdb_id</code>: \u5355\u6761\u8c03\u8bd5</li> <li><code>field_filter_config</code>: \u81ea\u5b9a\u4e49\u8fc7\u6ee4\u6587\u4ef6</li> </ul>"},{"location":"projects/rcsb_pdb/guide/#_3","title":"\u6838\u5fc3\u6d41\u7a0b","text":"<ol> <li><code>_request_search</code>\uff1a\u8c03\u7528 Search API \u5206\u9875\u83b7\u53d6 PDB ID</li> <li><code>_schedule_entry</code> &amp; <code>parse_entry</code>\uff1a\u62c9\u53d6 Entry\uff0c\u8bb0\u5f55 revision_date</li> <li><code>_parse_entity</code>\uff1a\u6293\u53d6 polymer / nonpolymer / branched</li> <li><code>_parse_comp</code> / <code>_parse_drugbank</code>\uff1a\u8865\u5145\u5316\u5408\u7269/\u836f\u7269\u8be6\u60c5</li> <li><code>_save_result</code>\uff1a\u5199 JSON\u3001\u6784\u5efa Item\u3001\u66f4\u65b0 Redis/Mongo \u6e38\u6807</li> </ol>"},{"location":"projects/rcsb_pdb/guide/#_4","title":"\u589e\u91cf\u673a\u5236","text":"<ul> <li><code>RedisManager</code>\uff1a<code>rcsb_all_api:revision</code> \u54c8\u5e0c\u8bb0\u5f55\u5404 PDB \u8fd1\u671f revision</li> <li><code>MongoDBManager</code>\uff1a<code>rcsb_increment_state.last_revision</code> \u8bb0\u5f55\u5168\u5c40\u6e38\u6807</li> <li><code>_compute_increment_start</code>\uff1a\u6839\u636e <code>overlap_days</code> \u56de\u6eaf</li> </ul>"},{"location":"projects/rcsb_pdb/guide/#6","title":"6. \u4f9d\u8d56\u5de5\u5177","text":"\u6a21\u5757 \u4f5c\u7528 <code>src.utils.mongodb_manager.MongoDBManager</code> \u7edf\u4e00 Mongo \u8fde\u63a5 <code>src.utils.redis_manager.RedisManager</code> \u63d0\u4f9b Redis \u8fde\u63a5\u6c60 <code>src.pipelines.file_download_pipeline</code> \u4e0b\u8f7d CIF/\u56fe\u7247\u5e76\u4fdd\u5b58 <code>src.middlewares.*</code> \u4ee3\u7406\u3001\u91cd\u8bd5\u3001\u5386\u53f2\u6570\u636e\u62e6\u622a"},{"location":"projects/rcsb_pdb/guide/#7","title":"7. \u4fee\u6539\u5efa\u8bae","text":"<ol> <li>\u65b0\u9700\u6c42\uff1a\u5728 Spider \u4e2d\u65b0\u589e API \u8c03\u7528 \u2192 \u66f4\u65b0 Item \u5b57\u6bb5 \u2192 \u6269\u5c55 Pipeline \u5165\u5e93\u903b\u8f91\u3002</li> <li>\u5b57\u6bb5\u7b56\u7565\uff1a\u901a\u8fc7 JSON \u914d\u7f6e\u63a7\u5236\u8f93\u51fa\uff0c\u4e0d\u5efa\u8bae\u76f4\u63a5\u4fee\u6539\u4ee3\u7801\u3002</li> <li>\u90e8\u7f72\u4f18\u5316\uff1a\u53ef\u5728 <code>custom_settings</code> \u4e2d\u8c03\u6574\u5e76\u53d1\u3001\u65e5\u5fd7\u3001Pipeline \u987a\u5e8f\u3002</li> </ol> <p>\u66f4\u591a\u5b9e\u64cd\u793a\u4f8b\u89c1 \u4f7f\u7528\u793a\u4f8b\u3002</p>"},{"location":"projects/rcsb_pdb/troubleshooting/","title":"\u6545\u969c\u6392\u67e5","text":"<p>\u6c47\u603b\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u6700\u5e38\u89c1\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"projects/rcsb_pdb/troubleshooting/#1-search-api-429-503","title":"1. Search API \u8fd4\u56de 429 / 503","text":"<ul> <li>\u73b0\u8c61\uff1a\u65e5\u5fd7\u51fa\u73b0 <code>HTTP 429</code> \u6216 <code>503</code></li> <li>\u539f\u56e0\uff1a\u8bf7\u6c42\u8fc7\u5feb\u6216\u88ab\u9650\u6d41</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a</li> <li>\u5c06 <code>CONCURRENT_REQUESTS</code> \u8c03\u4f4e\u81f3 10~16</li> <li>\u63d0\u9ad8 <code>DOWNLOAD_DELAY</code> \u81f3 2 \u79d2</li> <li>\u68c0\u67e5\u4ee3\u7406\u53ef\u7528\u6027\uff0c\u5fc5\u8981\u65f6\u542f\u7528\u5907\u7528\u4ee3\u7406\u6c60</li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#2-entrychemcomp","title":"2. Entry/ChemComp \u8bf7\u6c42\u8d85\u65f6","text":"<ul> <li>\u73b0\u8c61\uff1a\u5927\u91cf <code>TimeoutError</code> \u6216 <code>_parse_json</code> \u8b66\u544a</li> <li>\u539f\u56e0\uff1a\u63a5\u53e3\u54cd\u5e94\u6162\u3001\u7f51\u7edc\u4e0d\u7a33\u5b9a</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a</li> <li>\u5c06 <code>DOWNLOAD_TIMEOUT</code> \u63d0\u9ad8\u5230 120</li> <li>\u5f00\u542f <code>PLAYWRIGHT_PROCESS_REQUEST_HEADERS</code>\uff0c\u6a21\u62df\u771f\u5b9e\u6d4f\u89c8\u5668\u5934</li> <li>\u589e\u52a0\u91cd\u8bd5\u6b21\u6570\uff1a<code>-s RETRY_TIMES=50</code></li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#3-mongodb","title":"3. MongoDB \u8fde\u63a5\u5931\u8d25","text":"<ul> <li>\u73b0\u8c61\uff1a<code>pymongo.errors.ServerSelectionTimeoutError</code></li> <li>\u6392\u67e5\uff1a</li> <li>\u786e\u8ba4 Mongo \u670d\u52a1\u662f\u5426\u542f\u52a8\u3001\u7aef\u53e3\u662f\u5426\u53ef\u8bbf\u95ee</li> <li>\u6821\u9a8c <code>MONGODB_DATABASES[\"default\"]</code> \u7684\u8d26\u53f7\u5bc6\u7801</li> <li>\u82e5\u4f7f\u7528\u4e91\u5b9e\u4f8b\uff0c\u786e\u4fdd IP \u767d\u540d\u5355\u5df2\u6dfb\u52a0\u722c\u866b\u8282\u70b9</li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#4-redis","title":"4. Redis \u6e38\u6807\u4e0d\u540c\u6b65","text":"<ul> <li>\u73b0\u8c61\uff1a\u589e\u91cf\u6a21\u5f0f\u91cd\u590d\u6293\u53d6\u6216\u5b8c\u5168\u4e0d\u6293\u53d6</li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a</li> <li>\u6e05\u7406 Redis\uff1a<code>redis-cli DEL rcsb_all_api:revision</code></li> <li>\u6e05\u7406 Mongo \u6e38\u6807\uff1a<code>db.rcsb_increment_state.remove({})</code></li> <li>\u91cd\u65b0\u6267\u884c\u4e00\u6b21\u5168\u91cf\u4efb\u52a1\uff0c\u7528\u4e8e\u91cd\u5efa\u57fa\u7ebf</li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#5","title":"5. \u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25","text":"<ul> <li>\u73b0\u8c61\uff1aCIF/\u9a8c\u8bc1\u56fe\u7247\u7f3a\u5931</li> <li>\u6392\u67e5\uff1a</li> <li>\u786e\u4fdd <code>FILES_STORE</code> / <code>IMAGES_STORE</code> \u6307\u5411\u53ef\u5199\u8def\u5f84</li> <li>\u68c0\u67e5 <code>FileDownloadPipeline</code> \u662f\u5426\u5728 <code>custom_settings</code> \u4e2d\u88ab\u7981\u7528</li> <li>\u5bf9\u4e8e\u957f\u8def\u5f84\u7684 Windows \u73af\u5883\uff0c\u53ef\u542f\u7528 <code>LongPathsEnabled</code></li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#6-mkdocs-serve","title":"6. mkdocs serve \u65e0\u6cd5\u89e3\u6790\u6a21\u5757","text":"<ul> <li>\u73b0\u8c61\uff1a<code>mkdocstrings: ModuleNotFoundError</code></li> <li>\u89e3\u51b3\u529e\u6cd5\uff1a</li> <li>\u8fd0\u884c <code>pip install -r MkDocs_doc/requirements.txt</code></li> <li>\u786e\u8ba4 <code>mkdocs.yml</code> \u4e2d <code>mkdocstrings.handlers.python.paths</code> \u5305\u542b <code>../code_liu</code></li> <li>\u5728 <code>MkDocs_doc</code> \u76ee\u5f55\u6267\u884c <code>mkdocs serve</code>\uff0c\u786e\u4fdd\u76f8\u5bf9\u8def\u5f84\u6b63\u786e</li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#7","title":"7. \u5b57\u6bb5\u8fc7\u6ee4\u4e0d\u751f\u6548","text":"<ul> <li>\u6392\u67e5\u6b65\u9aa4\uff1a</li> <li>\u786e\u8ba4 <code>field_filter_config</code> \u8f93\u5165\u8def\u5f84\u6b63\u786e\uff08\u76f8\u5bf9\u8def\u5f84\u76f8\u5bf9\u4e8e spider \u6587\u4ef6\uff09</li> <li>\u68c0\u67e5 JSON \u662f\u5426 UTF-8 \u7f16\u7801\u3001\u8bed\u6cd5\u6b63\u786e</li> <li>\u5728\u65e5\u5fd7\u4e2d\u641c\u7d22 <code>FieldFilter</code>\uff0c\u786e\u8ba4\u914d\u7f6e\u662f\u5426\u88ab\u52a0\u8f7d</li> </ul>"},{"location":"projects/rcsb_pdb/troubleshooting/#8","title":"8. \u4efb\u52a1\u4e2d\u9014\u9000\u51fa","text":"<ul> <li>\u5e38\u89c1\u539f\u56e0\uff1a</li> <li>Mongo/Redis \u65ad\u5f00\uff1a\u914d\u7f6e <code>AUTOTHROTTLE_ENABLED = False</code> \u7684\u60c5\u51b5\u4e0b\u7f51\u7edc\u6296\u52a8\u66f4\u52a0\u660e\u663e</li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff1aJSON \u6587\u4ef6/\u65e5\u5fd7\u5199\u5165\u5931\u8d25</li> <li>Scrapy \u5f02\u5e38\u9000\u51fa\uff1a\u67e5\u770b <code>logs/*.log</code>\uff0c\u641c\u7d22 <code>Traceback</code></li> </ul> <p>\u5982\u4ecd\u65e0\u6cd5\u5b9a\u4f4d\u95ee\u9898\uff0c\u53ef\u5728\u7fa4\u5185\u63d0\u4f9b\u65e5\u5fd7\u7247\u6bb5\u3001\u547d\u4ee4\u53c2\u6570\u4e0e\u8fd0\u884c\u73af\u5883\u4fe1\u606f\u3002*** End Patchgithubassistant to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_patch to=functions.apply_p']]],</p>"},{"location":"projects/rcsb_pdb/troubleshooting/#_2","title":"\u6545\u969c\u6392\u67e5","text":"<p>\u672c\u6587\u6863\u5217\u51fa RCSB PDB \u722c\u866b\u9879\u76ee\u7684\u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"projects/rcsb_pdb/troubleshooting/#_3","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"projects/rcsb_pdb/troubleshooting/#1mongodb","title":"\u95ee\u9898 1\uff1aMongoDB \u8fde\u63a5\u5931\u8d25","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a <pre><code>pymongo.errors.ServerSelectionTimeoutError: No servers found\n</code></pre></p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. MongoDB \u670d\u52a1\u672a\u542f\u52a8 2. \u8fde\u63a5\u4fe1\u606f\u914d\u7f6e\u9519\u8bef 3. \u7f51\u7edc\u8fde\u63a5\u95ee\u9898 4. \u9632\u706b\u5899\u963b\u6b62\u8fde\u63a5</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u68c0\u67e5 MongoDB \u670d\u52a1\uff1a    <pre><code># Linux/Mac\nsudo systemctl status mongod\n\n# Windows\n# \u68c0\u67e5\u670d\u52a1\u7ba1\u7406\u5668\u4e2d MongoDB \u670d\u52a1\u662f\u5426\u8fd0\u884c\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u8fde\u63a5\u4fe1\u606f\uff1a    <pre><code># \u5728 settings.py \u4e2d\u68c0\u67e5\nMONGODB_DATABASES = {\n    \"default\": {\n        'host': '192.168.1.245',  # \u786e\u8ba4\u4e3b\u673a\u5730\u5740\u6b63\u786e\n        'port': 27017,             # \u786e\u8ba4\u7aef\u53e3\u6b63\u786e\n        'user': 'medpeer',         # \u786e\u8ba4\u7528\u6237\u540d\u6b63\u786e\n        'password': 'medpeer',     # \u786e\u8ba4\u5bc6\u7801\u6b63\u786e\n    },\n}\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5\u8fde\u63a5\uff1a    <pre><code>from pymongo import MongoClient\nclient = MongoClient('mongodb://medpeer:medpeer@192.168.1.245:27017/')\nprint(client.server_info())  # \u5982\u679c\u6210\u529f\u4f1a\u6253\u5370\u670d\u52a1\u5668\u4fe1\u606f\n</code></pre></p> </li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#2redis","title":"\u95ee\u9898 2\uff1aRedis \u8fde\u63a5\u5931\u8d25\uff08\u589e\u91cf\u6a21\u5f0f\uff09","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a <pre><code>redis.exceptions.ConnectionError: Error connecting to Redis\n</code></pre></p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. Redis \u670d\u52a1\u672a\u542f\u52a8 2. \u8fde\u63a5\u4fe1\u606f\u914d\u7f6e\u9519\u8bef 3. \u5bc6\u7801\u9519\u8bef</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u68c0\u67e5 Redis \u670d\u52a1\uff1a    <pre><code># Linux/Mac\nredis-cli ping  # \u5e94\u8be5\u8fd4\u56de PONG\n\n# Windows\n# \u68c0\u67e5 Redis \u670d\u52a1\u662f\u5426\u8fd0\u884c\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u8fde\u63a5\uff1a    <pre><code>import redis\nr = redis.Redis(\n    host='101.200.62.36',\n    port=6379,\n    password='medpeer',\n    db=1\n)\nprint(r.ping())  # \u5e94\u8be5\u8fd4\u56de True\n</code></pre></p> </li> <li> <p>\u5982\u679c\u4e0d\u9700\u8981\u589e\u91cf\u529f\u80fd\uff1a</p> </li> <li>\u4f7f\u7528 <code>mode=full</code> \u5168\u91cf\u6a21\u5f0f\uff0c\u4e0d\u9700\u8981 Redis</li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#3api","title":"\u95ee\u9898 3\uff1aAPI \u8bf7\u6c42\u5931\u8d25","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a <pre><code>HTTP 429: Too Many Requests\nHTTP 503: Service Unavailable\n</code></pre></p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. \u8bf7\u6c42\u9891\u7387\u8fc7\u9ad8 2. API \u670d\u52a1\u5668\u4e34\u65f6\u4e0d\u53ef\u7528 3. \u7f51\u7edc\u95ee\u9898</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u589e\u52a0\u4e0b\u8f7d\u5ef6\u8fdf\uff1a    <pre><code># \u5728 settings.py \u4e2d\nDOWNLOAD_DELAY = 2  # \u589e\u52a0\u5230 2 \u79d2\n</code></pre></p> </li> <li> <p>\u51cf\u5c11\u5e76\u53d1\u6570\uff1a    <pre><code>CONCURRENT_REQUESTS = 16  # \u4ece 32 \u964d\u5230 16\n</code></pre></p> </li> <li> <p>\u68c0\u67e5\u91cd\u8bd5\u914d\u7f6e\uff1a    <pre><code>RETRY_ENABLED = True\nRETRY_TIMES = 30  # \u786e\u4fdd\u91cd\u8bd5\u6b21\u6570\u8db3\u591f\nRETRY_HTTP_CODES = [429, 503, 504]  # \u786e\u4fdd\u5305\u542b\u8fd9\u4e9b\u72b6\u6001\u7801\n</code></pre></p> </li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#4","title":"\u95ee\u9898 4\uff1a\u5b57\u6bb5\u8fc7\u6ee4\u4e0d\u751f\u6548","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a - \u6570\u636e\u4e2d\u4ecd\u7136\u5305\u542b\u4e0d\u9700\u8981\u7684\u5b57\u6bb5</p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u9519\u8bef 2. \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u9519\u8bef 3. \u5b57\u6bb5\u8def\u5f84\u4e0d\u6b63\u786e</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a    <pre><code># \u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\nscrapy crawl rcsb_all_api -a field_filter_config=/absolute/path/to/config.json\n\n# \u6216\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e\u722c\u866b\u6587\u4ef6\uff09\nscrapy crawl rcsb_all_api -a field_filter_config=field_filter_config.json\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\uff1a    <pre><code>{\n  \"entry_properties\": {\n    \"include\": [\"rcsb_id\", \"struct.title\"]\n  }\n}\n</code></pre></p> </li> <li> <p>\u68c0\u67e5\u5b57\u6bb5\u8def\u5f84\uff1a</p> </li> <li>\u4f7f\u7528\u70b9\u53f7\u5206\u9694\uff0c\u5982 <code>struct.title</code></li> <li>\u53c2\u8003 API \u8fd4\u56de\u7684\u5b9e\u9645\u5b57\u6bb5\u7ed3\u6784</li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#5_1","title":"\u95ee\u9898 5\uff1a\u589e\u91cf\u6e38\u6807\u4e22\u5931","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a - \u589e\u91cf\u6a21\u5f0f\u4ece\u5f00\u59cb\u91c7\u96c6\uff0c\u800c\u4e0d\u662f\u4ece\u4e0a\u6b21\u4f4d\u7f6e\u7ee7\u7eed</p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. Redis \u6570\u636e\u8fc7\u671f 2. Redis \u8fde\u63a5\u5931\u8d25 3. \u6e38\u6807\u672a\u6b63\u786e\u4fdd\u5b58</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u68c0\u67e5 Redis TTL\uff1a    <pre><code># \u9ed8\u8ba4 TTL \u662f 60 \u5929\nREDIS_TTL_SECONDS = 60 * 60 * 24 * 60\n</code></pre></p> </li> <li> <p>\u624b\u52a8\u8bbe\u7f6e\u6e38\u6807\uff1a    <pre><code>from src.utils.redis_manager import RedisManager\nredis = RedisManager().get_connection()\nredis.hset('rcsb_all_api:revision', 'last_revision_date', '2024-01-01T00:00:00Z')\n</code></pre></p> </li> <li> <p>\u4ece MongoDB \u6062\u590d\u6e38\u6807\uff1a    <pre><code>from src.utils.mongodb_manager import MongoDBManager\nmongo = MongoDBManager()\ncollection = mongo.db['rcsb_increment_state']\ndoc = collection.find_one({'_id': 'rcsb_all_api'})\nif doc:\n    last_revision = doc.get('last_revision_date')\n    # \u8bbe\u7f6e\u5230 Redis\n</code></pre></p> </li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#6","title":"\u95ee\u9898 6\uff1a\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a <pre><code>Failed to download file: ...\n</code></pre></p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. \u6587\u4ef6 URL \u65e0\u6548 2. \u7f51\u7edc\u95ee\u9898 3. \u5b58\u50a8\u8def\u5f84\u4e0d\u5b58\u5728 4. \u6743\u9650\u95ee\u9898</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u68c0\u67e5\u5b58\u50a8\u8def\u5f84\uff1a    <pre><code># \u5728 constant.py \u4e2d\nUPLOAD_PATH = \"/path/to/uploads\"  # \u786e\u4fdd\u8def\u5f84\u5b58\u5728\u4e14\u6709\u5199\u6743\u9650\n</code></pre></p> </li> <li> <p>\u68c0\u67e5\u6587\u4ef6 URL\uff1a</p> </li> <li>\u5728\u65e5\u5fd7\u4e2d\u67e5\u770b\u5177\u4f53\u7684\u6587\u4ef6 URL</li> <li> <p>\u624b\u52a8\u8bbf\u95ee URL \u9a8c\u8bc1\u662f\u5426\u53ef\u8bbf\u95ee</p> </li> <li> <p>\u68c0\u67e5\u6743\u9650\uff1a    <pre><code># Linux/Mac\nchmod 755 /path/to/uploads\n</code></pre></p> </li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#7_1","title":"\u95ee\u9898 7\uff1a\u5185\u5b58\u5360\u7528\u8fc7\u9ad8","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a - \u7a0b\u5e8f\u8fd0\u884c\u7f13\u6162 - \u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3</p> <p>\u53ef\u80fd\u539f\u56e0\uff1a 1. \u5e76\u53d1\u6570\u8fc7\u9ad8 2. \u6279\u91cf\u5927\u5c0f\u8fc7\u5927 3. \u6570\u636e\u91cf\u8fc7\u5927</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u964d\u4f4e\u5e76\u53d1\u6570\uff1a    <pre><code>CONCURRENT_REQUESTS = 16  # \u4ece 32 \u964d\u5230 16\n</code></pre></p> </li> <li> <p>\u51cf\u5c0f\u6279\u91cf\u5927\u5c0f\uff1a    <pre><code>scrapy crawl rcsb_all_api -a batch_size=25  # \u4ece 50 \u964d\u5230 25\n</code></pre></p> </li> <li> <p>\u4f7f\u7528\u5b57\u6bb5\u8fc7\u6ee4\uff1a</p> </li> <li>\u53ea\u91c7\u96c6\u9700\u8981\u7684\u5b57\u6bb5\uff0c\u51cf\u5c11\u5185\u5b58\u5360\u7528</li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#8_1","title":"\u95ee\u9898 8\uff1a\u65e5\u5fd7\u6587\u4ef6\u8fc7\u5927","text":"<p>\u9519\u8bef\u4fe1\u606f\uff1a - \u65e5\u5fd7\u6587\u4ef6\u5360\u7528\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u8c03\u6574\u65e5\u5fd7\u7ea7\u522b\uff1a    <pre><code>LOG_LEVEL = \"WARNING\"  # \u4ece DEBUG \u6216 INFO \u6539\u4e3a WARNING\n</code></pre></p> </li> <li> <p>\u5b9a\u671f\u6e05\u7406\u65e5\u5fd7\uff1a    <pre><code># \u5220\u9664 30 \u5929\u524d\u7684\u65e5\u5fd7\nfind /path/to/logs -name \"*.log\" -mtime +30 -delete\n</code></pre></p> </li> <li> <p>\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\uff1a</p> </li> <li>\u4f7f\u7528\u65e5\u5fd7\u8f6e\u8f6c\u5de5\u5177\uff08\u5982 logrotate\uff09</li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#_4","title":"\u8c03\u8bd5\u6280\u5de7","text":""},{"location":"projects/rcsb_pdb/troubleshooting/#1","title":"\u6280\u5de7 1\uff1a\u542f\u7528\u8be6\u7ec6\u65e5\u5fd7","text":"<pre><code># \u5728 settings.py \u4e2d\nLOG_LEVEL = \"DEBUG\"\n</code></pre>"},{"location":"projects/rcsb_pdb/troubleshooting/#2","title":"\u6280\u5de7 2\uff1a\u5355\u6761\u6a21\u5f0f\u8c03\u8bd5","text":"<pre><code># \u53ea\u91c7\u96c6\u4e00\u6761\u6570\u636e\uff0c\u4fbf\u4e8e\u8c03\u8bd5\nscrapy crawl rcsb_all_api -a pdb_id=1ABC -a output_filename=debug.json\n</code></pre>"},{"location":"projects/rcsb_pdb/troubleshooting/#3","title":"\u6280\u5de7 3\uff1a\u4f7f\u7528\u65ad\u70b9\u8c03\u8bd5","text":"<pre><code># \u5728 firing.py \u4e2d\u4f7f\u7528\nimport pdb; pdb.set_trace()  # \u8bbe\u7f6e\u65ad\u70b9\n</code></pre>"},{"location":"projects/rcsb_pdb/troubleshooting/#4_1","title":"\u6280\u5de7 4\uff1a\u67e5\u770b\u4e2d\u95f4\u6570\u636e","text":"<pre><code># \u5728\u722c\u866b\u4e2d\u6dfb\u52a0\u65e5\u5fd7\nself.logger.debug(f\"Entry data: {entry_data}\")\nself.logger.debug(f\"Filtered data: {filtered_data}\")\n</code></pre>"},{"location":"projects/rcsb_pdb/troubleshooting/#_5","title":"\u83b7\u53d6\u5e2e\u52a9","text":"<p>\u5982\u679c\u4ee5\u4e0a\u65b9\u6848\u65e0\u6cd5\u89e3\u51b3\u95ee\u9898\uff0c\u8bf7\uff1a</p> <ol> <li>\u67e5\u770b\u65e5\u5fd7\uff1a</li> <li>\u68c0\u67e5\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f</li> <li> <p>\u6ce8\u610f\u9519\u8bef\u5806\u6808\u8ddf\u8e2a</p> </li> <li> <p>\u68c0\u67e5\u914d\u7f6e\uff1a</p> </li> <li>\u9a8c\u8bc1\u6240\u6709\u914d\u7f6e\u9879\u662f\u5426\u6b63\u786e</li> <li> <p>\u53c2\u8003 \u914d\u7f6e\u8bf4\u660e</p> </li> <li> <p>\u67e5\u770b\u6587\u6863\uff1a</p> </li> <li>\u7cfb\u7edf\u5168\u666f - API \u53c2\u8003</li> <li>\u6838\u5fc3\u6a21\u5757 - \u6a21\u5757\u8bf4\u660e</li> <li> <p>\u4f7f\u7528\u793a\u4f8b - \u4f7f\u7528\u793a\u4f8b</p> </li> <li> <p>\u8054\u7cfb\u7ef4\u62a4\u8005\uff1a</p> </li> <li>\u63d0\u4f9b\u9519\u8bef\u65e5\u5fd7</li> <li>\u63d0\u4f9b\u914d\u7f6e\u4fe1\u606f\uff08\u9690\u85cf\u654f\u611f\u4fe1\u606f\uff09</li> <li>\u63cf\u8ff0\u590d\u73b0\u6b65\u9aa4</li> </ol>"},{"location":"projects/rcsb_pdb/troubleshooting/#_6","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb - \u73af\u5883\u914d\u7f6e</li> <li>\u914d\u7f6e\u8bf4\u660e - \u914d\u7f6e\u8be6\u89e3</li> <li>\u4f7f\u7528\u793a\u4f8b - \u4f7f\u7528\u793a\u4f8b</li> </ul>"},{"location":"projects/rcsb_pdb/update/","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u672c\u6587\u6863\u8bb0\u5f55 RCSB PDB \u722c\u866b\u9879\u76ee\u7684\u7248\u672c\u66f4\u65b0\u5386\u53f2\u3002</p>"},{"location":"projects/rcsb_pdb/update/#2025","title":"2025\u5e74","text":""},{"location":"projects/rcsb_pdb/update/#2025-11-18-","title":"2025-11-18- \u6587\u6863\u7cfb\u7edf\u5efa\u7acb","text":"<p>\u65b0\u589e\uff1a - \u5efa\u7acb\u5b8c\u6574\u7684\u9879\u76ee\u6587\u6863\u7cfb\u7edf - \u96c6\u6210 MkDocs + mkdocstrings \u81ea\u52a8\u751f\u6210 API \u6587\u6863 - \u6dfb\u52a0\u5feb\u901f\u5f00\u59cb\u3001\u67b6\u6784\u8bbe\u8ba1\u3001\u4f7f\u7528\u793a\u4f8b\u7b49\u5b8c\u6574\u6587\u6863 - \u5efa\u7acb\u6545\u969c\u6392\u67e5\u6307\u5357\u548c\u914d\u7f6e\u8bf4\u660e\u6587\u6863</p> <p>\u6539\u8fdb\uff1a - \u4f18\u5316\u6587\u6863\u7ed3\u6784\uff0c\u63d0\u9ad8\u53ef\u8bfb\u6027\u548c\u5bfc\u822a\u6027 - \u7edf\u4e00\u6587\u6863\u683c\u5f0f\u548c\u98ce\u683c - \u5b8c\u5584\u4ee3\u7801\u793a\u4f8b\u548c\u4f7f\u7528\u8bf4\u660e</p>"},{"location":"projects/rcsb_pdb/update/#2025-11-17-","title":"2025-11-17 - \u589e\u91cf\u66f4\u65b0\u529f\u80fd","text":"<p>\u65b0\u589e\uff1a - \u652f\u6301\u57fa\u4e8e <code>revision_date</code> \u7684\u589e\u91cf\u66f4\u65b0\u6a21\u5f0f - Redis \u5b58\u50a8\u6bcf\u4e2a\u7ed3\u6784\u7684 revision_date\uff0c\u7528\u4e8e\u5feb\u901f\u53bb\u91cd - MongoDB \u5b58\u50a8\u5168\u5c40\u589e\u91cf\u6e38\u6807\uff0c\u8bb0\u5f55\u4e0a\u6b21\u66f4\u65b0\u7684\u6700\u5927 revision_date - \u652f\u6301 <code>overlap_days</code> \u53c2\u6570\uff0c\u5411\u524d\u91cd\u53e0\u82e5\u5e72\u5929\u907f\u514d\u9057\u6f0f\u6570\u636e</p> <p>\u6539\u8fdb\uff1a - \u4f18\u5316\u589e\u91cf\u6e38\u6807\u7ba1\u7406\u903b\u8f91 - \u63d0\u9ad8\u589e\u91cf\u66f4\u65b0\u7684\u51c6\u786e\u6027\u548c\u6548\u7387 - \u51cf\u5c11\u91cd\u590d\u6570\u636e\u91c7\u96c6</p>"},{"location":"projects/rcsb_pdb/update/#2025-11-17-_1","title":"2025-11-17 - \u5b57\u6bb5\u8fc7\u6ee4\u529f\u80fd","text":"<p>\u65b0\u589e\uff1a - \u652f\u6301\u901a\u8fc7 JSON \u914d\u7f6e\u6587\u4ef6\u81ea\u5b9a\u4e49\u9700\u8981\u91c7\u96c6\u7684\u5b57\u6bb5 - <code>FieldFilter</code> \u7c7b\u5b9e\u73b0\u7075\u6d3b\u7684\u5b57\u6bb5\u8fc7\u6ee4\u903b\u8f91 - \u652f\u6301\u767d\u540d\u5355\uff08whitelist\uff09\u548c\u9ed1\u540d\u5355\uff08blacklist\uff09\u4e24\u79cd\u6a21\u5f0f - \u652f\u6301\u5d4c\u5957\u5b57\u6bb5\u7684\u8fc7\u6ee4\u89c4\u5219</p> <p>\u6539\u8fdb\uff1a - \u5927\u5e45\u51cf\u5c11\u6570\u636e\u91cf\u548c\u5b58\u50a8\u7a7a\u95f4 - \u63d0\u9ad8\u6570\u636e\u91c7\u96c6\u548c\u5904\u7406\u6548\u7387 - \u652f\u6301\u6309\u9700\u5b9a\u5236\u6570\u636e\u7ed3\u6784</p>"},{"location":"projects/rcsb_pdb/update/#2025-11-17-_2","title":"2025-11-17 - \u6587\u4ef6\u4e0b\u8f7d\u529f\u80fd","text":"<p>\u65b0\u589e\uff1a - \u81ea\u52a8\u4e0b\u8f7d CIF \u7ed3\u6784\u6587\u4ef6 - \u81ea\u52a8\u4e0b\u8f7d\u9a8c\u8bc1\u56fe\u7247\uff08validation image\uff09 - \u6587\u4ef6\u8def\u5f84\u81ea\u52a8\u66ff\u6362\u4e3a OSS \u8def\u5f84 - \u652f\u6301\u6587\u4ef6\u91cd\u5b9a\u5411\u5904\u7406</p> <p>\u6539\u8fdb\uff1a - \u4f18\u5316\u6587\u4ef6\u4e0b\u8f7d\u6d41\u7a0b - \u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u7684\u53ef\u9760\u6027 - \u652f\u6301\u5927\u6587\u4ef6\u4e0b\u8f7d</p>"},{"location":"projects/rcsb_pdb/update/#2025-11-17-_3","title":"2025-11-17- \u591a\u6a21\u5f0f\u8fd0\u884c\u652f\u6301","text":"<p>\u65b0\u589e\uff1a - \u5355\u6761\u6a21\u5f0f\uff1a\u652f\u6301\u901a\u8fc7 PDB ID \u83b7\u53d6\u5355\u4e2a\u7ed3\u6784\u6570\u636e\uff0c\u7528\u4e8e\u8c03\u8bd5\u548c\u6d4b\u8bd5 - \u5168\u91cf\u6a21\u5f0f\uff1a\u652f\u6301\u6279\u91cf\u83b7\u53d6\u6240\u6709\u6216\u6307\u5b9a\u6570\u91cf\u7684\u7ed3\u6784\u6570\u636e - \u589e\u91cf\u6a21\u5f0f\uff1a\u57fa\u4e8e revision_date \u5b9e\u73b0\u589e\u91cf\u6570\u636e\u66f4\u65b0</p> <p>\u6539\u8fdb\uff1a - \u7edf\u4e00\u4e09\u79cd\u6a21\u5f0f\u7684\u4ee3\u7801\u903b\u8f91 - \u63d0\u9ad8\u4ee3\u7801\u590d\u7528\u6027 - \u4f18\u5316\u8fd0\u884c\u6548\u7387</p>"},{"location":"projects/rcsb_pdb/update/#_2","title":"\u9879\u76ee\u529f\u80fd\u6e05\u5355","text":""},{"location":"projects/rcsb_pdb/update/#_3","title":"\u5df2\u5b9e\u73b0\u529f\u80fd","text":"<ul> <li>\u2705 \u5355\u6761\u6570\u636e\u62c9\u53d6 - \u901a\u8fc7 PDB ID \u83b7\u53d6\u5355\u4e2a\u7ed3\u6784\u6570\u636e</li> <li>\u2705 \u6279\u91cf\u5168\u91cf\u91c7\u96c6 - \u652f\u6301\u6279\u91cf\u83b7\u53d6\u6307\u5b9a\u6570\u91cf\u7684\u7ed3\u6784\u6570\u636e</li> <li>\u2705 \u589e\u91cf\u66f4\u65b0 - \u57fa\u4e8e revision_date \u7684\u667a\u80fd\u589e\u91cf\u66f4\u65b0</li> <li>\u2705 \u5b57\u6bb5\u8fc7\u6ee4 - \u7075\u6d3b\u7684\u5b57\u6bb5\u8fc7\u6ee4\u914d\u7f6e</li> <li>\u2705 \u6587\u4ef6\u4e0b\u8f7d - \u81ea\u52a8\u4e0b\u8f7d CIF \u6587\u4ef6\u548c\u9a8c\u8bc1\u56fe\u7247</li> <li>\u2705 MongoDB \u5b58\u50a8 - \u6570\u636e\u81ea\u52a8\u5165\u5e93\u5230 MongoDB</li> <li>\u2705 Redis \u6e38\u6807\u7ba1\u7406 - \u4f7f\u7528 Redis \u7ba1\u7406\u589e\u91cf\u6e38\u6807</li> <li>\u2705 \u9519\u8bef\u91cd\u8bd5\u673a\u5236 - \u81ea\u52a8\u91cd\u8bd5\u5931\u8d25\u7684\u8bf7\u6c42</li> <li>\u2705 \u65e5\u5fd7\u8bb0\u5f55 - \u5b8c\u6574\u7684\u65e5\u5fd7\u8bb0\u5f55\u7cfb\u7edf</li> <li>\u2705 \u6570\u636e\u9a8c\u8bc1 - \u81ea\u52a8\u9a8c\u8bc1\u6570\u636e\u683c\u5f0f\u548c\u5b8c\u6574\u6027</li> </ul>"},{"location":"projects/rcsb_pdb/update/#_4","title":"\u8ba1\u5212\u529f\u80fd","text":"<ul> <li>\u23f3 \u6570\u636e\u9a8c\u8bc1\u548c\u6e05\u6d17 - \u66f4\u5b8c\u5584\u7684\u6570\u636e\u8d28\u91cf\u68c0\u67e5</li> <li>\u23f3 \u6570\u636e\u5bfc\u51fa\u529f\u80fd - \u652f\u6301\u5bfc\u51fa\u4e3a\u591a\u79cd\u683c\u5f0f</li> <li>\u23f3 Web \u7ba1\u7406\u754c\u9762 - \u53ef\u89c6\u5316\u7684\u7ba1\u7406\u754c\u9762</li> <li>\u23f3 \u6027\u80fd\u76d1\u63a7 - \u5b9e\u65f6\u76d1\u63a7\u91c7\u96c6\u6027\u80fd</li> <li>\u23f3 \u81ea\u52a8\u5316\u6d4b\u8bd5 - \u5b8c\u6574\u7684\u5355\u5143\u6d4b\u8bd5\u548c\u96c6\u6210\u6d4b\u8bd5</li> <li>\u23f3 \u6570\u636e\u7edf\u8ba1 - \u6570\u636e\u91c7\u96c6\u7edf\u8ba1\u548c\u5206\u6790</li> <li>\u23f3 \u544a\u8b66\u7cfb\u7edf - \u5f02\u5e38\u60c5\u51b5\u81ea\u52a8\u544a\u8b66</li> </ul>"},{"location":"projects/rcsb_pdb/update/#_5","title":"\u7248\u672c\u8bf4\u660e","text":"<p>\u5f53\u524d\u9879\u76ee\u7248\u672c\uff1a1.0.0</p>"},{"location":"projects/rcsb_pdb/update/#_6","title":"\u8d21\u732e\u6307\u5357","text":"<p>\u5982\u679c\u4f60\u53d1\u73b0 Bug \u6216\u6709\u6539\u8fdb\u5efa\u8bae\uff0c\u8bf7\uff1a</p> <ol> <li>\u5728\u9879\u76ee\u4e2d\u63d0\u4ea4 Issue</li> <li>\u8be6\u7ec6\u63cf\u8ff0\u95ee\u9898\u6216\u5efa\u8bae</li> <li>\u63d0\u4f9b\u590d\u73b0\u6b65\u9aa4\uff08\u5982\u679c\u662f Bug\uff09</li> <li>\u8bf4\u660e\u671f\u671b\u7684\u884c\u4e3a</li> </ol>"},{"location":"projects/rcsb_pdb/update/#_7","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb - \u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u9879\u76ee</li> <li>\u67b6\u6784\u8bbe\u8ba1 - \u4e86\u89e3\u7cfb\u7edf\u67b6\u6784</li> <li>\u4f7f\u7528\u793a\u4f8b - \u67e5\u770b\u4f7f\u7528\u793a\u4f8b</li> <li>\u914d\u7f6e\u8bf4\u660e - \u914d\u7f6e\u53c2\u6570\u8be6\u89e3</li> <li>\u6545\u969c\u6392\u67e5 - \u5e38\u89c1\u95ee\u9898\u89e3\u51b3</li> </ul>"},{"location":"projects/rcsb_pdb/generated/settings/","title":"settings","text":"<p>\u6a21\u5757\u8def\u5f84: <code>code_liu.RCSB_PDB.src.settings</code></p>"},{"location":"projects/rcsb_pdb/generated/settings/#_1","title":"\u5bfc\u5165","text":"<ul> <li><code>os</code></li> <li><code>random</code></li> <li><code>src.constant.LOG_PATH</code></li> <li><code>src.constant.UPLOAD_PATH</code></li> <li><code>src.utils.base_logger</code></li> <li><code>time</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/items/rcsb_pdb_item/","title":"rcsb_pdb_item","text":"<p>RCSB PDB All API Item</p> <p>\u7528\u4e8e RcsbAllApiSpider \u7684\u6807\u51c6\u5316\u6570\u636e\u8f93\u51fa\uff0c\u786e\u4fdd\u540e\u7eed Pipeline \u80fd\u591f\u7edf\u4e00\u5904\u7406\u3002</p> <p>\u6a21\u5757\u8def\u5f84: <code>code_liu.RCSB_PDB.src.items.rcsb_pdb_item</code></p>"},{"location":"projects/rcsb_pdb/generated/items/rcsb_pdb_item/#_1","title":"\u5bfc\u5165","text":"<ul> <li><code>scrapy.Field</code></li> <li><code>src.items.base_items.BaseItem</code></li> <li><code>src.items.base_items.FileOSSField</code></li> <li><code>src.items.base_items.StringField</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/items/rcsb_pdb_item/#_2","title":"\u7c7b","text":""},{"location":"projects/rcsb_pdb/generated/items/rcsb_pdb_item/#rcsballapiitem","title":"RcsbAllApiItem","text":"<p>All API \u5168\u5b57\u6bb5\u6570\u636e\u9879\u3002</p> <p>\u5b57\u6bb5:     PDB_ID: \u7ed3\u6784 ID\u3002     rcsb_id: Entry API \u8fd4\u56de\u7684\u552f\u4e00\u6807\u8bc6\u3002     entry_properties: Entry API \u7684 properties \u5b57\u5178\u3002     polymer_entities: Polymer \u5b9e\u4f53\u6570\u7ec4\u3002     nonpolymer_entities: Nonpolymer \u5b9e\u4f53\u6570\u7ec4\u3002     branched_entities: Branched \u5b9e\u4f53\u6570\u7ec4\u3002     chemcomp: ChemComp \u6570\u636e\u5217\u8868\u3002     drugbank: DrugBank \u6570\u636e\u5217\u8868\u3002     max_revision_date: revision_date\uff0c\u7528\u4e8e\u589e\u91cf\u6e38\u6807\u3002     cif_file: CIF \u6587\u4ef6\u4e0b\u8f7d\u7ed3\u679c\u3002     validation_image: \u9a8c\u8bc1\u56fe\u4e0b\u8f7d\u7ed3\u679c\u3002</p> <p>\u7ee7\u627f\u81ea: <code>BaseItem</code></p>"},{"location":"projects/rcsb_pdb/generated/items/rcsb_pdb_item/#_3","title":"\u5c5e\u6027","text":"<ul> <li><code>PDB_ID</code></li> <li><code>rcsb_id</code></li> <li><code>entry_properties</code></li> <li><code>polymer_entities</code></li> <li><code>nonpolymer_entities</code></li> <li><code>branched_entities</code></li> <li><code>chemcomp</code></li> <li><code>drugbank</code></li> <li><code>max_revision_date</code></li> <li><code>cif_file</code></li> <li><code>validation_image</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/pipelines/rcsb_pdb_pipeline/","title":"rcsb_pdb_pipeline","text":"<p>RCSB PDB All API Pipeline</p> <p>\u8d1f\u8d23\u5c06 RcsbAllApiItem \u5199\u5165 MongoDB\uff08\u6216\u5176\u4ed6\u5b58\u50a8\uff0c\u4f9d\u636e\u9879\u76ee Pipeline \u57fa\u7c7b\u5b9e\u73b0\uff09</p> <p>\u6a21\u5757\u8def\u5f84: <code>code_liu.RCSB_PDB.src.pipelines.rcsb_pdb_pipeline</code></p>"},{"location":"projects/rcsb_pdb/generated/pipelines/rcsb_pdb_pipeline/#_1","title":"\u5bfc\u5165","text":"<ul> <li><code>src.items.other.rcsb_pdb_item.RcsbAllApiItem</code></li> <li><code>src.pipelines.raw_storage_pipeline.MongoDBRawStoragePipeline</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/pipelines/rcsb_pdb_pipeline/#_2","title":"\u7c7b","text":""},{"location":"projects/rcsb_pdb/generated/pipelines/rcsb_pdb_pipeline/#rcsbpdbpipeline","title":"RcsbPdbPipeline","text":"<p>All API \u6570\u636e\u5165\u5e93 Pipeline\u3002</p> <p>\u5c5e\u6027:     connect_key: Mongo \u8fde\u63a5\u914d\u7f6e key\u3002     collection_name: \u5199\u5165\u7684\u96c6\u5408\u540d\u79f0\u3002     item_class: \u671f\u671b\u7684 Item \u7c7b\u578b\u3002</p> <p>\u7ee7\u627f\u81ea: <code>MongoDBRawStoragePipeline</code></p>"},{"location":"projects/rcsb_pdb/generated/pipelines/rcsb_pdb_pipeline/#_3","title":"\u5c5e\u6027","text":"<ul> <li><code>connect_key</code> (<code>str</code>)</li> <li><code>collection_name</code> (<code>str</code>)</li> <li><code>item_class</code> (<code>RcsbAllApiItem</code>)</li> </ul>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/","title":"field_filter","text":"<p>\u5b57\u6bb5\u8fc7\u6ee4\u6a21\u5757 - \u6839\u636e\u914d\u7f6e\u7cbe\u786e\u63a7\u5236\u63d0\u53d6\u54ea\u4e9b\u5b57\u6bb5</p> <p>\u6a21\u5757\u8def\u5f84: <code>code_liu.RCSB_PDB.src.spider.rcsb_pdb.field_filter</code></p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#_1","title":"\u5bfc\u5165","text":"<ul> <li><code>json</code></li> <li><code>pathlib.Path</code></li> <li><code>typing.Any</code></li> <li><code>typing.Dict</code></li> <li><code>typing.List</code></li> <li><code>typing.Optional</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#_2","title":"\u7c7b","text":""},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#fieldfilter","title":"FieldFilter","text":"<p>\u5b57\u6bb5\u8fc7\u6ee4\u5668</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#_3","title":"\u65b9\u6cd5","text":""},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#filter_data","title":"filter_data","text":"<pre><code>def filter_data( self, data: &lt;ast.Subscript object at 0x0000028BFF63EB10&gt;, section: str )  -&gt; &lt;ast.Subscript object at 0x0000028BFF65E9D0&gt;\n</code></pre> <p>\u6839\u636e\u914d\u7f6e\u8fc7\u6ee4\u6307\u5b9a\u677f\u5757\u7684\u6570\u636e\u3002</p> <p>\u53c2\u6570:     data (Dict[str, Any]): \u5f85\u8fc7\u6ee4\u7684\u6570\u636e\u3002     section (str): \u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u677f\u5757\u540d\u79f0\u3002 \u8fd4\u56de:     Dict[str, Any]: \u8fc7\u6ee4\u540e\u7684\u6570\u636e\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#_4","title":"\u51fd\u6570","text":""},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/field_filter/#filter_data_1","title":"filter_data","text":"<pre><code>def filter_data( self, data: &lt;ast.Subscript object at 0x0000028BFF63EB10&gt;, section: str )  -&gt; &lt;ast.Subscript object at 0x0000028BFF65E9D0&gt;\n</code></pre> <p>\u6839\u636e\u914d\u7f6e\u8fc7\u6ee4\u6307\u5b9a\u677f\u5757\u7684\u6570\u636e\u3002</p> <p>\u53c2\u6570:     data (Dict[str, Any]): \u5f85\u8fc7\u6ee4\u7684\u6570\u636e\u3002     section (str): \u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u677f\u5757\u540d\u79f0\u3002 \u8fd4\u56de:     Dict[str, Any]: \u8fc7\u6ee4\u540e\u7684\u6570\u636e\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/","title":"rcsb_pdb_spider","text":"<p>RCSB PDB \u722c\u866b - \u652f\u6301\u5355\u6761\u62c9\u53d6\u3001\u6279\u91cf\u5168\u91cf\u3001\u589e\u91cf\u66f4\u65b0</p> <p>\u6a21\u5757\u8def\u5f84: <code>code_liu.RCSB_PDB.src.spider.rcsb_pdb.rcsb_pdb_spider</code></p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#_1","title":"\u5bfc\u5165","text":"<ul> <li><code>datetime.datetime</code></li> <li><code>datetime.timedelta</code></li> <li><code>field_filter.FieldFilter</code></li> <li><code>json</code></li> <li><code>pathlib.Path</code></li> <li><code>scrapy</code></li> <li><code>src.items.other.rcsb_pdb_item.RcsbAllApiItem</code></li> <li><code>src.utils.mongodb_manager.MongoDBManager</code></li> <li><code>src.utils.redis_manager.RedisManager</code></li> <li><code>typing.Any</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#_2","title":"\u7c7b","text":""},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#rcsballapispider","title":"RcsbAllApiSpider","text":"<p>\u63d0\u53d6\u5b8c\u6574 CoreEntry \u6570\u636e\u7684\u722c\u866b</p> <p>\u7ee7\u627f\u81ea: <code>scrapy.Spider</code></p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#_3","title":"\u5c5e\u6027","text":"<ul> <li><code>name</code> (<code>str</code>)</li> <li><code>allowed_domains</code></li> <li><code>start_urls</code></li> <li><code>OUTPUT_FILENAME</code> (<code>str</code>)</li> <li><code>FIELD_FILTER_CONFIG</code> (<code>NoneType</code>)</li> <li><code>DEFAULT_MAX_TARGETS</code> (<code>int</code>)</li> <li><code>DEFAULT_BATCH_SIZE</code> (<code>int</code>)</li> <li><code>INCREMENT_COLLECTION</code> (<code>str</code>)</li> <li><code>INCREMENT_DOC_ID</code> (<code>str</code>)</li> <li><code>REDIS_REVISION_HASH</code> (<code>str</code>)</li> <li><code>REDIS_TTL_SECONDS</code></li> <li><code>SEARCH_API</code> (<code>str</code>)</li> <li><code>API_BASE</code> (<code>str</code>)</li> <li><code>API_ENDPOINTS</code></li> <li><code>SECTION_MAP</code></li> <li><code>custom_settings</code></li> </ul>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#_4","title":"\u65b9\u6cd5","text":""},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#parse","title":"parse","text":"<pre><code>def parse( self, response )\n</code></pre> <p>Scrapy \u9ed8\u8ba4\u5165\u53e3\u3002</p> <p>\u53c2\u6570:     response (Response): \u5360\u4f4d\u54cd\u5e94\uff08\u6765\u6e90\u4e8e start_urls\uff09\u3002 \u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed\u5c06\u8981\u8c03\u5ea6\u7684\u8bf7\u6c42\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#parse_search","title":"parse_search","text":"<pre><code>def parse_search( self, response )\n</code></pre> <p>\u89e3\u6790 Search API \u54cd\u5e94\u5e76\u8c03\u5ea6 Entry \u8bf7\u6c42\u3002</p> <p>\u53c2\u6570:     response (Response): Search API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002 \u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed Entry \u8bf7\u6c42\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#parse_entry","title":"parse_entry","text":"<pre><code>def parse_entry( self, response )\n</code></pre> <p>\u89e3\u6790 Entry API \u54cd\u5e94\u5e76\u5206\u53d1\u5b9e\u4f53\u8bf7\u6c42\u3002</p> <p>\u53c2\u6570:     response (Response): Entry API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002 \u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed\u5b9e\u4f53\u6216\u5316\u5408\u7269\u8bf7\u6c42\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#closed","title":"closed","text":"<pre><code>def closed( self, reason )\n</code></pre> <p>\u722c\u866b\u5173\u95ed\u65f6\u66f4\u65b0 Mongo \u4e2d\u7684\u589e\u91cf\u6e38\u6807\u3002</p> <p>\u53c2\u6570:     reason (str): Scrapy \u5173\u95ed\u539f\u56e0\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#_5","title":"\u51fd\u6570","text":""},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#parse_1","title":"parse","text":"<pre><code>def parse( self, response )\n</code></pre> <p>Scrapy \u9ed8\u8ba4\u5165\u53e3\u3002</p> <p>\u53c2\u6570:     response (Response): \u5360\u4f4d\u54cd\u5e94\uff08\u6765\u6e90\u4e8e start_urls\uff09\u3002 \u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed\u5c06\u8981\u8c03\u5ea6\u7684\u8bf7\u6c42\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#parse_search_1","title":"parse_search","text":"<pre><code>def parse_search( self, response )\n</code></pre> <p>\u89e3\u6790 Search API \u54cd\u5e94\u5e76\u8c03\u5ea6 Entry \u8bf7\u6c42\u3002</p> <p>\u53c2\u6570:     response (Response): Search API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002 \u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed Entry \u8bf7\u6c42\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#parse_entry_1","title":"parse_entry","text":"<pre><code>def parse_entry( self, response )\n</code></pre> <p>\u89e3\u6790 Entry API \u54cd\u5e94\u5e76\u5206\u53d1\u5b9e\u4f53\u8bf7\u6c42\u3002</p> <p>\u53c2\u6570:     response (Response): Entry API \u7684\u54cd\u5e94\u5bf9\u8c61\u3002 \u8fd4\u56de:     Generator[scrapy.Request, None, None]: \u540e\u7eed\u5b9e\u4f53\u6216\u5316\u5408\u7269\u8bf7\u6c42\u3002</p>"},{"location":"projects/rcsb_pdb/generated/spider/rcsb_pdb/rcsb_pdb_spider/#closed_1","title":"closed","text":"<pre><code>def closed( self, reason )\n</code></pre> <p>\u722c\u866b\u5173\u95ed\u65f6\u66f4\u65b0 Mongo \u4e2d\u7684\u589e\u91cf\u6e38\u6807\u3002</p> <p>\u53c2\u6570:     reason (str): Scrapy \u5173\u95ed\u539f\u56e0\u3002</p>"},{"location":"reference/","title":"\u53c2\u8003\u6587\u6863","text":"<p>\u8fd9\u91cc\u662f\u53c2\u8003\u6587\u6863\u4e2d\u5fc3\u3002</p>"},{"location":"reference/#_2","title":"\u6587\u6863\u5217\u8868","text":"<ul> <li>\u672f\u8bed\u8868 - \u672f\u8bed\u89e3\u91ca</li> <li>\u66f4\u65b0\u65e5\u5fd7 - \u7248\u672c\u66f4\u65b0\u8bb0\u5f55</li> </ul>"},{"location":"reference/glossary/","title":"\u73b0\u7528\u5e93/\u63d2\u4ef6/\u5de5\u5177\u4e00\u89c8","text":""},{"location":"reference/glossary/#mkdocs-mkdocs-material","title":"MkDocs + mkdocs-material\uff1a","text":"<p>\u9759\u6001\u7ad9\u751f\u6210\u3001\u5bfc\u822a/\u641c\u7d22/\u660e\u6697\u6a21\u5f0f UI\u3001.md-button \u7b49\u7ec4\u4ef6\u3002</p>"},{"location":"reference/glossary/#mkdocstringspython-autorefs","title":"mkdocstrings[python] + autorefs","text":"<p>\u89e3\u6790 Python \u6a21\u5757 docstring\uff0c\u751f\u6210 API \u53c2\u8003\u5e76\u652f\u6301\u6587\u5185\u4ea4\u53c9\u5f15\u7528\u3002</p>"},{"location":"reference/glossary/#pymdown-extensions","title":"pymdown-extensions","text":""},{"location":"reference/glossary/#admonition-pymdownxdetails","title":"admonition / pymdownx.details\uff1a","text":"<p>\u6298\u53e0\u5f0f\u201c\u6700\u8fd1\u66f4\u65b0\u201d\u7b49\u63d0\u793a\u6846\u3002</p>"},{"location":"reference/glossary/#pymdownxhighlight","title":"pymdownx.highlight\uff1a","text":"<p>\u4ee3\u7801\u9ad8\u4eae\u4e0e\u884c\u53f7\u3002</p>"},{"location":"reference/glossary/#pymdownxtabbed","title":"pymdownx.tabbed\uff1a","text":"<p>\u6807\u7b7e\u9875\u5185\u5bb9\uff08\u5c1a\u672a\u5927\u91cf\u4f7f\u7528\uff0c\u53ef\u968f\u65f6\u542f\u7528\uff09\u3002</p>"},{"location":"reference/glossary/#mermaid-extra_javascript","title":"Mermaid (extra_javascript)\uff1a","text":"<p>\u5728 Markdown \u5185\u76f4\u63a5\u63cf\u8ff0\u67b6\u6784/\u6d41\u7a0b\u56fe\uff0c\u6d4f\u89c8\u5668\u7aef\u6e32\u67d3\u3002</p>"},{"location":"reference/glossary/#_2","title":"\u81ea\u5b9a\u4e49\u8d44\u6e90","text":""},{"location":"reference/glossary/#stylesheetscustom-navcss","title":"stylesheets/custom-nav.css\uff1a","text":"<p>\u591a\u5c42\u5bfc\u822a\u7684\u5b57\u53f7/\u95f4\u8ddd/\u989c\u8272\u63a7\u5236\u3002</p>"},{"location":"reference/glossary/#stylesheetstheme-overridescss","title":"stylesheets/theme-overrides.css\uff1a","text":"<p>Hero\u3001\u5361\u7247\u3001\u6df1\u8272\u6a21\u5f0f\u3001\u8868\u683c\u548c TOC \u89c6\u89c9\u5347\u7ea7\u3002</p>"},{"location":"reference/glossary/#javascriptsinit-mermaidjs","title":"javascripts/init-mermaid.js\uff1a","text":"<p>\u521d\u59cb\u5316 Mermaid\uff0c\u542f\u7528 securityLevel: \"loose\" \u4ee5\u652f\u6301\u6587\u6863\u4e2d\u7684\u94fe\u63a5\u3002</p>"},{"location":"reference/glossary/#_3","title":"\u4e3b\u9898\u914d\u7f6e\u6269\u5c55","text":""},{"location":"reference/glossary/#inter-jetbrains-mono","title":"\u81ea\u5b9a\u4e49\u5b57\u4f53\uff08Inter / JetBrains Mono\uff09\u548c\u8c03\u8272\u677f\uff1b\u591c\u95f4/\u65e5\u95f4\u5207\u6362\u6309\u94ae\u3002","text":""},{"location":"reference/glossary/#material-search","title":"Material search \u63d2\u4ef6\uff08\u4e2d\u6587 + \u82f1\u6587\u5206\u8bcd\uff09\u3002","text":""}]}